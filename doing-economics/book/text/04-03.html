
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <title>
    Doing Economics: Empirical Project 4: Working in R
    </title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="../../assets/favicon.png">
    <meta property="og:title" content="Empirical Project 4: Working in R" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.core-econ.org/doing-economics/book/text/04-03.html" />
    <meta property="og:description" content="A unique resource for learning data handling, software and statistical skills by working through projects that address real-world policy problems." />
    <meta property="og:image" content="https://www.core-econ.org/doing-economics/book/images/web/cover.jpg" />
    <link rel="stylesheet" type="text/css" media="all" href="../styles/web.css?date=20200224120313" />
    <script>
        function delete_cookie(name) {
            document.cookie = name + '=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT;';
            console.log('Expired and removed MathJax menu cookie.');
        }
        delete_cookie('mjx.menu')
    </script>
            <script id="MathJaxConfig" type="text/x-mathjax-config" >
                MathJax.Hub.Config({
                    "HTML-CSS": {
                        availableFonts: [], // force use of webFont
                        webFont: "Gyre-Pagella",
                        scale: 90,
                        styles: {
                            ".MathJax [style*=border-top-width]": {
                                "border-top-width": "0.5pt ! important"
                            }
                        }
                    },
                    messageStyle: "none"
                });
            </script>
            <script id="MathJax"
                src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML">
            </script>
<script>
WebFontConfig = {
     google: {
         families: ['Amiri:400,400i,700', 'Source Sans Pro:400,700,700:latin-ext', 'Asap:400,400i,600,600i']
     }
};
(function(d) {
    var wf = d.createElement('script'), s = d.scripts[0];
    wf.src = 'https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.js';
    wf.async = true;
    s.parentNode.insertBefore(wf, s);
})(document)
</script>
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-71347024-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-106812057-1');
</script>
</head>
<body class="book chapter subchapter"
>
<div id="wrapper">
<div class="masthead">
        <ul>
                <li class="masthead-book-title">
                    <a href="../../index.html">Doing Economics</a>
                </li>
        </ul>
    <div class="controls">
    </div>
</div><!--.masthead-->
<div class="nav-buttons">
	<a class="nav-back-button">←</a>
	<a class="nav-button" href="#nav">Contents</a>
</div>
    <div class="chapter-opener-image chapter-opener-image-none">
    </div>
	<div id="content">
<h1 id="empirical-project-4-working-in-r"><strong>Empirical Project 4</strong> Working in R</h1>
<blockquote class="info web-full-width">
  <h3 id="download-the-code">Download the code</h3>
  <p>To <a href="https://tinyco.re/1982754">download the code chunks used in this project</a>, right-click on the download link and select ‘Save Link As…’. You’ll need to save the code download to your working directory, and open it in RStudio.</p>
  <p>Don’t forget to also download the data into your working directory by following the steps in this project.</p>
</blockquote>
<h2 id="r-specific-learning-objectives">R-specific learning objectives</h2>
<p>In addition to the learning objectives for this project, in this section you will learn how to convert (‘reshape’) data from wide to long format and vice versa.</p>
<h2 id="getting-started-in-r">Getting started in R</h2>
<p>For this project you will need the following packages:</p>
<ul>
  <li><code class="language-r highlighter-rouge"><span class="n">tidyverse</span></code>, to help with data manipulation</li>
  <li><code class="language-r highlighter-rouge"><span class="n">readxl</span></code>, to import an Excel spreadsheet</li>
  <li><code class="language-r highlighter-rouge"><span class="n">reshape2</span></code>, to manipulate datasets.</li>
</ul>
<p>You will also use the <code class="language-r highlighter-rouge"><span class="n">ggplot2</span></code> package to produce accurate graphs, but that comes as part of the <code class="language-r highlighter-rouge"><span class="n">tidyverse</span></code> package.</p>
<p>If you need to install these packages, run the following code:</p>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"readxl"</span><span class="p">,</span><span class="w"> </span><span class="s2">"tidyverse"</span><span class="p">,</span><span class="w"> </span><span class="s2">"reshape2"</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>
<p>You can import these libraries now, or when they are used in the R walk-throughs below.</p>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">readxl</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">reshape2</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<h2 id="part-41-gdp-and-its-components-as-a-measure-of-material-wellbeing">Part 4.1 GDP and its components as a measure of material wellbeing</h2>
<blockquote class="box fixed">
  <h3 id="learning-objectives-for-this-part">Learning objectives for this part</h3>
  <ul>
    <li>check datasets for missing data</li>
    <li>sort data and assign ranks based on values</li>
    <li>distinguish between time series and cross sectional data, and plot appropriate charts for each type of data.</li>
  </ul>
</blockquote>
<p>The GDP data we will look at is from the United Nations’ National Accounts Main Aggregates Database, which contains estimates of total GDP and its components for all countries over the period 1970 to present. We will look at how GDP and its components have changed over time, and investigate the usefulness of GDP per capita as a measure of wellbeing.</p>
<p>To answer the questions below, download the data and make sure you understand how the measure of total GDP is constructed.</p>
<ul>
  <li>Go to the United Nations’ <a href="https://tinyco.re/7226184" class="show-url">National Accounts Main Aggregates Database website</a>. On the right-hand side of the page, under ‘Data Availability’, click ‘Downloads’.</li>
  <li>Under the subheading ‘GDP and its breakdown at constant 2010 prices in US Dollars’, select the Excel file ‘All countries for all years – sorted alphabetically’.</li>
  <li>Save it in an easily accessible location, such as a folder on your Desktop or in your personal folder.</li>
</ul>
<blockquote class="expandable-box">
  <h3 id="r-walk-through-41-importing-the-excel-file-xlsx-or-xls-format-into-r"><strong>R walk-through 4.1</strong> Importing the Excel file (<code class="language-r highlighter-rouge"><span class="n">.xlsx</span></code> or <code class="language-r highlighter-rouge"><span class="n">.xls</span></code> format) into R</h3>
  <p>First, use <code class="language-r highlighter-rouge"><span class="n">setwd</span></code> to tell R where the datafile is stored. To avoid having to repeatedly use <code class="language-r highlighter-rouge"><span class="n">setwd</span></code> to tell R where your files are, keep all the files you need in that folder, including the Excel sheet you just downloaded. Replace ‘YOURFILEPATH’ with the full filepath which points to the folder with your datafile. If you don’t know how to find the path to that folder, see the <a href="https://tinyco.re/3407438" class="show-url">‘Technical Reference’ section</a>.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">setwd</span><span class="p">(</span><span class="s2">"YOURFILEPATH"</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <p>Then use the function <code class="language-r highlighter-rouge"><span class="n">readxl</span></code> (part of the <code class="language-r highlighter-rouge"><span class="n">tidyverse</span></code> suite of packages) to import the datafile. Before importing the file into R, open the file in Excel to see how the data is organized in the spreadsheet, and note that:</p>
  <ul>
    <li>There is a heading that we don’t need, followed by a blank row.</li>
    <li>The data we need starts on row three.</li>
  </ul>
  <div class="language-r print-wrap-words highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Load the library</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">readxl</span><span class="p">)</span><span class="w">

</span><span class="c1"># Excel filename</span><span class="w">
</span><span class="n">UN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read_excel</span><span class="p">(</span><span class="s2">"Download-GDPconstant-USD-countries.xls"</span><span class="p">,</span><span class="w">
  </span><span class="c1"># Sheet name</span><span class="w">
  </span><span class="n">sheet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Download-GDPconstant-USD-countr"</span><span class="p">,</span><span class="w"> 
  </span><span class="c1"># Number of rows to skip</span><span class="w">
  </span><span class="n">skip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">

</span><span class="n">head</span><span class="p">(</span><span class="n">UN</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## # A tibble: 6 x 50</span><span class="w">
</span><span class="c1">##   CountryID Country  IndicatorName      `1970` `1971` `1972` `1973` `1974`</span><span class="w">
</span><span class="c1">##       &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;               &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span><span class="w">
</span><span class="c1">## 1         4 Afghani~ Final consumption~ 5.56e9 5.33e9 5.20e9 5.75e9 6.15e9</span><span class="w">
</span><span class="c1">## 2         4 Afghani~ Household consump~ 5.07e9 4.84e9 4.70e9 5.21e9 5.59e9</span><span class="w">
</span><span class="c1">## 3         4 Afghani~ General governmen~ 3.72e8 3.82e8 4.02e8 4.21e8 4.31e8</span><span class="w">
</span><span class="c1">## 4         4 Afghani~ Gross capital for~ 9.85e8 1.05e9 9.19e8 9.19e8 1.18e9</span><span class="w">
</span><span class="c1">## 5         4 Afghani~ Gross fixed capit~ 9.85e8 1.05e9 9.19e8 9.19e8 1.18e9</span><span class="w">
</span><span class="c1">## 6         4 Afghani~ Exports of goods ~ 1.12e8 1.45e8 1.73e8 2.18e8 3.00e8</span><span class="w">
</span><span class="c1">## # ... with 42 more variables: `1975` &lt;dbl&gt;, `1976` &lt;dbl&gt;, `1977` &lt;dbl&gt;,</span><span class="w">
</span><span class="c1">## #   `1978` &lt;dbl&gt;, `1979` &lt;dbl&gt;, `1980` &lt;dbl&gt;, `1981` &lt;dbl&gt;, `1982` &lt;dbl&gt;,</span><span class="w">
</span><span class="c1">## #   `1983` &lt;dbl&gt;, `1984` &lt;dbl&gt;, `1985` &lt;dbl&gt;, `1986` &lt;dbl&gt;, `1987` &lt;dbl&gt;,</span><span class="w">
</span><span class="c1">## #   `1988` &lt;dbl&gt;, `1989` &lt;dbl&gt;, `1990` &lt;dbl&gt;, `1991` &lt;dbl&gt;, `1992` &lt;dbl&gt;,</span><span class="w">
</span><span class="c1">## #   `1993` &lt;dbl&gt;, `1994` &lt;dbl&gt;, `1995` &lt;dbl&gt;, `1996` &lt;dbl&gt;, `1997` &lt;dbl&gt;,</span><span class="w">
</span><span class="c1">## #   `1998` &lt;dbl&gt;, `1999` &lt;dbl&gt;, `2000` &lt;dbl&gt;, `2001` &lt;dbl&gt;, `2002` &lt;dbl&gt;,</span><span class="w">
</span><span class="c1">## #   `2003` &lt;dbl&gt;, `2004` &lt;dbl&gt;, `2005` &lt;dbl&gt;, `2006` &lt;dbl&gt;, `2007` &lt;dbl&gt;,</span><span class="w">
</span><span class="c1">## #   `2008` &lt;dbl&gt;, `2009` &lt;dbl&gt;, `2010` &lt;dbl&gt;, `2011` &lt;dbl&gt;, `2012` &lt;dbl&gt;,</span><span class="w">
</span><span class="c1">## #   `2013` &lt;dbl&gt;, `2014` &lt;dbl&gt;, `2015` &lt;dbl&gt;, `2016` &lt;dbl&gt;</span><span class="w">
</span></code></pre></div>  </div>
</blockquote>
<ol class="text-question">
  <li>You can see from the tab ‘Download-GDPconstant-USD-countr’ that some countries have missing data for some of the years. Data may be missing due to political reasons (for example, countries formed after 1970) or data availability issues.</li>
</ol>
<ul class="text-sub-question">
  <li>Make and fill a frequency table similar to Figure 4.1, showing the number of years that data is available for each country in the category ‘Final consumption expenditure’.</li>
</ul>
<ul class="text-sub-question">
  <li>How many countries have data for the entire period (1970 to the latest year available)? Do you think that missing data is a serious issue in this case?</li>
</ul>
<div class="figure fixed figure-no-source" id="figure-4-1">
<div class="figure-body">
<div class="figure-md">
<table>
  <thead>
    <tr>
      <th>Country</th>
      <th>Number of years of GDP data</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>
</div>
<p class="description">
Number of years of GDP data available for each country.
</p>
<p class="caption">
<span class="figure-reference">Figure 4.1 </span>
Number of years of GDP data available for each country.
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
<p><span> </span></p>
<blockquote class="expandable-box">
  <h3 id="r-walk-through-42-making-a-frequency-table"><strong>R walk-through 4.2</strong> Making a frequency table</h3>
  <p>We want to create a table showing how many years of <code class="language-r highlighter-rouge"><span class="n">Final</span><span class="w"> </span><span class="n">consumption</span><span class="w"> </span><span class="n">expenditure</span></code> data are available for each country.</p>
  <p>Looking at the dataset’s current format, you can see that countries and indicators (for example, <code class="language-r highlighter-rouge"><span class="n">Afghanistan</span></code> and <code class="language-r highlighter-rouge"><span class="n">Final</span><span class="w"> </span><span class="n">consumption</span><span class="w"> </span><span class="n">expenditure</span></code>) are row variables, while year is the column variable. This data is organized in ‘wide’ format (each individual’s information is in a single row).</p>
  <p>For many data operations and making charts it is more convenient to have indicators as column variables, so we would like <code class="language-r highlighter-rouge"><span class="n">Final</span><span class="w"> </span><span class="n">consumption</span><span class="w"> </span><span class="n">expenditure</span></code> to be a column variable, and year to be the row variable. Each observation would represent the value of an indicator for a particular country and year. This data is organized in ‘long’ format (each individual’s information is in multiple rows).</p>
  <p>To change data from wide to long format, we use the <code class="language-r highlighter-rouge"><span class="n">melt</span></code> command from the package <code class="language-r highlighter-rouge"><span class="n">reshape2</span></code>. The <code class="language-r highlighter-rouge"><span class="n">melt</span></code> command is very powerful and useful, as you will find many large datasets are in wide format. In this case, it takes the data in Column 4 to the last column (these columns indicate the years) and uses them to create two new columns: one column (<code class="language-r highlighter-rouge"><span class="n">variable</span></code>) contains the name of the row variable (the year) and the other column (<code class="language-r highlighter-rouge"><span class="n">value</span></code>) contains the associated value. Compare <code class="language-r highlighter-rouge"><span class="n">long_UN</span></code> to <code class="language-r highlighter-rouge"><span class="n">wide_UN</span></code> to understand how the <code class="language-r highlighter-rouge"><span class="n">melt</span></code> command works. To learn more about organizing data in R, see the <a href="https://tinyco.re/3225513" class="show-url">R for Data Science website</a>.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">reshape2</span><span class="p">)</span><span class="w">

</span><span class="n">wide_UN</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">UN</span><span class="w">
</span><span class="c1"># Keep all data except for column 1 (CountryID)</span><span class="w">
</span><span class="n">wide_UN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wide_UN</span><span class="p">[,</span><span class="w"> </span><span class="m">-1</span><span class="p">]</span><span class="w">

</span><span class="c1"># id.vars are the names of the column variables.</span><span class="w">
</span><span class="n">long_UN</span><span class="w"> </span><span class="o">=</span><span class="w"> 
  </span><span class="n">melt</span><span class="p">(</span><span class="n">wide_UN</span><span class="p">,</span><span class="w"> </span><span class="n">id.vars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Country"</span><span class="p">,</span><span class="w"> </span><span class="s2">"IndicatorName"</span><span class="p">),</span><span class="w">
  </span><span class="n">value.vars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="o">:</span><span class="n">ncol</span><span class="p">(</span><span class="n">UN</span><span class="p">))</span><span class="w">

</span><span class="n">head</span><span class="p">(</span><span class="n">long_UN</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##       Country</span><span class="w">
</span><span class="c1">## 1 Afghanistan</span><span class="w">
</span><span class="c1">## 2 Afghanistan</span><span class="w">
</span><span class="c1">## 3 Afghanistan</span><span class="w">
</span><span class="c1">## 4 Afghanistan</span><span class="w">
</span><span class="c1">## 5 Afghanistan</span><span class="w">
</span><span class="c1">## 6 Afghanistan</span><span class="w">
</span><span class="c1">##   IndicatorName</span><span class="w">
</span><span class="c1">## 1 Final consumption expenditure</span><span class="w">
</span><span class="c1">## 2 Household consumption expenditure (including Non-profit institutions serving households)</span><span class="w">
</span><span class="c1">## 3 General government final consumption expenditure</span><span class="w">
</span><span class="c1">## 4 Gross capital formation</span><span class="w">
</span><span class="c1">## 5 Gross fixed capital formation (including Acquisitions less disposals of valuables)</span><span class="w">
</span><span class="c1">## 6 Exports of goods and services</span><span class="w">
</span><span class="c1">##   variable      value</span><span class="w">
</span><span class="c1">## 1     1970 5559066266</span><span class="w">
</span><span class="c1">## 2     1970 5065088737</span><span class="w">
</span><span class="c1">## 3     1970  372478456</span><span class="w">
</span><span class="c1">## 4     1970  984580895</span><span class="w">
</span><span class="c1">## 5     1970  984580895</span><span class="w">
</span><span class="c1">## 6     1970  112390156</span><span class="w">
</span></code></pre></div>  </div>
  <p>Our new ‘long’ format dataset is called <code class="language-r highlighter-rouge"><span class="n">long_UN</span></code>. During the reshaping process, a new variable called <code class="language-r highlighter-rouge"><span class="n">variable</span></code> was created which contains years. We will use the <code class="language-r highlighter-rouge"><span class="n">names</span></code> function to rename it as <code class="language-r highlighter-rouge"><span class="n">Year</span></code>.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">names</span><span class="p">(</span><span class="n">long_UN</span><span class="p">)[</span><span class="nf">names</span><span class="p">(</span><span class="n">long_UN</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"variable"</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Year"</span><span class="w">
</span></code></pre></div>  </div>
  <p class="hyphens-manual">To create the required table, we only need <code class="language-r highlighter-rouge"><span class="n">Final</span><span class="w"> </span><span class="n">consumption</span><span class="w"> </span><span class="n">expenditure</span></code> of each country, which we extract using the <code class="language-r highlighter-rouge"><span class="n">subset</span></code> function.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cons</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">long_UN</span><span class="p">,</span><span class="w">
  </span><span class="n">IndicatorName</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Final consumption expenditure"</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <p class="tighten-10">Now we create the table showing the number of missing years by country, using the piping operator (<code class="language-r highlighter-rouge"><span class="o">%&gt;%</span></code>) from the <code class="language-r highlighter-rouge"><span class="n">tidyverse</span></code> package. This operator allows us to perform multiple functions, one after another.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Use the pipe operator (%&gt;%) from the tidyverse package.</span><span class="w">
</span><span class="c1"># This means: use the result of the current line</span><span class="w">
</span><span class="c1"># as the first argument in the next line's function.</span><span class="w">

</span><span class="n">missing_by_country</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cons</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">Country</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarize</span><span class="p">(</span><span class="n">available_years</span><span class="o">=</span><span class="nf">sum</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">value</span><span class="p">)))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">print</span><span class="p">()</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## # A tibble: 220 x 2</span><span class="w">
</span><span class="c1">##    Country             available_years</span><span class="w">
</span><span class="c1">##    &lt;chr&gt;                         &lt;int&gt;</span><span class="w">
</span><span class="c1">##  1 Afghanistan                      47</span><span class="w">
</span><span class="c1">##  2 Albania                          47</span><span class="w">
</span><span class="c1">##  3 Algeria                          47</span><span class="w">
</span><span class="c1">##  4 Andorra                          47</span><span class="w">
</span><span class="c1">##  5 Angola                           47</span><span class="w">
</span><span class="c1">##  6 Anguilla                         47</span><span class="w">
</span><span class="c1">##  7 Antigua and Barbuda              47</span><span class="w">
</span><span class="c1">##  8 Argentina                        47</span><span class="w">
</span><span class="c1">##  9 Armenia                          27</span><span class="w">
</span><span class="c1">## 10 Aruba                            47</span><span class="w">
</span><span class="c1">## # ... with 210 more rows</span><span class="w">
</span></code></pre></div>  </div>
  <p>Translating the code in words: Take the variable <code class="language-r highlighter-rouge"><span class="n">cons</span></code> (<code class="language-r highlighter-rouge"><span class="n">cons</span><span class="w"> </span><span class="o">%&gt;%</span></code>) and group the observations by country (<code class="language-r highlighter-rouge"><span class="n">group_by</span><span class="p">(</span><span class="n">Country</span><span class="p">)</span></code>), then take this result (<code class="language-r highlighter-rouge"><span class="o">%&gt;%</span></code>) and produce a table (<code class="language-r highlighter-rouge"><span class="n">summarize</span><span class="p">(</span><span class="n">...</span><span class="p">)</span></code>) that shows the variable <code class="language-r highlighter-rouge"><span class="n">available_years</span></code> (which is the sum (<code class="language-r highlighter-rouge"><span class="nf">sum</span><span class="p">(</span><span class="n">...</span><span class="p">)</span></code>) of the variable <code class="language-r highlighter-rouge"><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>).</p>
  <p>To understand what <code class="language-r highlighter-rouge"><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code> means, recall that <code class="language-r highlighter-rouge"><span class="n">value</span></code> contains the numerical values for the variable of interest. When an observation is missing, it is recorded as <code class="language-r highlighter-rouge"><span class="kc">NA</span></code>. The function <code class="language-r highlighter-rouge"><span class="nf">is.na</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code> will return a value of 1 (or <code class="language-r highlighter-rouge"><span class="kc">TRUE</span></code>) if the value is missing and 0 (or <code class="language-r highlighter-rouge"><span class="kc">FALSE</span></code>) otherwise. We add a <code class="language-r highlighter-rouge"><span class="o">!</span></code> in front since we want the function to return a 1 if the observation exists and a 0 otherwise. For R, <code class="language-r highlighter-rouge"><span class="o">!</span></code> means ‘not’ so we get a 1 if the particular observation is not missing.</p>
  <p>Now we can establish how many of the 220 countries in the dataset have complete information. A dataset is complete if it has the maximum number of available observations (<code class="language-r highlighter-rouge"><span class="nf">max</span><span class="p">(</span><span class="n">missing_by_country</span><span class="o">$</span><span class="n">available_years</span><span class="p">)</span></code>).</p>
  <div class="language-r print-wrap-words highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">sum</span><span class="p">(</span><span class="n">missing_by_country</span><span class="o">$</span><span class="n">available_years</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="w">
  </span><span class="n">missing_by_country</span><span class="o">$</span><span class="n">available_years</span><span class="p">))</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## [1] 179</span><span class="w">
</span></code></pre></div>  </div>
</blockquote>
<p class="sidenote">If you add up the data on the right-hand side of this equation, you may find that it does not add up to the reported GDP value. The UN notes this discrepancy in Section J, item 17 of the <a href="https://tinyco.re/2420352" class="show-url">‘Methodology for the national accounts’</a>: ‘The sums of com­ponents in the tables may not necessarily add up to totals shown because of rounding’.</p>
<p>There are three different ways in which countries calculate GDP for their national accounts, but we will focus on the expenditure approach, which calculates gross domestic product (GDP) as:</p>
<script type="math/tex; mode=display">% <![CDATA[
\begin{align*}
\text{GDP} &= \text{Household consumption expenditure} \\
&+ \text{General government final consumption expenditure} \\
&+ \text{Gross capital formation} \\
&+ \text{(Exports of goods and services − imports of goods and services)}
\end{align*} %]]></script>
<p>Gross capital formation refers to the creation of fixed assets in the economy (such as the construction of buildings, roads, and new machinery) and changes in inventories (stocks of goods held by firms).</p>
<ol class="text-question">
  <li>Rather than looking at exports and imports separately, we usually look at the difference between them (exports minus imports), also known as net exports. Choose three countries that have GDP data over the entire period (1970 to the latest year available). For each country, create a variable that shows the values of net exports in each year.</li>
</ol>
<blockquote class="expandable-box">
  <h3 id="r-walk-through-43-creating-new-variables"><strong>R walk-through 4.3</strong> Creating new variables</h3>
  <p>We will use Brazil, the US, and China as examples.</p>
  <p>Before we select these three countries, we will calculate the net exports (exports minus imports) for all countries, as we need that information in R walk-through 4.4. We will also shorten the names of the variables we need, to make the code easier to read.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Shorten the names of the variables we need</span><span class="w">
</span><span class="c1"># When a string straddles two lines of code</span><span class="w">
</span><span class="c1"># we need to wrap it into the 'strwrap' function</span><span class="w">

</span><span class="n">long_UN</span><span class="o">$</span><span class="n">IndicatorName</span><span class="p">[</span><span class="n">long_UN</span><span class="o">$</span><span class="n">IndicatorName</span><span class="w"> </span><span class="o">==</span><span class="w"> 
  </span><span class="n">strwrap</span><span class="p">(</span><span class="s2">"Household consumption expenditure (including 
    Non-profit institutions serving households)"</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> 
  </span><span class="s2">"HH.Expenditure"</span><span class="w">

</span><span class="n">long_UN</span><span class="o">$</span><span class="n">IndicatorName</span><span class="p">[</span><span class="n">long_UN</span><span class="o">$</span><span class="n">IndicatorName</span><span class="w"> </span><span class="o">==</span><span class="w"> 
  </span><span class="s2">"General government final consumption expenditure"</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> 
  </span><span class="s2">"Gov.Expenditure"</span><span class="w">

</span><span class="n">long_UN</span><span class="o">$</span><span class="n">IndicatorName</span><span class="p">[</span><span class="n">long_UN</span><span class="o">$</span><span class="n">IndicatorName</span><span class="w"> </span><span class="o">==</span><span class="w"> 
  </span><span class="s2">"Final consumption expenditure"</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="s2">"Final.Expenditure"</span><span class="w">

</span><span class="n">long_UN</span><span class="o">$</span><span class="n">IndicatorName</span><span class="p">[</span><span class="n">long_UN</span><span class="o">$</span><span class="n">IndicatorName</span><span class="w"> </span><span class="o">==</span><span class="w"> 
  </span><span class="s2">"Gross capital formation"</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="s2">"Capital"</span><span class="w">

</span><span class="n">long_UN</span><span class="o">$</span><span class="n">IndicatorName</span><span class="p">[</span><span class="n">long_UN</span><span class="o">$</span><span class="n">IndicatorName</span><span class="w"> </span><span class="o">==</span><span class="w"> 
  </span><span class="s2">"Imports of goods and services"</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="s2">"Imports"</span><span class="w">

</span><span class="n">long_UN</span><span class="o">$</span><span class="n">IndicatorName</span><span class="p">[</span><span class="n">long_UN</span><span class="o">$</span><span class="n">IndicatorName</span><span class="w"> </span><span class="o">==</span><span class="w"> 
  </span><span class="s2">"Exports of goods and services"</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="s2">"Exports"</span><span class="w">
</span></code></pre></div>  </div>
  <p><code class="language-r highlighter-rouge"><span class="n">long_UN</span></code> still has several rows for a particular country and year (one for each indicator). We will reshape this data using the <code class="language-r highlighter-rouge"><span class="n">dcast</span></code> function to ensure that we have only one row per country and per year. We then add a new column called <code class="language-r highlighter-rouge"><span class="n">Net.Exports</span></code> containing the calculated net exports.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># We need to cast (reshape) the long_UN data to a dataframe</span><span class="w">
</span><span class="c1"># We use the dcast function (used for dataframes)</span><span class="w">
</span><span class="n">table_UN</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dcast</span><span class="p">(</span><span class="n">long_UN</span><span class="p">,</span><span class="w"> </span><span class="n">Country</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Year</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">IndicatorName</span><span class="p">)</span><span class="w">

</span><span class="c1"># Add a new column for net exports (= exports – imports)</span><span class="w">
</span><span class="n">table_UN</span><span class="o">$</span><span class="n">Net.Exports</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> 
  </span><span class="n">table_UN</span><span class="p">[,</span><span class="w"> </span><span class="s2">"Exports"</span><span class="p">]</span><span class="o">-</span><span class="n">table_UN</span><span class="p">[,</span><span class="w"> </span><span class="s2">"Imports"</span><span class="p">]</span><span class="w">
</span></code></pre></div>  </div>
  <p>Let us select our three chosen countries to check that we calculated net exports correctly.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sel_countries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Brazil"</span><span class="p">,</span><span class="w"> </span><span class="s2">"United States"</span><span class="p">,</span><span class="w"> </span><span class="s2">"China"</span><span class="p">)</span><span class="w">

</span><span class="c1"># Using our long format dataset, we get imports, exports, </span><span class="w">
</span><span class="c1"># and year for these countries.</span><span class="w">
</span><span class="n">sel_UN1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">table_UN</span><span class="p">,</span><span class="w"> 
  </span><span class="n">subset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Country</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="n">sel_countries</span><span class="p">),</span><span class="w"> 
  </span><span class="n">select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Country"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Year"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Exports"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Imports"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Net.Exports"</span><span class="p">))</span><span class="w">

</span><span class="n">head</span><span class="p">(</span><span class="n">sel_UN1</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##      Country Year     Exports     Imports  Net.Exports</span><span class="w">
</span><span class="c1">## 1223  Brazil 1970 12337240060 20187929130  -7850689070</span><span class="w">
</span><span class="c1">## 1224  Brazil 1971 13016975734 24162976191 -11146000457</span><span class="w">
</span><span class="c1">## 1225  Brazil 1972 16162334455 29025977711 -12863643256</span><span class="w">
</span><span class="c1">## 1226  Brazil 1973 18466228366 34950588132 -16484359766</span><span class="w">
</span><span class="c1">## 1227  Brazil 1974 18897150611 44821362355 -25924211744</span><span class="w">
</span><span class="c1">## 1228  Brazil 1975 21084064715 42838470795 -21754406080</span><span class="w">
</span></code></pre></div>  </div>
</blockquote>
<p>Now we will create charts to show the GDP components in order to look for general patterns over time and make comparisons between countries.</p>
<ol class="text-question">
  <li>Evaluate the components over time, for two countries of your choice.</li>
</ol>
<ul class="text-sub-question">
  <li>Create a new row for each of the four components of GDP (Household consumption expenditure, General government final consumption expenditure, Gross capital formation, Net exports). To make the charts easier to read, convert the values into billions (for example, 4.38 billion instead of 4,378,772,008). Round your values to two decimal places.</li>
</ul>
<ul class="text-sub-question">
  <li>Plot a separate line chart for each country, showing the value of the four components of GDP on the vertical axis and time (the years 1970–Present) on the horizontal. (Use more than one line chart per country if necessary, to show the data more clearly). Name each component in the chart legend appropriately.</li>
</ul>
<ul class="text-sub-question">
  <li>Which of the components would you expect to move together (increasing or decreasing together) or move in opposite directions, and why? Using your charts from Question 3(<em>a</em>), describe any patterns you find in the relationship between the components. Does the data support your hypothesis about the behaviour of the components?</li>
</ul>
<ul class="text-sub-question">
  <li>For each country, describe any patterns you find in the movement of components over time. What factors could explain the patterns that you find within countries, and any differences between countries (for example, economic or political events)? You may find it helpful to research the history of the countries you have chosen.</li>
</ul>
<ul class="text-sub-question">
  <li><em>Extension:</em> For one country, add data labels to your chart to indicate the relevant events that happened in that year.</li>
</ul>
<blockquote class="expandable-box">
  <h3 id="r-walk-through-44-plotting-and-annotating-time-series-data"><strong>R walk-through 4.4</strong> Plotting and annotating time series data</h3>
  <h4 class="add-1" id="extract-the-relevant-data">Extract the relevant data</h4>
  <p>We will work with the <code class="language-r highlighter-rouge"><span class="n">long_UN</span></code> dataset, as the long format is well suited to produce charts with the <code class="language-r highlighter-rouge"><span class="n">ggplot</span></code> package. In this example, we use the US and China (saved as the dataset <code class="language-r highlighter-rouge"><span class="n">comp</span></code>).</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Select our chosen countries</span><span class="w">
</span><span class="n">comp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">long_UN</span><span class="p">,</span><span class="w"> 
  </span><span class="n">Country</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"United States"</span><span class="p">,</span><span class="w"> </span><span class="s2">"China"</span><span class="p">))</span><span class="w">

</span><span class="c1"># value in billion of USD</span><span class="w">
</span><span class="n">comp</span><span class="o">$</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">comp</span><span class="o">$</span><span class="n">value</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">1e9</span><span class="w">

</span><span class="n">comp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">comp</span><span class="p">,</span><span class="w"> 
  </span><span class="n">select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Country"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Year"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"IndicatorName"</span><span class="p">,</span><span class="w"> </span><span class="s2">"value"</span><span class="p">),</span><span class="w">
  </span><span class="n">subset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IndicatorName</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Gov.Expenditure"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"HH.Expenditure"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Capital"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Imports"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Exports"</span><span class="p">))</span><span class="w">
</span></code></pre></div>  </div>
  <h4 id="plot-a-line-chart">Plot a line chart</h4>
  <p>We can now plot this data using the <code class="language-r highlighter-rouge"><span class="n">ggplot</span></code> library.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">

</span><span class="c1"># ggplot allows us to build a chart step-by-step.</span><span class="w">
</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">subset</span><span class="p">(</span><span class="n">comp</span><span class="p">,</span><span class="w"> </span><span class="n">Country</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"United States"</span><span class="p">),</span><span class="w">
  </span><span class="c1"># Base chart, defining x (horizontal) and y (vertical) </span><span class="w">
  </span><span class="c1"># axis variables</span><span class="w">
  </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Year</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">))</span><span class="w">

</span><span class="c1"># Specify a line chart, with a different colour for each </span><span class="w">
</span><span class="c1"># indicator name and line size = 1</span><span class="w">
</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_line</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IndicatorName</span><span class="p">,</span><span class="w"> 
  </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IndicatorName</span><span class="p">),</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">

</span><span class="c1"># Display the chart</span><span class="w">
</span><span class="n">pl</span><span class="w">
</span></code></pre></div>  </div>
  <div class="figure figure-no-source" id="figure-4-2">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/r-figure-04-02.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/r-figure-04-02.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-04-02-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-02-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-02-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-02.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="The US’s GDP components (expenditure approach).
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/r-figure-04-02.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-04-02-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-02-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-02-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-02.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="The US’s GDP components (expenditure approach).
" class="" />
        </a>
</div>
<p class="description">
The US’s GDP components (expenditure approach).
</p>
<p class="caption">
<span class="figure-reference">Figure 4.2 </span>
The US’s GDP components (expenditure approach).
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
  <p>There are plenty of problems with this chart:</p>
  <ul>
    <li>we cannot read the horizontal axis, because it labels every year</li>
    <li>the vertical axis label is uninformative</li>
    <li>there is no chart title</li>
    <li>the grey (default) background makes the chart difficult to read</li>
    <li>the legend is uninformative.</li>
  </ul>
  <p>To improve this chart, we add features to the already existing figure <code class="language-r highlighter-rouge"><span class="n">pl</span></code>.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">scale_x_discrete</span><span class="p">(</span><span class="n">breaks</span><span class="o">=</span><span class="n">seq</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span><span class="w"> </span><span class="m">2016</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">))</span><span class="w">
</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">scale_y_continuous</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"Billion US$"</span><span class="p">)</span><span class="w">
</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"GDP components over time"</span><span class="p">)</span><span class="w">

</span><span class="c1"># Change the legend title and labels</span><span class="w">
</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">scale_colour_discrete</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Components of GDP"</span><span class="p">,</span><span class="w">
  </span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Gross capital formation"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Exports"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Government expenditure"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Household expenditure"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Imports"</span><span class="p">))</span><span class="w"> 

</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">theme_bw</span><span class="p">()</span><span class="w">

</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">annotate</span><span class="p">(</span><span class="s2">"text"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">37</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">850</span><span class="p">,</span><span class="w">
  </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Great Recession"</span><span class="p">)</span><span class="w">

</span><span class="n">pl</span><span class="w">
</span></code></pre></div>  </div>
  <div class="figure figure-no-source" id="figure-4-3">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/r-figure-04-03.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/r-figure-04-03.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-04-03-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-03-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-03-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-03.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="The US’s GDP components (expenditure approach), amended chart.
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/r-figure-04-03.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-04-03-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-03-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-03-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-03.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="The US’s GDP components (expenditure approach), amended chart.
" class="" />
        </a>
</div>
<p class="description">
The US’s GDP components (expenditure approach), amended chart.
</p>
<p class="caption">
<span class="figure-reference">Figure 4.3 </span>
The US’s GDP components (expenditure approach), amended chart.
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
  <p>We can make a chart for more than one country simultaneously by repeating the code above, but without subsetting the data:</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Repeat all steps without subsetting the data</span><span class="w">

</span><span class="c1"># Base line chart</span><span class="w">
</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">comp</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Year</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> 
  </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IndicatorName</span><span class="p">))</span><span class="w">
</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_line</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">IndicatorName</span><span class="p">),</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">
</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">scale_x_discrete</span><span class="p">(</span><span class="w">
  </span><span class="n">breaks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">seq</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span><span class="w"> </span><span class="m">2016</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">))</span><span class="w">
</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">scale_y_continuous</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Billion US$"</span><span class="p">)</span><span class="w">
</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"GDP components over time"</span><span class="p">)</span><span class="w">
</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">scale_colour_discrete</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Component"</span><span class="p">)</span><span class="w">   
</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">theme_bw</span><span class="p">()</span><span class="w">

</span><span class="c1"># Make a separate chart for each country</span><span class="w">
</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">facet_wrap</span><span class="p">(</span><span class="o">~</span><span class="n">Country</span><span class="p">)</span><span class="w">
</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">scale_colour_discrete</span><span class="p">(</span><span class="w">
  </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Components of GDP"</span><span class="p">,</span><span class="w">   
  </span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Gross capital formation"</span><span class="p">,</span><span class="w">  
    </span><span class="s2">"Exports"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Government expenditure"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Household expenditure"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Imports"</span><span class="p">))</span><span class="w">
</span><span class="n">pl</span><span class="w">
</span></code></pre></div>  </div>
  <div class="figure figure-no-source" id="figure-4-4">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/r-figure-04-04.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/r-figure-04-04.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-04-04-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-04-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-04-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-04.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="GDP components over time (China and the US).
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/r-figure-04-04.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-04-04-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-04-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-04-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-04.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="GDP components over time (China and the US).
" class="" />
        </a>
</div>
<p class="description">
GDP components over time (China and the US).
</p>
<p class="caption">
<span class="figure-reference">Figure 4.4 </span>
GDP components over time (China and the US).
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
</blockquote>
<ol class="text-question">
  <li>Another way to visualize the GDP data is to look at each component as a proportion of total GDP. Use the same countries that you chose for Question 3.</li>
</ol>
<ul class="text-sub-question">
  <li>For each country used in Question 3, create a new column showing the proportion of each component of total GDP (in other words, as a value ranging from 0 to 1). (<em>Hint:</em> to calculate the proportion of a component, divide the value of that component by the sum of all four components.)</li>
</ul>
<ul class="text-sub-question">
  <li>Plot a separate line chart for each country, showing the proportion of the component of GDP on the vertical axis and time (the years 1970 to the latest year available) on the horizontal axis.</li>
</ul>
<ul class="text-sub-question">
  <li>Describe any patterns in the proportion of spending over time for each country, and compare these patterns across countries.</li>
</ul>
<ul class="text-sub-question tighten-15">
  <li>Compared to the charts in Question 3, what are some advantages of this method for making comparisons over time and between countries?</li>
</ul>
<blockquote class="expandable-box">
  <h3 id="r-walk-through-45-calculating-new-variables-and-plotting-time-series-data"><strong>R walk-through 4.5</strong> Calculating new variables and plotting time series data</h3>
  <h4 class="add-1" id="calculate-proportion-of-total-gdp">Calculate proportion of total GDP</h4>
  <p class="tighten-15">We will use the <code class="language-r highlighter-rouge"><span class="n">comp</span></code> dataset created in R walk-through 4.4. First we will calculate net exports, as that contributes to GDP. As the data is currently in long format, we will reshape the data into wide format so that the variables we need are in separate columns instead of separate rows (using the <code class="language-r highlighter-rouge"><span class="n">dcast</span></code> function, as in R walk-through 4.3), calculate net exports, then transform the data back into long format using the <code class="language-r highlighter-rouge"><span class="n">melt</span></code> function.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Reshape the data to wide format (indicators in columns)</span><span class="w">
</span><span class="n">comp_wide</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dcast</span><span class="p">(</span><span class="n">comp</span><span class="p">,</span><span class="w"> </span><span class="n">Country</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Year</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">IndicatorName</span><span class="p">)</span><span class="w">

</span><span class="n">head</span><span class="p">(</span><span class="n">comp_wide</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##   Country Year  Capital   Exports Gov.Expenditure HH.Expenditure   Imports</span><span class="w">
</span><span class="c1">## 1   China 1970 67.58221  5.305242        19.30034       107.8411  6.119649</span><span class="w">
</span><span class="c1">## 2   China 1971 73.79977  6.318662        22.63929       112.3586  6.094361</span><span class="w">
</span><span class="c1">## 3   China 1972 70.62638  7.740001        23.77126       118.3906  7.510857</span><span class="w">
</span><span class="c1">## 4   China 1973 80.79658 10.810644        24.34177       126.7546 11.540975</span><span class="w">
</span><span class="c1">## 5   China 1974 83.38207 12.856408        26.14306       129.3434 16.041397</span><span class="w">
</span><span class="c1">## 6   China 1975 93.47130 13.309628        27.29335       134.5575 15.859461</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Add the new column for net exports = exports – imports</span><span class="w">
</span><span class="n">comp_wide</span><span class="o">$</span><span class="n">Net.Exports</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> 
  </span><span class="n">comp_wide</span><span class="p">[,</span><span class="w"> </span><span class="s2">"Exports"</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">comp_wide</span><span class="p">[,</span><span class="w"> </span><span class="s2">"Imports"</span><span class="p">]</span><span class="w">

</span><span class="n">head</span><span class="p">(</span><span class="n">comp_wide</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##   Country Year  Capital   Exports Gov.Expenditure HH.Expenditure   Imports</span><span class="w">
</span><span class="c1">## 1   China 1970 67.58221  5.305242        19.30034       107.8411  6.119649</span><span class="w">
</span><span class="c1">## 2   China 1971 73.79977  6.318662        22.63929       112.3586  6.094361</span><span class="w">
</span><span class="c1">## 3   China 1972 70.62638  7.740001        23.77126       118.3906  7.510857</span><span class="w">
</span><span class="c1">## 4   China 1973 80.79658 10.810644        24.34177       126.7546 11.540975</span><span class="w">
</span><span class="c1">## 5   China 1974 83.38207 12.856408        26.14306       129.3434 16.041397</span><span class="w">
</span><span class="c1">## 6   China 1975 93.47130 13.309628        27.29335       134.5575 15.859461</span><span class="w">
</span><span class="c1">##   Net.Exports</span><span class="w">
</span><span class="c1">## 1  -0.8144069</span><span class="w">
</span><span class="c1">## 2   0.2243011</span><span class="w">
</span><span class="c1">## 3   0.2291447</span><span class="w">
</span><span class="c1">## 4  -0.7303314</span><span class="w">
</span><span class="c1">## 5  -3.1849891</span><span class="w">
</span><span class="c1">## 6  -2.5498330</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Return to long format with the HH.expenditure, Capital, and Net Export variables</span><span class="w">
</span><span class="n">comp2_wide</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> 
  </span><span class="n">subset</span><span class="p">(</span><span class="n">comp_wide</span><span class="p">,</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="nf">c</span><span class="p">(</span><span class="n">Exports</span><span class="p">,</span><span class="w"> </span><span class="n">Imports</span><span class="p">))</span><span class="w">

</span><span class="n">comp2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="n">melt</span><span class="p">(</span><span class="n">comp2_wide</span><span class="p">,</span><span class="w"> </span><span class="n">id.vars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Year"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Country"</span><span class="p">))</span><span class="w">
</span></code></pre></div>  </div>
  <p>Now we will create a new dataframe (<code class="language-r highlighter-rouge"><span class="n">props</span></code>) also containing the proportions for each GDP component (<code class="language-r highlighter-rouge"><span class="n">proportion</span></code>), using the piping operator to link functions together.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">props</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">comp2</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">Country</span><span class="p">,</span><span class="w"> </span><span class="n">Year</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">proportion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">value</span><span class="p">))</span><span class="w">
</span></code></pre></div>  </div>
  <p>In words, we did the following: Take the <code class="language-r highlighter-rouge"><span class="n">comp2</span></code> dataframe and create groups by country and year (for example, all indicators for China in 1970). Then create a new variable (<code class="language-r highlighter-rouge"><span class="n">mutate</span></code>) called <code class="language-r highlighter-rouge"><span class="n">proportion</span></code>, which divides the variable <code class="language-r highlighter-rouge"><span class="n">value</span></code> of an indicator by the sum of all <code class="language-r highlighter-rouge"><span class="n">value</span></code> for that group (for example, all indicators for China in 1970). The result is then saved in <code class="language-r highlighter-rouge"><span class="n">props</span></code>. Look at the <code class="language-r highlighter-rouge"><span class="n">props</span></code> dataframe to confirm that the above command has achieved the desired result.</p>
  <h4 id="plot-a-line-chart-1">Plot a line chart</h4>
  <p>Now we redo the line chart from <a href="#r-walk-through-44-plotting-and-annotating-time-series-data" class="show-page-number">R walk-through 4.4</a> using the variable <code class="language-r highlighter-rouge"><span class="n">props</span></code>.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Base line chart</span><span class="w">
</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">props</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Year</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">proportion</span><span class="p">,</span><span class="w"> 
  </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">variable</span><span class="p">))</span><span class="w">

</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_line</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">variable</span><span class="p">),</span><span class="w"> 
  </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">

</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">scale_x_discrete</span><span class="p">(</span><span class="n">breaks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">seq</span><span class="p">(</span><span class="m">1970</span><span class="p">,</span><span class="w"> </span><span class="m">2016</span><span class="p">,</span><span class="w">
  </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">))</span><span class="w">

</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"GDP component proportions over time"</span><span class="p">)</span><span class="w">

</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">theme_bw</span><span class="p">()</span><span class="w">

</span><span class="c1"># Make a separate chart for each country</span><span class="w">
</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">facet_wrap</span><span class="p">(</span><span class="o">~</span><span class="n">Country</span><span class="p">)</span><span class="w">

</span><span class="n">pl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pl</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">scale_colour_discrete</span><span class="p">(</span><span class="w">
  </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Components of GDP"</span><span class="p">,</span><span class="w">
  </span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Gross capital formation"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Government expenditure"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Household expenditure"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"Net Exports"</span><span class="p">))</span><span class="w">

</span><span class="n">pl</span><span class="w">
</span></code></pre></div>  </div>
  <dl class="definition">
<dt class="definition-term">time series data</dt><dd class="definition-description">A time series is a set of time-ordered observations of a variable taken at successive, in most cases regular, periods or points of time. <span class="definition-example">Example: The population of a particular country in the years 1990, 1991, 1992, … , 2015 is time series data.</span></dd><dt class="definition-term">cross-sectional data</dt><dd class="definition-description">Data that is collected from participants at one point in time or within a relatively short time frame. In contrast, time series data refers to data collected by following an individual (or firm, country, etc.) over a course of time. <span class="definition-example">Example: Data on degree courses taken by all the students in a particular university in 2016 is considered cross-sectional data. In contrast, data on degree courses taken by all students in a particular university from 1990 to 2016 is considered time series data.</span></dd>
</dl>
  <div class="figure figure-no-source" id="figure-4-5">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/r-figure-04-05.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/r-figure-04-05.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-04-05-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-05-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-05-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-05.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="GDP component proportions over time (China and the US).
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/r-figure-04-05.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-04-05-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-05-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-05-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-05.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="GDP component proportions over time (China and the US).
" class="" />
        </a>
</div>
<p class="description">
GDP component proportions over time (China and the US).
</p>
<p class="caption">
<span class="figure-reference">Figure 4.5 </span>
GDP component proportions over time (China and the US).
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
</blockquote>
<p>So far, we have done comparisons of <strong data-term="time series data">time series data</strong>, which is a collection of values for the same variables and subjects, taken at different points in time (for example, GDP of a particular country, measured each year). We will now make some charts using <strong data-term="cross-sectional data">cross-sectional data</strong>, which is a collection of values for the same variables for different subjects, usually taken at the same time.</p>
<ol class="text-question">
  <li>Choose three developed countries, three countries in economic transition, and three developing countries (for a list of these countries, see Tables A–C in the <a href="https://tinyco.re/1962143" class="show-url">UN country classification document</a>).</li>
</ol>
<ul class="text-sub-question">
  <li>For each country, calculate each component as a proportion of GDP for the year 2015 only.</li>
</ul>
<ul class="text-sub-question">
  <li>Now create a stacked bar chart that shows the composition of GDP in 2015 on the horizontal axis, and country on the vertical axis. Arrange the columns so that the countries in a particular category are grouped together. (See the walk-through in <a href="https://tinyco.re/9042767" class="show-url">Figure 3.8</a> of <em>Economy, Society, and Public Policy</em> for an example of what your chart should look like.)</li>
</ul>
<ul class="text-sub-question">
  <li>Describe the differences (if any) between the spending patterns of developed, economic transition, and developing countries.</li>
</ul>
<blockquote class="expandable-box">
  <h3 id="r-walk-through-46-creating-stacked-bar-charts"><strong>R walk-through 4.6</strong> Creating stacked bar charts</h3>
  <h4 class="add-1" id="calculate-proportion-of-total-gdp-1">Calculate proportion of total GDP</h4>
  <p>This walk-through uses the following countries (chosen at random):</p>
  <ul>
    <li>developed countries: Germany, Japan, United States</li>
    <li>transition countries: Albania, Russian Federation, Ukraine</li>
    <li>developing countries: Brazil, China, India.</li>
  </ul>
  <p class="loosen-10">The relevant data are still in the <code class="language-r highlighter-rouge"><span class="n">table_UN</span></code> dataframe. Before we select these countries, we first calculate the required proportions for all countries.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Calculate proportions</span><span class="w">
</span><span class="n">table_UN</span><span class="o">$</span><span class="n">p_Capital</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> 
  </span><span class="n">table_UN</span><span class="o">$</span><span class="n">Capital</span><span class="w"> </span><span class="o">/</span><span class="w"> 
  </span><span class="p">(</span><span class="n">table_UN</span><span class="o">$</span><span class="n">Capital</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">table_UN</span><span class="o">$</span><span class="n">Final.Expenditure</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">table_UN</span><span class="o">$</span><span class="n">Net.Exports</span><span class="p">)</span><span class="w">

</span><span class="n">table_UN</span><span class="o">$</span><span class="n">p_FinalExp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="n">table_UN</span><span class="o">$</span><span class="n">Final.Expenditure</span><span class="w"> </span><span class="o">/</span><span class="w"> 
  </span><span class="p">(</span><span class="n">table_UN</span><span class="o">$</span><span class="n">Capital</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">table_UN</span><span class="o">$</span><span class="n">Final.Expenditure</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">table_UN</span><span class="o">$</span><span class="n">Net.Exports</span><span class="p">)</span><span class="w">

</span><span class="n">table_UN</span><span class="o">$</span><span class="n">p_NetExports</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="n">table_UN</span><span class="o">$</span><span class="n">Net.Exports</span><span class="w"> </span><span class="o">/</span><span class="w">
  </span><span class="p">(</span><span class="n">table_UN</span><span class="o">$</span><span class="n">Capital</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">table_UN</span><span class="o">$</span><span class="n">Final.Expenditure</span><span class="w"> </span><span class="o">+</span><span class="w"> 
    </span><span class="n">table_UN</span><span class="o">$</span><span class="n">Net.Exports</span><span class="p">)</span><span class="w">

</span><span class="n">sel_countries</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> 
  </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Germany"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Japan"</span><span class="p">,</span><span class="w"> </span><span class="s2">"United States"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Albania"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Russian Federation"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Ukraine"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Brazil"</span><span class="p">,</span><span class="w"> </span><span class="s2">"China"</span><span class="p">,</span><span class="w"> </span><span class="s2">"India"</span><span class="p">)</span><span class="w">

</span><span class="c1"># Using our long format dataset, we select imports, </span><span class="w">
</span><span class="c1"># exports, and year for our chosen countries in 2015.</span><span class="w">

</span><span class="c1"># Select the columns we need</span><span class="w">
</span><span class="n">sel_2015</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> 
  </span><span class="n">subset</span><span class="p">(</span><span class="n">table_UN</span><span class="p">,</span><span class="w"> </span><span class="n">subset</span><span class="w"> </span><span class="o">=</span><span class="w">
    </span><span class="p">(</span><span class="n">Country</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="n">sel_countries</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">Year</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2015</span><span class="p">),</span><span class="w">
    </span><span class="n">select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Country"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Year"</span><span class="p">,</span><span class="w"> </span><span class="s2">"p_FinalExp"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"p_Capital"</span><span class="p">,</span><span class="w"> </span><span class="s2">"p_NetExports"</span><span class="p">))</span><span class="w">
</span></code></pre></div>  </div>
  <h4 id="plot-a-stacked-bar-chart">Plot a stacked bar chart</h4>
  <p>Now let’s create the bar chart.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Reshape the table into long format, then use ggplot</span><span class="w">
</span><span class="n">sel_2015_m</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">melt</span><span class="p">(</span><span class="n">sel_2015</span><span class="p">,</span><span class="w"> </span><span class="n">id.vars</span><span class="w"> </span><span class="o">=</span><span class="w"> 
  </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Year"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Country"</span><span class="p">))</span><span class="w">

</span><span class="n">g</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">sel_2015_m</span><span class="p">,</span><span class="w"> 
  </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Country</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">variable</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"identity"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">coord_flip</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"GDP component proportions in 2015"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_fill_discrete</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Components of GDP"</span><span class="p">,</span><span class="w">
  </span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Final expenditure"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Gross capital formation"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Net Exports"</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme_bw</span><span class="p">()</span><span class="w">

</span><span class="n">plot</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="figure figure-no-source" id="figure-4-6">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/r-figure-04-06.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/r-figure-04-06.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-04-06-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-06-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-06-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-06.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="GDP component proportions in 2015.
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/r-figure-04-06.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-04-06-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-06-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-06-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-06.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="GDP component proportions in 2015.
" class="" />
        </a>
</div>
<p class="description">
GDP component proportions in 2015.
</p>
<p class="caption">
<span class="figure-reference">Figure 4.6 </span>
GDP component proportions in 2015.
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
  <p>Note that even when a country has a trade deficit (proportion of net exports &lt; 0), the proportions will add up to 1, but the proportions of final expenditure and capital will add up to more than 1.</p>
  <p>We have not yet ordered the countries so that they form the pre-specified groups. To achieve this, we need to explicitly impose an ordering on the <code class="language-r highlighter-rouge"><span class="n">Country</span></code> variable using the <code class="language-r highlighter-rouge"><span class="n">factor</span></code> function. The countries will be ordered in the same order we used to define <code class="language-r highlighter-rouge"><span class="n">sel_countries</span></code>.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Impose the order in the sel_countries object, then use ggplot</span><span class="w">
</span><span class="n">sel_2015_m</span><span class="o">$</span><span class="n">Country</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> 
  </span><span class="n">factor</span><span class="p">(</span><span class="n">sel_2015_m</span><span class="o">$</span><span class="n">Country</span><span class="p">,</span><span class="w"> </span><span class="n">levels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sel_countries</span><span class="p">)</span><span class="w">

</span><span class="n">g</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">sel_2015_m</span><span class="p">,</span><span class="w"> 
  </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Country</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">variable</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"identity"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">coord_flip</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"GDP component proportions in 2015 (ordered)"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">scale_fill_discrete</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Components of GDP"</span><span class="p">,</span><span class="w"> 
  </span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Final expenditure"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Gross capital formation"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Net Exports"</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Final expenditure"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Gross capital formation"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Net Exports"</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme_bw</span><span class="p">()</span><span class="w">

</span><span class="n">plot</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="figure figure-no-source" id="figure-4-7">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/r-figure-04-07.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/r-figure-04-07.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-04-07-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-07-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-07-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-07.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="GDP component proportions in 2015 (ordered).
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/r-figure-04-07.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-04-07-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-07-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-07-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-07.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="GDP component proportions in 2015 (ordered).
" class="" />
        </a>
</div>
<p class="description">
GDP component proportions in 2015 (ordered).
</p>
<p class="caption">
<span class="figure-reference">Figure 4.7 </span>
GDP component proportions in 2015 (ordered).
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
</blockquote>
<ol class="text-question">
  <li>
    <p>GDP per capita is often used to indicate material wellbeing instead of GDP, because it accounts for differences in population across countries. Refer to the following articles to help you to answer the questions:</p>
    <ul>
      <li>‘<a href="https://tinyco.re/5464810" class="show-url">The Economics of Well-being’</a> in the <em>Harvard Business Review</em></li>
      <li><a href="https://tinyco.re/4358279" class="show-url">‘Statistical Insights: What does GDP per capita tell us about households’ material well-being?’</a> in the <em>OECD Insights</em>.</li>
    </ul>
  </li>
</ol>
<ul class="text-sub-question">
  <li>Discuss the usefulness and limitations of GDP per capita as a measure of material wellbeing.</li>
</ul>
<ul class="text-sub-question">
  <li>Based on the arguments in the articles, do you think GDP per capita is an appropriate measure of both material wellbeing and overall wellbeing? Why or why not?</li>
</ul>
<h2 class="page-break-before" id="part-42-the-hdi-as-a-measure-of-wellbeing">Part 4.2 The HDI as a measure of wellbeing</h2>
<blockquote class="box fixed">
  <h3 id="learning-objectives-for-this-part-1">Learning objectives for this part</h3>
  <ul>
    <li>sort data and assign ranks based on values</li>
    <li>distinguish between time series and cross sectional data, and plot appropriate charts for each type of data</li>
    <li>calculate the geometric mean and explain how it differs from the arithmetic mean</li>
    <li>construct indices using the geometric mean, and use index values to rank observations</li>
    <li>explain the difference between two measures of wellbeing (GDP per capita and the Human Development Index).</li>
  </ul>
</blockquote>
<p>In Part 4.1 we looked at GDP per capita as a measure of material wellbeing. While income has a major influence on wellbeing because it allows us to buy the goods and services we need or enjoy, it is not the only determinant of wellbeing. Many aspects of our wellbeing cannot be bought, for example, good health or having more time to spend with friends and family.</p>
<p>We are now going to look at the Human Development Index (HDI), a measure of wellbeing that includes non-material aspects, and make comparisons with GDP per capita (a measure of material wellbeing). GDP per capita is a simple index calculated as the sum of its elements, whereas the HDI is more complex. Instead of using different types of expenditure or output to measure wellbeing or living standards, the HDI consists of three dimensions associated with wellbeing:</p>
<ul>
  <li>a long and healthy life (health)</li>
  <li>knowledge (education)</li>
  <li>a decent standard of living (income).</li>
</ul>
<p>We will first learn about how the HDI is constructed, and then use this method to construct indices of wellbeing according to criteria of our choice.</p>
<p>The HDI data we will look at is from the <em>Human Development Report 2016</em> by the United Nations Development Programme (UNDP). To answer the questions below, download the data and technical notes from the report:</p>
<ul>
  <li>Go to the <a href="https://tinyco.re/2888171" class="show-url">UNDP’s website</a>.</li>
  <li>Click ‘Table 1: Human Development Index and its components’ on the left-hand side of the page. Then right-click on the ‘Download Data’ box on the top right-hand side of the page and select ‘Save Link As…’.</li>
  <li>Save the file in an easily accessible location, and make sure to give it a suitable name.</li>
  <li>The <a href="https://tinyco.re/7010252" class="show-url">‘Technical notes’</a> give a diagrammatic presentation of how the HDI is constructed from four indicators.</li>
</ul>
<ol class="text-question keep-together">
  <li>Refer to the technical notes and the spreadsheet you have downloaded. For each indicator, explain whether you think it is a good measure of the dimension, and suggest alternative indicators, if any. (For example, is GNI per capita a good measure of the dimension ‘a decent standard of living’?)</li>
</ol>
<ol class="text-question">
  <li>Figure 4.8 shows the minimum and maximum values for each indicator. Discuss whether you think these are reasonable. (You can read the justification for these values in the technical notes.)</li>
</ol>
<div class="figure fixed" id="figure-4-8">
<div class="figure-body">
<div class="figure-html">
<table>
  <tr>
    <th class="align-left">Dimension</th>
    <th class="align-left">Indicator</th>
    <th class="align-left">Minimum</th>
    <th class="align-left">Maximum</th>
  </tr>
  <tr>
    <td>Health</td>
    <td>Life expectancy (years)</td>
    <td class="align-right">20</td>
    <td class="align-right">85</td>
  </tr>
  <tr>
    <td rowspan="2">Education</td>
    <td>Expected years of schooling (years)</td>
    <td class="align-right">0</td>
    <td class="align-right">18</td>
  </tr>
  <tr>
    <td>Mean years of schooling (years)</td>
    <td class="align-right">0</td>
    <td class="align-right">15</td>
  </tr>
  <tr>
    <td>Standard of living</td>
    <td>Gross national income per capita (2011 PPP $)</td>
    <td class="align-right">100</td>
    <td class="align-right">75,000</td>
  </tr>
</table>
</div>
<p class="description">
Maximum and minimum values for each indicator in the HDI.
</p>
<p class="caption">
<span class="figure-reference">Figure 4.8 </span>
Maximum and minimum values for each indicator in the HDI.
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
<div class="figure-source">
<p class="source">
United Nations Development Programme. 2016. <a href="https://tinyco.re/7010252" class="show-url">‘Technical notes’</a> in <em>Human Development Report 2016</em>: p. 2.
</p>
</div><!--.figure-source-->
</div>
<p>We are now going to apply the method for constructing the HDI, by recalculating the HDI from its indicators. We will use the formula below, and the minimum and maximum values in the table in Figure 4.8. These are taken from page 2 of the technical notes, which you can refer to for additional details.</p>
<p>The HDI indicators are measured in different units and have different ranges, so in order to put them together into a meaningful index, we need to normalize the indicators using the following formula:</p>
<script type="math/tex; mode=display">\text{Dimension index } = \frac{\text{actual value − minimum value}}{\text{maximum value − minimum value}}</script>
<p>Doing so will give a value in between 0 and 1 (inclusive), which will allow comparison between different indicators.</p>
<ol class="text-question keep-with-next">
  <li>Refer to Figure 4.8 and calculate the dimension index for each of the dimensions:</li>
</ol>
<ul class="text-sub-question">
  <li>Using the HDI indicator data in Column E of the spreadsheet, calculate the dimension index for a long and healthy life (health).</li>
</ul>
<ul class="text-sub-question">
  <li>Using the HDI indicator data in Columns G and I of the spreadsheet, calculate the dimension index for knowledge (education). Note that the knowledge dimension index is the average of the dimension index for expected years of schooling for those entering school, and mean years of schooling for adults aged 25 or older. When calculating the index for expected years of schooling you need to restrict the values to take a maximum value of 1.</li>
</ul>
<ul class="text-sub-question keep-together">
  <li>Using the HDI indicator data in Column K of the spreadsheet, calculate the dimension index for a decent standard of living (income). Note (from the technical notes) that you should calculate the GNI index using the natural log of the values. (See the ‘Find out more’ box below for an explanation of the natural log and how to calculate it in R.)</li>
</ul>
<blockquote class="expandable-box">
  <h3 id="find-out-more-the-natural-log-what-it-means-and-how-to-calculate-it-in-r"><strong>Find out more</strong> The natural log: What it means, and how to calculate it in R</h3>
  <p>The natural log turns a linear variable into a concave variable, as shown in Figure 4.9. For any value of income on the horizontal axis, the natural log of that value on the vertical axis is smaller. At first, the difference between income and log income is not that big (for example, an income of 2 corresponds to a natural log of 0.7), but the difference becomes bigger as we move rightwards along the horizontal axis (for example, when income is 100,000, the natural log is only 11.5).</p>
  <div class="figure figure-no-source" id="figure-4-9">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/figure-04-05.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/figure-04-05.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/figure-04-05-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/figure-04-05-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/figure-04-05-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/figure-04-05.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Comparing income with the natural logarithm of income.
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/figure-04-05.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/figure-04-05-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/figure-04-05-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/figure-04-05-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/figure-04-05.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Comparing income with the natural logarithm of income.
" class="" />
        </a>
</div>
<p class="description">
Comparing income with the natural logarithm of income.
</p>
<p class="caption">
<span class="figure-reference">Figure 4.9 </span>
Comparing income with the natural logarithm of income.
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
  <p>The reason why natural logs are useful in economics is because they can represent variables that have diminishing marginal returns: an additional unit of input results in a smaller increase in the total output than did the previous unit. (If you have studied production functions, then the shape of the natural log function might look familiar.)</p>
  <p class="loosen-10 keep-together">When applied to the concept of wellbeing, the ‘input’ is income, and the ‘output’ is material wellbeing. It makes intuitive sense that a $100 increase in per capita income will have a much greater effect on wellbeing for a poor country compared to a rich country. Using the natural log of income incorporates this notion into the index we create. Conversely, the notion of diminishing marginal returns (the larger the value of the input, the smaller the contribution of an additional unit of input) is not captured by GDP per capita, which uses actual income and not its natural log. Doing so makes the assumption that a $100 increase in per capita income has the same effect on wellbeing for rich and poor countries.</p>
  <p>The <code class="language-r highlighter-rouge"><span class="n">log</span></code> function in R calculates the natural log of a value for you. To calculate the natural log of a value, <em>x</em>, type <code class="language-r highlighter-rouge"><span class="nf">log</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></code>. If you have a scientific calculator, you can check that the calculation is correct by using the <code class="language-r highlighter-rouge"><span class="n">ln</span></code> or <code class="language-r highlighter-rouge"><span class="n">log</span></code> key.</p>
  <p class="loosen-10">Now that you know about the natural log, you might want to go back to Question 3<em>(c)</em> in Part 4.1, and create a new chart using the natural log scale. The natural log is used in economics because it approximates percentage changes i.e. log(<em>x</em>) – log(<em>y</em>) is a close approximation to the percentage change between <em>x</em> and <em>y</em>. So, using the natural log scale, you will be able to ‘read off’ the relative growth rates from the slopes of the different series you have plotted. For example, a 0.01 change in the vertical axis value corresponds to a 1% change in that variable. This will allow you to compare the growth rates of the different components of GDP.</p>
</blockquote>
<dl class="definition full-width">
<dt class="definition-term">geometric mean</dt><dd class="definition-description">A summary measure calculated by multiplying <em>N</em> numbers together and then taking the <em>N</em>th root of this product. The geometric mean is useful when the items being averaged have different scoring indices or scales, because it is not sensitive to these differences, unlike the arithmetic mean. For example, if education ranged from 0 to 20 years and life expectancy ranged from 0 to 85 years, life expectancy would have a bigger influence on the HDI than education if we used the arithmetic mean rather than the geometric mean. Conversely, the geometric mean treats each criteria equally. <span class="definition-example"><span class="tighten-10">Example: Suppose we use life expectancy and mean years of schooling to construct an index of wellbeing. Country A has life expectancy of 40 years and a mean of 6 years of schooling. If we used the arithmetic mean to make an index, we would get (40 + 6)/2 = 23. If we used the geometric mean, we would get (40 × 6)<sup>1/2</sup> = 15.5.  Now suppose life expectancy doubled to 80 years. The arithmetic mean would be (80 + 6)/2 = 43, and the geometric mean would be (80 × 6)<sup>1/2</sup> = 21.9. If, instead, mean years of schooling doubled to 12 years, the arithmetic mean would be (40 + 12)/2 = 26, and the geometric mean would be (40 × 12)<sup>1/2</sup> = 21.9. This example shows that the arithmetic mean can be ‘unfair’ because proportional changes in one variable (life expectancy) have a larger influence over the index than changes in the other variable (years of schooling). The geometric mean gives each variable the same influence over the value of the index, so doubling the value of one variable would have the same effect on the index as doubling the value of another variable.</span></span></dd>
</dl>
<p>Now, we can combine these dimensional indices to give the HDI. The HDI is the <strong data-term="geometric mean">geometric mean</strong> of the three dimension indices (I<sub>Health</sub> = Life expectancy index, I<sub>Education</sub> = Education index, and I<sub>Income</sub> = GNI index):</p>
<script type="math/tex; mode=display">\text{HDI }=(\text{I}_{\text{Health}} \times \text{I}_{\text{Education}} \times \text{I}_{\text{Income}})^{1/3}</script>
<ol class="text-question">
  <li>Use the formula above and the data in the spreadsheet to calculate the HDI for all the countries excluding those in the ‘Other countries or territories’ category. You should get the same values as those in Column C, rounded to three decimal places.</li>
</ol>
<blockquote class="expandable-box">
  <h3 id="r-walk-through-47-calculating-the-hdi"><strong>R walk-through 4.7</strong> Calculating the HDI</h3>
  <p class="keep-with-next">We will use <code class="language-r highlighter-rouge"><span class="n">read_excel</span></code> to import the data file, which we saved as ‘HDR_data.xlsx’ in our working directory. Before importing, look at the Excel file so that you understand its structure and how it corresponds to the code options used below. We will save the imported data as the dataframe <code class="language-r highlighter-rouge"><span class="n">HDR2018</span></code>.</p>
  <div class="language-r keep-together highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># File path</span><span class="w">
</span><span class="n">HDR2018</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_excel</span><span class="p">(</span><span class="s2">"HDR_data.xlsx"</span><span class="p">,</span><span class="w">
  </span><span class="c1"># Worksheet to import</span><span class="w">
  </span><span class="n">sheet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Table 1"</span><span class="p">,</span><span class="w">
  </span><span class="c1"># Number of rows to skip</span><span class="w">
  </span><span class="n">skip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">

</span><span class="n">head</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## # A tibble: 6 x 15</span><span class="w">
</span><span class="c1">##   X__1   X__2         `Human Development ~ X__3  `Life expectancy a~ X__4 </span><span class="w">
</span><span class="c1">##   &lt;chr&gt;  &lt;chr&gt;        &lt;chr&gt;                &lt;lgl&gt; &lt;chr&gt;               &lt;chr&gt;</span><span class="w">
</span><span class="c1">## 1 HDI r~ Country      Value                NA    (years)             &lt;NA&gt; </span><span class="w">
</span><span class="c1">## 2 &lt;NA&gt;   &lt;NA&gt;         2015                 NA    2015                &lt;NA&gt; </span><span class="w">
</span><span class="c1">## 3 &lt;NA&gt;   VERY HIGH H~ &lt;NA&gt;                 NA    &lt;NA&gt;                &lt;NA&gt; </span><span class="w">
</span><span class="c1">## 4 1      Norway       0.94942283449106446  NA    81.710999999999999  &lt;NA&gt; </span><span class="w">
</span><span class="c1">## 5 2      Australia    0.93867953564660933  NA    82.537000000000006  &lt;NA&gt; </span><span class="w">
</span><span class="c1">## 6 2      Switzerland  0.93913086905938037  NA    83.132999999999996  &lt;NA&gt; </span><span class="w">
</span><span class="c1">## # ... with 9 more variables: `Expected years of schooling` &lt;chr&gt;,</span><span class="w">
</span><span class="c1">## #   X__5 &lt;chr&gt;, `Mean years of schooling` &lt;chr&gt;, X__6 &lt;chr&gt;, `Gross</span><span class="w">
</span><span class="c1">## #   national income (GNI) per capita` &lt;chr&gt;, X__7 &lt;chr&gt;, `GNI per capita</span><span class="w">
</span><span class="c1">## #   rank minus HDI rank` &lt;chr&gt;, X__8 &lt;lgl&gt;, `HDI rank` &lt;chr&gt;</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">str</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## Classes 'tbl_df', 'tbl' and 'data.frame':  264 obs. of 15 variables:</span><span class="w">
</span><span class="c1">##  $ X__1                                  : chr  "HDI rank" NA NA "1" ...</span><span class="w">
</span><span class="c1">##  $ X__2                                  : chr  "Country" NA "VERY HIGH HUMAN DEVELOPMENT" "Norway" ...</span><span class="w">
</span><span class="c1">##  $ Human Development Index (HDI)         : chr  "Value" "2015" NA "0.94942283449106446" ...</span><span class="w">
</span><span class="c1">##  $ X__3                                  : logi  NA NA NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ Life expectancy at birth              : chr  "(years)" "2015" NA "81.710999999999999" ...</span><span class="w">
</span><span class="c1">##  $ X__4                                  : chr  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ Expected years of schooling           : chr  "(years)" "2015" NA "17.671869999999998" ...</span><span class="w">
</span><span class="c1">##  $ X__5                                  : chr  NA "a" NA NA ...</span><span class="w">
</span><span class="c1">##  $ Mean years of schooling               : chr  "(years)" "2015" NA "12.746420000000001" ...</span><span class="w">
</span><span class="c1">##  $ X__6                                  : chr  NA "a" NA NA ...</span><span class="w">
</span><span class="c1">##  $ Gross national income (GNI) per capita: chr  "(2011 PPP $)" "2015" NA "67614.353480000005" ...</span><span class="w">
</span><span class="c1">##  $ X__7                                  : chr  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ GNI per capita rank minus HDI rank    : chr  NA "2015" NA "5" ...</span><span class="w">
</span><span class="c1">##  $ X__8                                  : logi  NA NA NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ HDI rank                              : chr  NA "2014" NA "1" ...</span><span class="w">
</span></code></pre></div>  </div>
  <p class="loosen-15">Looking at the <code class="language-r highlighter-rouge"><span class="n">HDR</span></code> dataframe, there are rows that have information that isn’t data (for example, all the rows with an ‘NA’ in the first column), as well as variables/columns that do not contain data (for example, most columns beginning with an ‘X_’, though columns labelled <code class="language-r highlighter-rouge"><span class="n">X_1</span></code> and <code class="language-r highlighter-rouge"><span class="n">X_2</span></code> contain the HDI rank and the country names respectively).</p>
  <p class="loosen-15">Cleaning up the dataframe can be easier to do in Excel by deleting irrelevant rows and columns, but one advantage of doing it in R is replicability. Suppose in a year’s time you carried out the analysis again with an updated spreadsheet containing new information. If you had done the cleaning in Excel, you would have to redo it from scratch, but if you had done it in R, you can simply rerun the code below.</p>
  <p>Firstly, we eliminate rows that do not have any numbers in the <code class="language-r highlighter-rouge"><span class="n">HDI</span><span class="w"> </span><span class="n">rank</span></code> column (or <code class="language-r highlighter-rouge"><span class="n">X_1</span></code> column).</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Rename the first column, currently named X_1</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">)[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"HDI.rank"</span><span class="w">

</span><span class="c1"># Rename the second column, currently named X_2 </span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">)[</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Country"</span><span class="w">

</span><span class="c1"># Rename the last column, which contains the 2014 rank</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">)[</span><span class="nf">names</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"HDI rank"</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> 
  </span><span class="s2">"HDI.rank.2014"</span><span class="w">

</span><span class="c1"># Eliminate the row that contains the column title</span><span class="w">
</span><span class="n">HDR2018</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">,</span><span class="w">
  </span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">HDI.rank</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">HDI.rank</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s2">"HDI rank"</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <p>Then we eliminate columns that contain notes in the original spreadsheet (names starting with ‘X_’).</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Check which variables do NOT (!) start with X_</span><span class="w">
</span><span class="n">sel_columns</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="o">!</span><span class="n">startsWith</span><span class="p">(</span><span class="nf">names</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">),</span><span class="w"> </span><span class="s2">"X_"</span><span class="p">)</span><span class="w">

</span><span class="c1"># Select the columns that do not start with X_</span><span class="w">
</span><span class="n">HDR2018</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">,</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sel_columns</span><span class="p">)</span><span class="w">

</span><span class="n">str</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## Classes 'tbl_df', 'tbl' and 'data.frame':  188 obs. of 9 variables:</span><span class="w">
</span><span class="c1">##  $ HDI.rank                              : chr  "1" "2" "2" "4" ...</span><span class="w">
</span><span class="c1">##  $ Country                               : chr  "Norway" "Australia" "Switzerland" "Germany" ...</span><span class="w">
</span><span class="c1">##  $ Human Development Index (HDI)         : chr  "0.94942283449106446" "0.93867953564660933" "0.93913086905938037" "0.9256689410716622" ...</span><span class="w">
</span><span class="c1">##  $ Life expectancy at birth              : chr  "81.710999999999999" "82.537000000000006" "83.132999999999996" "81.091999999999999" ...</span><span class="w">
</span><span class="c1">##  $ Expected years of schooling           : chr  "17.671869999999998" "20.43272" "16.040410000000001" "17.095939999999999" ...</span><span class="w">
</span><span class="c1">##  $ Mean years of schooling               : chr  "12.746420000000001" "13.1751" "13.37" "13.18762553" ...</span><span class="w">
</span><span class="c1">##  $ Gross national income (GNI) per capita: chr  "67614.353480000005" "42822.19627" "56363.957799999996" "44999.647140000001" ...</span><span class="w">
</span><span class="c1">##  $ GNI per capita rank minus HDI rank    : chr  "5" "19" "7" "13" ...</span><span class="w">
</span><span class="c1">##  $ HDI.rank.2014                         : chr  "1" "3" "2" "4" ...</span><span class="w">
</span></code></pre></div>  </div>
  <p>Let’s change some of the long variable names (those in columns 3–8) to shorter ones.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">names</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">)[</span><span class="m">3</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"HDI"</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">)[</span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"LifeExp"</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">)[</span><span class="m">5</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"ExpSchool"</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">)[</span><span class="m">6</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"MeanSchool"</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">)[</span><span class="m">7</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"GNI.capita"</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">)[</span><span class="m">8</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"GNI.HDI.rank"</span><span class="w">
</span></code></pre></div>  </div>
  <p>Looking at the structure of the data, we see that R thinks that all the data are <code class="language-r highlighter-rouge"><span class="n">chr</span></code> (character or text variables) because the original datafile contained non-numerical entries (these rows have now been deleted). Apart from the <code class="language-r highlighter-rouge"><span class="n">Country</span></code> variable, which we want to be a factor variable (containing categories), all variables should be numeric.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">HDR2018</span><span class="o">$</span><span class="n">HDI.rank</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">HDI.rank</span><span class="p">)</span><span class="w">
</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">Country</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">Country</span><span class="p">)</span><span class="w">
</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">HDI</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">HDI</span><span class="p">)</span><span class="w">
</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">LifeExp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">LifeExp</span><span class="p">)</span><span class="w">
</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">ExpSchool</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">ExpSchool</span><span class="p">)</span><span class="w">
</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">MeanSchool</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">MeanSchool</span><span class="p">)</span><span class="w">
</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">GNI.capita</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">GNI.capita</span><span class="p">)</span><span class="w">
</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">GNI.HDI.rank</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">GNI.HDI.rank</span><span class="p">)</span><span class="w">
</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">HDI.rank.2014</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">HDI.rank.2014</span><span class="p">)</span><span class="w">
</span><span class="n">str</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## Classes 'tbl_df', 'tbl' and 'data.frame':  188 obs. of 9 variables:</span><span class="w">
</span><span class="c1">##  $ HDI.rank     : num  1 2 2 4 5 5 7 8 9 10 ...</span><span class="w">
</span><span class="c1">##  $ Country      : Factor w/ 188 levels "Afghanistan",..: 125 9 163 64 47 151 120 81 76 32 ...</span><span class="w">
</span><span class="c1">##  $ HDI          : num  0.949 0.939 0.939 0.926 0.925 ...</span><span class="w">
</span><span class="c1">##  $ LifeExp      : num  81.7 82.5 83.1 81.1 80.4 ...</span><span class="w">
</span><span class="c1">##  $ ExpSchool    : num  17.7 20.4 16 17.1 19.2 ...</span><span class="w">
</span><span class="c1">##  $ MeanSchool   : num  12.7 13.2 13.4 13.2 12.7 ...</span><span class="w">
</span><span class="c1">##  $ GNI.capita   : num  67614 42822 56364 45000 44519 ...</span><span class="w">
</span><span class="c1">##  $ GNI.HDI.rank : num  5 19 7 13 13 -3 8 11 20 12 ...</span><span class="w">
</span><span class="c1">##  $ HDI.rank.2014: num  1 3 2 4 6 4 6 8 9 9 ...</span><span class="w">
</span></code></pre></div>  </div>
  <p>Now we have a nice clean dataset that we can work with.</p>
  <p>We start by calculating the three indices, using the information given. For the education index we calculate the index for expected and mean schooling separately, then take the arithmetic mean to get <code class="language-r highlighter-rouge"><span class="n">I.Education</span></code>. As some mean schooling observations exceed the specified ‘maximum’ value of 18, the calculated index values would be larger than 1. To avoid this, we use <code class="language-r highlighter-rouge"><span class="n">pmin</span></code> to replace these observations with 18 to obtain an index value of 1.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">
</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">I.Health</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> 
  </span><span class="p">(</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">LifeExp</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">20</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="m">85</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">20</span><span class="p">)</span><span class="w">

</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">I.Education</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> 
  </span><span class="p">((</span><span class="n">pmin</span><span class="p">(</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">ExpSchool</span><span class="p">,</span><span class="w"> </span><span class="m">18</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> 
  </span><span class="p">(</span><span class="m">18</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">MeanSchool</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> 
  </span><span class="p">(</span><span class="m">15</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">0</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="w">

</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">I.Income</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="p">(</span><span class="nf">log</span><span class="p">(</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">GNI.capita</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="m">100</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w">
  </span><span class="p">(</span><span class="nf">log</span><span class="p">(</span><span class="m">75000</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nf">log</span><span class="p">(</span><span class="m">100</span><span class="p">))</span><span class="w">

</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">HDI.calc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> 
  </span><span class="p">(</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">I.Health</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">HDR2018</span><span class="o">$</span><span class="n">I.Education</span><span class="w"> </span><span class="o">*</span><span class="w"> 
    </span><span class="n">HDR2018</span><span class="o">$</span><span class="n">I.Income</span><span class="p">)</span><span class="o">^</span><span class="p">(</span><span class="m">1</span><span class="o">/</span><span class="m">3</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <p class="tighten-5">Now we can compare the <code class="language-r highlighter-rouge"><span class="n">HDI</span></code> given in the table and our calculated HDI.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">HDR2018</span><span class="p">[,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"HDI"</span><span class="p">,</span><span class="w"> </span><span class="s2">"HDI.calc"</span><span class="p">)]</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## # A tibble: 188 x 2</span><span class="w">
</span><span class="c1">##   HDI   HDI.calc</span><span class="w">
</span><span class="c1">##   &lt;dbl&gt; &lt;dbl&gt;</span><span class="w">
</span><span class="c1">## 1 0.949 0.949</span><span class="w">
</span><span class="c1">## 2 0.939 0.939</span><span class="w">
</span><span class="c1">## 3 0.939 0.939</span><span class="w">
</span><span class="c1">## 4 0.926 0.926</span><span class="w">
</span><span class="c1">## 5 0.925 0.925</span><span class="w">
</span><span class="c1">## 6 0.925 0.927</span><span class="w">
</span><span class="c1">## 7 0.924 0.924</span><span class="w">
</span><span class="c1">## 8 0.923 0.923</span><span class="w">
</span><span class="c1">## 9 0.921 0.921</span><span class="w">
</span><span class="c1">## 10 0.920 0.920</span><span class="w">
</span><span class="c1">## # ... with 178 more rows</span><span class="w">
</span></code></pre></div>  </div>
</blockquote>
<p>The HDI is one way to measure wellbeing, but you may think that it does not use the most appropriate measures for the non-material aspects of wellbeing (health and education).</p>
<p class="loosen-15">Now we will use the same method to create our own index of non-material wellbeing (an ‘alternative HDI’), using different indicators. You can find alternative indicators to measure health and education on the <a href="https://tinyco.re/2888171" class="show-url">UNDP website</a>, in the file ‘Download 2018 Human Development Data Bank’ (left-hand side of the page). (The first column of the spreadsheet, ‘dimension’, tells you whether the indicators refer to ‘Health’, ‘Education’, or other categories).</p>
<ol class="text-question">
  <li>Create an alternative index of wellbeing. In particular, propose alternative Education and Health indices in <em>(a)</em> and <em>(b)</em>, then combine these with the existing Income index in <em>(c)</em> to calculate an alternative HDI. Examine whether the changes caused substantial changes in country rankings in <em>(d)</em>.</li>
</ol>
<ul class="text-sub-question">
  <li>Choose two to three indicators to measure health, and two to three indicators to measure education. Explain why you have chosen these indicators.</li>
</ul>
<ul class="text-sub-question">
  <li>Carefully merge the data into your existing data. Choose a reasonable maximum and minimum value for each indicator and justify your choices.</li>
</ul>
<ul class="text-sub-question">
  <li>Calculate your alternative versions of the education and health dimension indices. Since you have chosen more than one indicator for this dimension, make sure to average the dimension indices as done in Question 3<em>(b)</em>. Also ensure that higher indicator values always represent better outcomes. Now calculate the alternative HDI as done in Questions 3 and 4. Remember to combine your alternative education and health indices with the existing income index from Question 2.</li>
</ul>
<ul class="text-sub-question">
  <li>Create a new variable showing each country’s rank according to your alternative HDI, where 1 is assigned to the country with the highest value. Compare your ranking to the HDI rank. Are the rankings generally similar, or very different? (See R walk-through 4.8 on how to do this.)</li>
</ul>
<blockquote class="expandable-box">
  <h3 id="r-walk-through-48-creating-your-own-hdi"><strong>R walk-through 4.8</strong> Creating your own HDI</h3>
  <h4 class="add-1" id="merge-data-and-calculate-alternative-indices">Merge data and calculate alternative indices</h4>
  <p>This example uses the following indicators:</p>
  <ul>
    <li>Education: Literacy rate, adult (% ages 15 and older); Gross enrolment ratio, tertiary (% of tertiary school-age population); Primary school teachers trained to teach (%)</li>
    <li>Health: Child malnutrition, stunting (moderate or severe) (% under age 5); Mortality rate, female adult (per 1,000 people); Mortality rate, male adult (per 1,000 people).</li>
  </ul>
  <p>First, we import the data and check that it has been imported correctly. You can see that each row represents a different country and indicator (<code class="language-r highlighter-rouge"><span class="n">indicator_name</span></code>), and each column represents a different year.</p>
  <div class="language-r keep-together highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Filename</span><span class="w">
</span><span class="n">allHDR2018</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_excel</span><span class="p">(</span><span class="s2">"2018_all_indicators.xlsx"</span><span class="p">,</span><span class="w">
  </span><span class="c1"># Sheet to import</span><span class="w">
  </span><span class="n">sheet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Data"</span><span class="p">)</span><span class="w">

</span><span class="n">head</span><span class="p">(</span><span class="n">allHDR2018</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## # A tibble: 6 x 34</span><span class="w">
</span><span class="c1">##    dimension indicator_id indicator_name iso3 country_name `1990` `1991`</span><span class="w">
</span><span class="c1">##    &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;</span><span class="w">
</span><span class="c1">## 1  Composit-         14206 HDI rank      AFG   Afghanistan    NA   NA</span><span class="w">
</span><span class="c1">## 2  Composit-         14206 HDI rank      ALB   Albania    NA   NA</span><span class="w">
</span><span class="c1">## 3  Composit-         14206 HDI rank      DZA   Algeria    NA   NA</span><span class="w">
</span><span class="c1">## 4  Composit-         14206 HDI rank      AND   Andorra    NA   NA</span><span class="w">
</span><span class="c1">## 5  Composit-         14206 HDI rank    AGO   Angola     NA   NA</span><span class="w">
</span><span class="c1">## 6  Composit-         14206 HDI rank    ATG   Antigua and~   NA   NA</span><span class="w">
</span><span class="c1">## # ... with 27 more variables: `1992` &lt;dbl&gt;, `1993` &lt;dbl&gt;, `1993` &lt;dbl&gt;,</span><span class="w">
</span><span class="c1">## #   `1994` &lt;dbl&gt;, `1995` &lt;dbl&gt;, `1996` &lt;dbl&gt;, `1997` &lt;dbl&gt;,`1998` &lt;dbl&gt;,</span><span class="w">
</span><span class="c1">## #   `1999` &lt;dbl&gt;, `2000` &lt;dbl&gt;, `2001` &lt;dbl&gt;, `2002` &lt;dbl&gt;, `2003` &lt;dbl&gt;,</span><span class="w">
</span><span class="c1">## #   `2004` &lt;dbl&gt;, `2005` &lt;dbl&gt;, `2006` &lt;dbl&gt;, `2007` &lt;dbl&gt;, `2008` &lt;dbl&gt;,</span><span class="w">
</span><span class="c1">## #   `2009` &lt;dbl&gt;, `2010` &lt;dbl&gt;, `2011` &lt;dbl&gt;, `2012` &lt;dbl&gt;, `2013` &lt;dbl&gt;,</span><span class="w">
</span><span class="c1">## #   `2014` &lt;dbl&gt;, `2015` &lt;dbl&gt;, `2016` &lt;dbl&gt;, `2017` &lt;dbl&gt;, `9999` &lt;dbl&gt;</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">str</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## Classes 'tbl_df', 'tbl' and 'data.frame':  25636 obs. of 34 variables:</span><span class="w">
</span><span class="c1">##  $ dimension      : chr  "Composite indices" "Composite indices" "Composite indices" "Composite indices" ...</span><span class="w">
</span><span class="c1">##  $ indicator_id   : num  146206 146206 146206 146206 ...</span><span class="w">
</span><span class="c1">##  $ indicator_name : chr  "HDI rank" "HDI rank" "HDI rank" "HDI rank" ...</span><span class="w">
</span><span class="c1">##  $ iso3           : chr  "AFG" "ALB" "DZA" "AND" ...</span><span class="w">
</span><span class="c1">##  $ country_name   : chr  "Afghanistan" "Albania" "Algeria" "Andorra" ...</span><span class="w">
</span><span class="c1">##  $ 1990           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 1991           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 1992           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 1993           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 1994           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 1995           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 1996           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 1997           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 1998           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 1999           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 2000           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 2001           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 2002           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 2003           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 2004           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 2005           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 2006           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 2007           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 2008           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 2009           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 2010           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 2011           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 2012           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 2013           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 2014           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 2015           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 2016           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 2017           : num  NA NA NA NA ...</span><span class="w">
</span><span class="c1">##  $ 9999           : num  NA NA NA NA ...</span><span class="w">
</span></code></pre></div>  </div>
  <p>Then we follow the same process as in <a href="#r-walk-through-47-calculating-the-hdi" class="show-page-number">R walk-through 4.7</a>—getting the data for the indicators we want, reshaping it so that each indicator is in a different column (instead of a different row), and giving each indicator a shorter name. We will save this data as <code class="language-r highlighter-rouge"><span class="n">HDR2018w</span></code>. Note that the variable <code class="language-r highlighter-rouge"><span class="m">9999</span></code> refers to the latest year available, or the average taken over a range of years (the Excel file contains information on which year(s) were used).</p>
  <div class="language-r keep-together highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">indicators</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="w">
  </span><span class="s2">"Literacy rate, adult (% ages 15 and older)"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"Gross enrolment ratio, tertiary (% of tertiary school-age population)"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"Primary school teachers trained to teach (%)"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"Child malnutrition, stunting (moderate or severe) (% under age 5)"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"Mortality rate, female adult (per 1,000 people)"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"Mortality rate, male adult (per 1,000 people)"</span><span class="w">

</span><span class="n">HDR2018l</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">allHDR2018</span><span class="p">[</span><span class="w">
  </span><span class="n">allHDR2018</span><span class="o">$</span><span class="n">indicator_name</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="n">indicators</span><span class="p">,</span><span class="w"> </span><span class="p">]</span><span class="w">

</span><span class="n">HDR2018l</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">HDR2018l</span><span class="p">,</span><span class="w"> 
  </span><span class="c1"># Indicate which variables to keep.</span><span class="w">
  </span><span class="n">select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"indicator_name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"country_name"</span><span class="p">,</span><span class="w"> </span><span class="s2">"9999"</span><span class="p">))</span><span class="w">

</span><span class="n">HDR2018w</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dcast</span><span class="p">(</span><span class="n">HDR2018l</span><span class="p">,</span><span class="w"> </span><span class="n">country_name</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">indicator_name</span><span class="p">,</span><span class="w"> 
  </span><span class="n">value.var</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"9999"</span><span class="p">)</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">HDR2018.Edu</span><span class="p">)[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"HDI.rank"</span><span class="w">

</span><span class="c1"># Rename the second column, currently named 'Very high …'</span><span class="w">

</span><span class="nf">names</span><span class="p">(</span><span class="n">HDR2018w</span><span class="p">)[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Country"</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">HDR2018w</span><span class="p">)[</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Child.Malnu"</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">HDR2018w</span><span class="p">)[</span><span class="m">3</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Tert.Enrol"</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">HDR2018w</span><span class="p">)[</span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Adult.Lit"</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">HDR2018w</span><span class="p">)[</span><span class="m">5</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Mortality.Female"</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">HDR2018w</span><span class="p">)[</span><span class="m">6</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Mortality.Male"</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">HDR2018w</span><span class="p">)[</span><span class="m">7</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Prim.Teacher"</span><span class="w">

</span><span class="n">str</span><span class="p">(</span><span class="n">HDR2018w</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## 'data.frame': 194 obs. of 7 variables:</span><span class="w">
</span><span class="c1">##  $ Country         : chr  "Afghanistan" "Albania" "Algeria" "Andorra" ...</span><span class="w">
</span><span class="c1">##  $ Child.Malnu     : num 40.9 23.2 11.7 NA 37.6 NA NA 9.4 2 NA ...</span><span class="w">
</span><span class="c1">##  $ Tert.Enrol      : num 8 61 43 NA 9 22 86 51 122 83 ...</span><span class="w">
</span><span class="c1">##  $ Adult.Lit       : num 31.7 97.2 75.1 100 66 NA 98.1 99.7 NA NA ...</span><span class="w">
</span><span class="c1">##  $ Mortality.Female: num 202 50 83 NA 203 106 74 74 45 46 ...</span><span class="w">
</span><span class="c1">##  $ Mortality.Male  : num 245 79 106 NA 277 151 151 174 76 86 ...</span><span class="w">
</span><span class="c1">##  $ Prim.Teacher    : num NA NA 100 100 47 65 NA NA NA NA ... </span><span class="w">
</span></code></pre></div>  </div>
  <p>Looking at the structure (<code class="language-r highlighter-rouge"><span class="n">str</span><span class="p">(</span><span class="w"> </span><span class="p">)</span></code>), we can see that all indicators are correctly in numerical (<code class="language-r highlighter-rouge"><span class="n">num</span></code>) format.</p>
  <p>Before we can calculate indices, we need to set minimum and maximum values, which we base on the minimum and maximum values in the sample.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">summary</span><span class="p">(</span><span class="n">HDR2018w</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##    Country            Child.Malnu       Tert.Enrol        Adult.Lit   </span><span class="w">
</span><span class="c1">##  Length:194         Min.   : 1.80   Min.   :  2.00   Min.   : 15.50  </span><span class="w">
</span><span class="c1">##  Class :character   1st Qu.:10.78   1st Qu.: 13.50   1st Qu.: 68.55  </span><span class="w">
</span><span class="c1">##  Mode  :character   Median :22.20   Median : 37.00   Median : 92.25  </span><span class="w">
</span><span class="c1">##                     Mean   :22.84   Mean   : 40.36   Mean   : 80.11  </span><span class="w">
</span><span class="c1">##                     3rd Qu.:32.65   3rd Qu.: 63.00   3rd Qu.: 97.35  </span><span class="w">
</span><span class="c1">##                     Max.   :55.90   Max.   :122.00   Max.   :100.00  </span><span class="w">
</span><span class="c1">##                     NA's   :62      NA's   :43         NA's   :60</span><span class="w">
</span><span class="c1">##  Mortality.Female Mortality.Male   Prim.Teacher </span><span class="w">
</span><span class="c1">##  Min.   : 34.00    Min.   : 63.0   Min.   : 15.00  </span><span class="w">
</span><span class="c1">##  1st Qu.: 66.75    1st Qu.:121.0   1st Qu.: 70.00  </span><span class="w">
</span><span class="c1">##  Median :100.50    Median :184.0   Median : 86.00 </span><span class="w">
</span><span class="c1">##  Mean   :130.86    Mean   :195.1   Mean   : 81.23  </span><span class="w">
</span><span class="c1">##  3rd Qu.:181.50    3rd Qu.:253.5   3rd Qu.: 99.00  </span><span class="w">
</span><span class="c1">##  Max.   :463.00    Max.   :555.0   Max.   :100.00  </span><span class="w">
</span><span class="c1">##  NA's   :14       NA's    :14      NA's   :77</span><span class="w">
</span></code></pre></div>  </div>
  <p class="tighten-15">As we want the observations to be inside the [min, max] interval, we choose the following [min, max] pairs for the education indicators: Adult.Lit: [15, 100], Tert.Enrol: [2, 122], and Prim.Teacher: [15, 100]. You may want to research why there can be countries with a tertiary enrolment ratio larger than 100%.</p>
  <p>Let’s calculate the alternative education index (<code class="language-r highlighter-rouge"><span class="n">I.Education.alt</span></code>), taking an arithmetic average just as we did for <code class="language-r highlighter-rouge"><span class="n">I.Education</span></code> in <a href="#r-walk-through-47-calculating-the-hdi" class="show-page-number">R walk-through 4.7</a>.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">HDR2018w</span><span class="o">$</span><span class="n">I.Adult.Lit</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="p">(</span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">Adult.Lit</span><span class="m">-15</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="m">100-15</span><span class="p">)</span><span class="w">

</span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">I.Tert.Enrol</span><span class="o">&lt;-</span><span class="w">
  </span><span class="p">(</span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">Tert.Enrol</span><span class="m">-2</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="m">122-2</span><span class="p">)</span><span class="w"> 

</span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">I.Prim.Teacher</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="p">(</span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">Prim.Teacher</span><span class="m">-15</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="m">100-15</span><span class="p">)</span><span class="w">
  
</span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">I.Education.alt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> 
  </span><span class="p">(</span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">I.Adult.Lit</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">I.Tert.Enrol</span><span class="w"> </span><span class="o">+</span><span class="w"> 
    </span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">I.Prim.Teacher</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">3</span><span class="w">

</span><span class="n">summary</span><span class="p">(</span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">I.Education.alt</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's </span><span class="w">
</span><span class="c1">##  0.1628  0.4222  0.5781  0.5862  0.7181  0.8973     113</span><span class="w">
</span></code></pre></div>  </div>
  <p>You can see that we could not calculate this index for 113 countries, as at least one of the three values was missing.</p>
  <p>We repeat this procedure to calculate an alternative health index (<code class="language-r highlighter-rouge"><span class="n">I.Health.alt</span></code>). The [min, max] pairs we use are: Child.Malnu: [1, 56], Mortality.Female: [34, 463], Mortality.Male: [63, 555].</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">HDR2018w</span><span class="o">$</span><span class="n">I.Child.MalNu</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="p">(</span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">Child.MalNu</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w">
  </span><span class="p">(</span><span class="m">56</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">

</span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">I.Mortality.Female</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="p">(</span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">Mortality.Female</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">34</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w">
  </span><span class="p">(</span><span class="m">463</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">34</span><span class="p">)</span><span class="w"> 

</span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">I.Mortality.Male</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="p">(</span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">Mortality.Male</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">63</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w">
  </span><span class="p">(</span><span class="m">555</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">63</span><span class="p">)</span><span class="w">

</span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">I.Health.alt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="p">(</span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">I.Child.MalNu</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">I.Mortality.Female</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">I.Mortality.Male</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">3</span><span class="w">

</span><span class="c1"># Note that these are all 'bad' indicators in the sense that higher numbers indicate worse outcomes.</span><span class="w">

</span><span class="c1"># For all other indicators, larger numbers mean better outcomes. So we need to 'flip' the values of this indicator.</span><span class="w">

</span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">I.Health.alt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p">(</span><span class="m">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">I.Health.alt</span><span class="p">)</span><span class="w">

</span><span class="n">summary</span><span class="p">(</span><span class="n">HDR2018w</span><span class="o">$</span><span class="n">I.Health.alt</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's </span><span class="w">
</span><span class="c1">##  0.1370  0.5235  0.7088  0.6655  0.8274  0.9766      64</span><span class="w">
</span></code></pre></div>  </div>
  <p>Now we use the <code class="language-r highlighter-rouge"><span class="n">merge</span></code> function to merge this variable into our existing <code class="language-r highlighter-rouge"><span class="n">HDR2018</span></code> dataframe.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">HDR2018</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">,</span><span class="w"> </span><span class="n">HDR2018w</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <h4 id="calculate-an-alternative-hdi">Calculate an alternative HDI</h4>
  <p>Looking at <code class="language-r highlighter-rouge"><span class="n">HDR2018</span></code>, you will see that alternative health and education indices have been added. Now we are in a position to calculate our own HDI (<code class="language-r highlighter-rouge"><span class="n">HDI.own</span></code>).</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">HDR2018</span><span class="o">$</span><span class="n">HDI.own</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> 
  </span><span class="p">(</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">I.Health.alt</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="n">HDR2018</span><span class="o">$</span><span class="n">I.Education.alt</span><span class="w"> </span><span class="o">*</span><span class="w">
    </span><span class="n">HDR2018</span><span class="o">$</span><span class="n">I.Income</span><span class="p">)</span><span class="o">^</span><span class="p">(</span><span class="m">1</span><span class="o">/</span><span class="m">3</span><span class="p">)</span><span class="w"> 

</span><span class="n">summary</span><span class="p">(</span><span class="n">HDR2018</span><span class="o">$</span><span class="n">HDI.own</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's </span><span class="w">
</span><span class="c1">##  0.2647  0.4541  0.5705  0.5870  0.7460  0.8469     121</span><span class="w">
</span></code></pre></div>  </div>
  <p>We have a substantial number of missing observations, leaving us with around 70 countries for which we could calculate the alternative HDI.</p>
  <h4 id="calculate-ranks">Calculate ranks</h4>
  <p>To compare the ranks of the two indices (the original HDI and our alternative HDI), we should only rank the countries that have observations for both indices. We will create a dataframe called <code class="language-r highlighter-rouge"><span class="n">HDR2018_sub</span></code> that contains this subset of countries.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">HDR2018_sub</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> 
  </span><span class="n">subset</span><span class="p">(</span><span class="n">HDR2018</span><span class="p">,</span><span class="w"> </span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">HDI</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">HDI.own</span><span class="p">))</span><span class="w"> 
</span></code></pre></div>  </div>
  <p class="keep-together">Let’s calculate the rank for our index. The <code class="language-r highlighter-rouge"><span class="n">rank</span></code> function will assign rank 1 to the smallest index value, but we want the largest (best) index value to have the rank 1. We add <code class="language-r highlighter-rouge"><span class="o">-</span></code> in front of the variable name to obtain the desired effect.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">HDR2018_sub</span><span class="o">$</span><span class="n">HDI.own.rank</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="n">rank</span><span class="p">(</span><span class="o">-</span><span class="n">HDR2018_sub</span><span class="o">$</span><span class="n">HDI.own</span><span class="p">,</span><span class="w"> </span><span class="n">na.last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"keep"</span><span class="p">)</span><span class="w"> 
</span><span class="n">HDR2018_sub</span><span class="o">$</span><span class="n">HDI.rank</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="n">rank</span><span class="p">(</span><span class="o">-</span><span class="n">HDR2018_sub</span><span class="o">$</span><span class="n">HDI</span><span class="p">,</span><span class="w"> </span><span class="n">na.last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"keep"</span><span class="p">)</span><span class="w"> 
</span></code></pre></div>  </div>
  <p>Now we will use the <code class="language-r highlighter-rouge"><span class="n">ggplot</span></code> function to make a scatterplot comparing the rank of the HDI with that of our own index.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ggplot</span><span class="p">(</span><span class="n">HDR2018_sub</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HDI.rank</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HDI.own.rank</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="c1"># Use solid circles</span><span class="w">
  </span><span class="n">geom_point</span><span class="p">(</span><span class="n">shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">16</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Alternative HDI rank"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"HDI rank"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Comparing ranks between HDI and HDI.own"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme_bw</span><span class="p">()</span><span class="w">
</span></code></pre></div>  </div>
  <div class="figure figure-no-source" id="figure-4-10">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/r-figure-04-10.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/r-figure-04-10.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-04-10-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-10-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-10-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-04-10.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Scatterplot of ranks for HDI and alternative HDI index.
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/r-figure-04-10.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-04-10-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-10-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-10-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-04-10.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Scatterplot of ranks for HDI and alternative HDI index.
" class="" />
        </a>
</div>
<p class="description">
Scatterplot of ranks for HDI and alternative HDI index.
</p>
<p class="caption">
<span class="figure-reference">Figure 4.10 </span>
Scatterplot of ranks for HDI and alternative HDI index.
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
  <p>You can see that in general the rankings are similar. If they were identical, the points in the scatterplot would form a straight upward-sloping line. They do not form a straight line, but there is a very strong positive correlation. There are, however, a few countries where the alternative definitions have caused a change in ranking, so let’s use the <code class="language-r highlighter-rouge"><span class="n">head</span></code> and <code class="language-r highlighter-rouge"><span class="n">tail</span></code> functions to find out which countries these are.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">temp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">HDR2018_sub</span><span class="p">[</span><span class="w">
  </span><span class="n">order</span><span class="p">(</span><span class="n">HDR2018_sub</span><span class="o">$</span><span class="n">HDI.rank</span><span class="w"> </span><span class="o">-</span><span class="w">
  </span><span class="n">HDR2018_sub</span><span class="o">$</span><span class="n">HDI.own.rank</span><span class="p">),</span><span class="w">
  </span><span class="c1"># Show selected variables </span><span class="w">
  </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Country"</span><span class="p">,</span><span class="w"> </span><span class="s2">"HDI.rank"</span><span class="p">,</span><span class="w"> </span><span class="s2">"HDI.own.rank"</span><span class="p">)]</span><span class="w">

</span><span class="c1"># Show the countries with the largest fall in rank</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##        Country HDI.rank HDI.own.rank</span><span class="w">
</span><span class="c1">## 98     Lesotho       52           70</span><span class="w">
</span><span class="c1">## 164  Sri Lanka       13           29</span><span class="w">
</span><span class="c1">## 104  Madagascar      54           68</span><span class="w">
</span><span class="c1">## 57     Eswatini      41           51</span><span class="w">
</span><span class="c1">## 154  Seychelles       7           17</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Show the countries with the largest increase in rank</span><span class="w">
</span><span class="n">tail</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##           Country HDI.rank HDI.own.rank</span><span class="w">
</span><span class="c1">## 111    Mauritania       53           45</span><span class="w">
</span><span class="c1">## 171      Tanzania       49           41</span><span class="w">
</span><span class="c1">## 31       Cambodia       43           34</span><span class="w">
</span><span class="c1">## 165         Sudan       59           50</span><span class="w">
</span><span class="c1">## 120       Myanmar       45           33</span><span class="w">
</span></code></pre></div>  </div>
</blockquote>
<ol class="text-question">
  <li>Compare your alternative index to the HDI:</li>
</ol>
<ul class="text-sub-question">
  <li>The UN classifies countries into four groups depending on their HDI, as shown in Figure 4.11. Would the classification of any country change under your alternative HDI?</li>
</ul>
<ul class="text-sub-question">
  <li>Based on your answers to Questions 5<em>(d)</em> and 6<em>(a)</em>, do you think that the HDI is a robust measure of non-material wellbeing? (In other words, does changing the indicators used in the HDI give similar conclusions about the non-material wellbeing of countries?)</li>
</ul>
<div class="figure fixed" id="figure-4-11">
<div class="figure-body">
<div class="figure-md">
<table>
  <thead>
    <tr>
      <th style="text-align: left">Classification</th>
      <th style="text-align: left">HDI</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Very high human development</td>
      <td style="text-align: left">0.800 and above</td>
    </tr>
    <tr>
      <td style="text-align: left">High human development</td>
      <td style="text-align: left">0.700–0.799</td>
    </tr>
    <tr>
      <td style="text-align: left">Medium human development</td>
      <td style="text-align: left">0.550–0.699</td>
    </tr>
    <tr>
      <td style="text-align: left">Low human development</td>
      <td style="text-align: left">Below 0.550</td>
    </tr>
  </tbody>
</table>
</div>
<p class="description">
Classification of countries according to their HDI value.
</p>
<p class="caption">
<span class="figure-reference">Figure 4.11 </span>
Classification of countries according to their HDI value.
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
<div class="figure-source">
<p class="source">
United Nations Development Programme. 2016. <a href="https://tinyco.re/7010252" class="show-url">‘Technical notes’</a> in <em>Human Development Report 2016</em>: p.3.
</p>
</div><!--.figure-source-->
</div>
<p>We will now investigate whether HDI and GDP per capita give similar information about overall wellbeing, by comparing a country’s rank in both measures.  To answer Question 7, first add (merge) this data to the dataframe that contains your HDI calculations, making sure to match the data to the correct country. (<a href="#r-walk-through-48-creating-your-own-hdi" class="show-page-number">R walk-through 4.8</a> shows you how to extract the indicator(s) you need and merge them with another dataset.)</p>
<ol class="text-question">
  <li>Evaluate GDP per capita and the HDI as measures of overall wellbeing:</li>
</ol>
<ul class="text-sub-question">
  <li>Create a new column showing each country’s rank according to GDP per capita, where 1 is assigned to the country with the highest value. Show this rank on a scatterplot, with GDP per capita rank on the vertical axis and HDI rank on the horizontal axis. (See <a href="#r-walk-through-48-creating-your-own-hdi" class="show-page-number">R walk-through 4.8</a> for a step-by-step explanation of how to create scatterplots in R.)</li>
</ul>
<ul class="text-sub-question">
  <li>Does there appear to be a strong correlation between these two variables? Give an explanation for the observed pattern in your chart.</li>
</ul>
<ul class="text-sub-question keep-together">
  <li>Create a table similar to Figure 4.12 below. Using your answers to Question 7<em>(a)</em>, fill each box with three countries. You can use the UN’s definition of ‘high’ for the HDI, as in Figure 4.11, and choose a reasonable definition of ‘high’ for GDP. Based on this table, which country or countries would you prefer to grow up in, and why?</li>
</ul>
<ul class="text-sub-question">
  <li>Explain the differences between HDI and GDP as measures of wellbeing. You may want to consider the way each measure includes income in its calculation (the actual value or a transformation), and the inclusion of other aspects of wellbeing.</li>
</ul>
<div class="figure fixed figure-no-source" id="figure-4-12">
<div class="figure-body">
<div class="figure-html">
<table class="align-center">
  <tr>
    <th></th>
    <th></th>
    <th colspan="2">HDI</th>
  </tr>
  <tr>
    <td></td>
    <td></td>
    <td>Low</td>
    <td>High</td>
  </tr>
  <tr>
    <td rowspan="2"><strong>GDP</strong></td>
    <td>Low</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td>High</td>
    <td></td>
    <td></td>
  </tr>
</table>
</div>
<p class="description">
Classification of countries according to their HDI and GDP values.
</p>
<p class="caption">
<span class="figure-reference">Figure 4.12 </span>
Classification of countries according to their HDI and GDP values.
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
<ol class="text-question keep-with-next">
  <li>The HDI is one way to measure wellbeing, but there are many other ways to measure wellbeing.</li>
</ol>
<ul class="text-sub-question">
  <li>What are the strengths and limitations of the HDI as a measure of wellbeing?</li>
</ul>
<ul class="text-sub-question">
  <li>Find some alternative measures of non-material wellbeing that we could use alongside the HDI to provide a more comprehensive picture of wellbeing. For each measure, evaluate the elements used to construct the measure, and discuss the additional information we can learn from it. (You may find it helpful to read <a href="https://tinyco.re/5186539" class="show-url">Our World in Data’s page</a> on happiness and life satisfaction, particularly the section ‘Correlates, Determinants, and Consequences’.)</li>
</ul>
	</div><!--#content-->
    <div id="nav" class="non-printing">
            <h2>Doing Economics</h2>
            <div class="search">
<form class="search" action="../../search.html" method="get">
  <label for="search-box"></label>
  <input type="text" id="search-box" class="search-box" name="query" placeholder="Search">
  <input id="search-language" type="hidden" name="lang" value="en">
</form>
            </div><!--.search-->
            <div class="nav-list">
                    <ol class="nav-series-home">
                        <li><a href="../../index.html">Home</a></li>
                    </ol>
    <ol>
        <li class="
        no-children
        ">
            <a href="0-3-contents.html#contents"
               class="">
                Table of contents
            </a>
        </li>
        <li class="
        no-children
        toc-frontmatter">
            <a href="0-4-preface.html#preface"
               class="">
                Preface
            </a>
        </li>
        <li class="
        no-children
        toc-frontmatter">
            <a href="0-5-note-to-instructors.html#a-note-to-instructors"
               class="">
                A note to instructors
            </a>
        </li>
        <li class="
        no-children
        toc-frontmatter">
            <a href="0-6-contributors.html#producing-doing-economics"
               class="">
                Producing <em>Doing Economics</em>
            </a>
        </li>
        <li class="
        no-children
        toc-frontmatter">
            <a href="0-7-resources.html#resources"
               class="">
                List of resources
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                1—Measuring climate change
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="01-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="01-02.html"
               class="">
                Part 1.1 The behaviour of average surface temperature over time
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-02.html#part-12-variation-in-temperature-over-time"
               class="">
                Part 1.2 Variation in temperature over time
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-02.html#part-13-carbon-emissions-and-the-environment"
               class="">
                Part 1.3 Carbon emissions and the environment
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="01-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-03.html#part-11-the-behaviour-of-average-surface-temperature-over-time"
               class="">
                Part 1.1 The behaviour of average surface temperature over time
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-03.html#part-12-variation-in-temperature-over-time"
               class="">
                Part 1.2 Variation in temperature over time
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-03.html#part-13-carbon-emissions-and-the-environment"
               class="">
                Part 1.3 Carbon emissions and the environment
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="01-05.html"
               class="">
                Part 1.1 The behaviour of average surface temperature over time
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-05.html#part-12-variation-in-temperature-over-time"
               class="">
                Part 1.2 Variation in temperature over time
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-05.html#part-13-carbon-emissions-and-the-environment"
               class="">
                Part 1.3 Carbon emissions and the environment
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="01-04.html"
               class="">
                Part 1.1 The behaviour of average surface temperature over time
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-04.html#part-12-variation-in-temperature-over-time"
               class="">
                Part 1.2 Variation in temperature over time
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-04.html#part-13-carbon-emissions-and-the-environment"
               class="">
                Part 1.3 Carbon emissions and the environment
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                2—Collecting and analysing data from experiments
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="02-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="02-02.html"
               class="">
                Part 2.1 Collecting data by playing a public goods game
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-02.html#part-22-describing-the-data"
               class="">
                Part 2.2 Describing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-02.html#part-23-did-changing-the-rules-of-the-game-affect-behaviour"
               class="">
                Part 2.3 Did changing the rules of the game affect behaviour?
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="02-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-03.html#part-21-collecting-data-by-playing-a-public-goods-game"
               class="">
                Part 2.1 Collecting data by playing a public goods game
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-03.html#part-22-describing-the-data"
               class="">
                Part 2.2 Describing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-03.html#part-23-did-changing-the-rules-of-the-game-affect-behaviour"
               class="">
                Part 2.3 Did changing the rules of the game affect behaviour?
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="02-05.html"
               class="">
                Part 2.1 Collecting data by playing a public goods game
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-05.html#part-22-describing-the-data"
               class="">
                Part 2.2 Describing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-05.html#part-23-did-changing-the-rules-of-the-game-affect-behaviour"
               class="">
                Part 2.3 Did changing the rules of the game affect behaviour?
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="02-04.html"
               class="">
                Part 2.1 Collecting data by playing a public goods game
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-04.html#part-22-describing-the-data"
               class="">
                Part 2.2 Describing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-04.html#part-23-did-changing-the-rules-of-the-game-affect-behaviour"
               class="">
                Part 2.3 Did changing the rules of the game affect behaviour?
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                3—Measuring the effect of a sugar tax
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="03-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="03-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="03-02.html"
               class="">
                Excel-specific learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="03-02.html#part-31-before-and-after-comparisons-of-retail-prices"
               class="">
                Part 3.1 Before-and-after comparisons of retail prices
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="03-02.html#part-32-before-and-after-comparisons-with-prices-in-other-areas"
               class="">
                Part 3.2 Before-and-after comparisons with prices in other areas
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="03-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="03-03.html#part-31-before-and-after-comparisons-of-retail-prices"
               class="">
                Part 3.1 Before-and-after comparisons of retail prices
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="03-03.html#part-32-before-and-after-comparisons-with-prices-in-other-areas"
               class="">
                Part 3.2 Before-and-after comparisons with prices in other areas
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="03-05.html"
               class="">
                Google Sheets-specific learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="03-05.html#part-31-before-and-after-comparisons-of-retail-prices"
               class="">
                Part 3.1 Before-and-after comparisons of retail prices
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="03-05.html#part-32-before-and-after-comparisons-with-prices-in-other-areas"
               class="">
                Part 3.2 Before-and-after comparisons with prices in other areas
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="03-04.html"
               class="">
                Part 3.1 Before-and-after comparisons of retail prices
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="03-04.html#part-32-before-and-after-comparisons-with-prices-in-other-areas"
               class="">
                Part 3.2 Before-and-after comparisons with prices in other areas
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                4—Measuring wellbeing
            </a>
    <ol class="active">
        <li class="
        no-children
        ">
            <a href="04-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="04-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="04-02.html"
               class="">
                Excel-specific learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="04-02.html#part-41-gdp-and-its-components-as-a-measure-of-material-wellbeing"
               class="">
                Part 4.1 GDP and its components as a measure of material wellbeing
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="04-02.html#part-42-the-hdi-as-a-measure-of-wellbeing"
               class="">
                Part 4.2 The HDI as a measure of wellbeing
            </a>
        </li>
    </ol>
        </li>
        <li class="active
        no-file
        no-link
        has-children
        ">
            <a 
               class="active">
                Working in R
            </a>
    <ol class="active">
        <li class="active
        no-children
        ">
            <a href="04-03.html"
               class="active">
                R-specific learning objectives
            </a>
        </li>
        <li class="active
        no-children
        ">
            <a href="04-03.html#getting-started-in-r"
               class="active">
                Getting started in R
            </a>
        </li>
        <li class="active
        no-children
        ">
            <a href="04-03.html#part-41-gdp-and-its-components-as-a-measure-of-material-wellbeing"
               class="active">
                Part 4.1 GDP and its components as a measure of material wellbeing
            </a>
        </li>
        <li class="active
        no-children
        ">
            <a href="04-03.html#part-42-the-hdi-as-a-measure-of-wellbeing"
               class="active">
                Part 4.2 The HDI as a measure of wellbeing
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="04-05.html"
               class="">
                Google Sheets-specific learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="04-05.html#part-41-gdp-and-its-components-as-a-measure-of-material-wellbeing"
               class="">
                Part 4.1 GDP and its components as a measure of material wellbeing
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="04-05.html#part-42-the-hdi-as-a-measure-of-wellbeing"
               class="">
                Part 4.2 The HDI as a measure of wellbeing
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="04-04.html"
               class="">
                Part 4.1 GDP and its components as a measure of material wellbeing
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="04-04.html#part-42-the-hdi-as-a-measure-of-wellbeing"
               class="">
                Part 4.2 The HDI as a measure of wellbeing
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                5—Measuring inequality: Lorenz curves and Gini coefficients
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="05-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="05-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="05-02.html"
               class="">
                Part 5.1 Measuring income inequality
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="05-02.html#part-52-measuring-other-kinds-of-inequality"
               class="">
                Part 5.2 Measuring other kinds of inequality
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="05-03.html"
               class="">
                R-specific learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="05-03.html#getting-started-in-r"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="05-03.html#part-51-measuring-income-inequality"
               class="">
                Part 5.1 Measuring income inequality
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="05-03.html#part-52-measuring-other-kinds-of-inequality"
               class="">
                Part 5.2 Measuring other kinds of inequality
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        has-children
        ">
            <a href="05-05.html#empirical-project-5-working-in-google-sheets"
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="05-05.html"
               class="">
                Part 5.1 Measuring income inequality
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="05-05.html#part-52-measuring-other-kinds-of-inequality"
               class="">
                Part 5.2 Measuring other kinds of inequality
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="05-04.html"
               class="">
                Part 5.1 Measuring income inequality
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="05-04.html#part-52-measuring-other-kinds-of-inequality"
               class="">
                Part 5.2 Measuring other kinds of inequality
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                6—Measuring management practices
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="06-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="06-02.html"
               class="">
                Part 6.1 Looking for patterns in the survey data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-02.html#part-62-do-management-practices-differ-between-countries"
               class="">
                Part 6.2 Do management practices differ between countries?
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-02.html#part-63-what-factors-affect-the-quality-of-management"
               class="">
                Part 6.3 What factors affect the quality of management?
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="06-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-03.html#part-61-looking-for-patterns-in-the-survey-data"
               class="">
                Part 6.1 Looking for patterns in the survey data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-03.html#part-62-do-management-practices-differ-between-countries"
               class="">
                Part 6.2 Do management practices differ between countries?
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-03.html#part-63-what-factors-affect-the-quality-of-management"
               class="">
                Part 6.3 What factors affect the quality of management?
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="06-05.html"
               class="">
                Part 6.1 Looking for patterns in the survey data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-05.html#part-62-do-management-practices-differ-between-countries"
               class="">
                Part 6.2 Do management practices differ between countries?
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-05.html#part-63-what-factors-affect-the-quality-of-management"
               class="">
                Part 6.3 What factors affect the quality of management?
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="06-04.html"
               class="">
                Part 6.1 Looking for patterns in the survey data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-04.html#part-62-do-management-practices-differ-between-countries"
               class="">
                Part 6.2 Do management practices differ between countries?
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-04.html#part-63-what-factors-affect-the-quality-of-management"
               class="">
                Part 6.3 What factors affect the quality of management?
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                7—Supply and demand
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="07-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="07-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="07-02.html"
               class="">
                Part 7.1 Drawing supply and demand diagrams
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="07-02.html#part-72-interpreting-supply-and-demand-curves"
               class="">
                Part 7.2 Interpreting supply and demand curves
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="07-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="07-03.html#part-71-drawing-supply-and-demand-diagrams"
               class="">
                Part 7.1 Drawing supply and demand diagrams
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="07-03.html#part-72-interpreting-supply-and-demand-curves"
               class="">
                Part 7.2 Interpreting supply and demand curves
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="07-05.html"
               class="">
                Part 7.1 Drawing supply and demand diagrams
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="07-05.html#part-72-interpreting-supply-and-demand-curves"
               class="">
                Part 7.2 Interpreting supply and demand curves
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="07-04.html"
               class="">
                Part 7.1 Drawing supply and demand diagrams
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="07-04.html#part-72-interpreting-supply-and-demand-curves"
               class="">
                Part 7.2 Interpreting supply and demand curves
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                8—Measuring the non-monetary cost of unemployment
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="08-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="08-02.html"
               class="">
                Part 8.1 Cleaning and summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-02.html#part-82-visualizing-the-data"
               class="">
                Part 8.2 Visualizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-02.html#part-83-confidence-intervals-for-difference-in-the-mean"
               class="">
                Part 8.3 Confidence intervals for difference in the mean
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="08-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-03.html#part-81-cleaning-and-summarizing-the-data"
               class="">
                Part 8.1 Cleaning and summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-03.html#part-82-visualizing-the-data"
               class="">
                Part 8.2 Visualizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-03.html#part-83-confidence-intervals-for-difference-in-the-mean"
               class="">
                Part 8.3 Confidence intervals for difference in the mean
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="08-05.html"
               class="">
                Part 8.1 Cleaning and summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-05.html#part-82-visualizing-the-data"
               class="">
                Part 8.2 Visualizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-05.html#part-83-confidence-intervals-for-difference-in-the-mean"
               class="">
                Part 8.3 Confidence intervals for difference in the mean
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="08-04.html"
               class="">
                Part 8.1 Cleaning and summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-04.html#part-82-visualizing-the-data"
               class="">
                Part 8.2 Visualizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-04.html#part-83-confidence-intervals-for-difference-in-the-mean"
               class="">
                Part 8.3 Confidence intervals for difference in the mean
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                9—Credit-excluded households in a developing country
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="09-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="09-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="09-02.html"
               class="">
                Excel-specific learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="09-02.html#part-91-households-that-did-not-get-a-loan"
               class="">
                Part 9.1 Households that did not get a loan
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="09-02.html#part-92-households-that-got-a-loan"
               class="">
                Part 9.2 Households that got a loan
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="09-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="09-03.html#part-91-households-that-did-not-get-a-loan"
               class="">
                Part 9.1 Households that did not get a loan
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="09-03.html#part-92-households-that-got-a-loan"
               class="">
                Part 9.2 Households that got a loan
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="09-05.html"
               class="">
                Google Sheets-specific learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="09-05.html#part-91-households-that-did-not-get-a-loan"
               class="">
                Part 9.1 Households that did not get a loan
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="09-05.html#part-92-households-that-got-a-loan"
               class="">
                Part 9.2 Households that got a loan
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="09-04.html"
               class="">
                Part 9.1 Households that did not get a loan
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="09-04.html#part-92-households-that-got-a-loan"
               class="">
                Part 9.2 Households that got a loan
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                10—Characteristics of banking systems around the world
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="10-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="10-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="10-02.html"
               class="">
                Part 10.1 Summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="10-02.html#part-102-comparing-financial-stability-before-and-after-the-2008-global-financial-crisis"
               class="">
                Part 10.2 Comparing financial stability before and after the 2008 global financial crisis
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="10-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="10-03.html#part-101-summarizing-the-data"
               class="">
                Part 10.1 Summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="10-03.html#part-102-comparing-financial-stability-before-and-after-the-2008-global-financial-crisis"
               class="">
                Part 10.2 Comparing financial stability before and after the 2008 global financial crisis
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="10-05.html"
               class="">
                Part 10.1 Summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="10-05.html#part-102-comparing-financial-stability-before-and-after-the-2008-global-financial-crisis"
               class="">
                Part 10.2 Comparing financial stability before and after the 2008 global financial crisis
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="10-04.html"
               class="">
                Part 10.1 Summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="10-04.html#part-102-comparing-financial-stability-before-and-after-the-2008-global-financial-crisis"
               class="">
                Part 10.2 Comparing financial stability before and after the 2008 global financial crisis
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                11—Measuring willingness to pay for climate change mitigation
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="11-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="11-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="11-02.html"
               class="">
                Part 11.1 Summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="11-02.html#part-112-comparing-willingness-to-pay-across-methods-and-individual-characteristics"
               class="">
                Part 11.2 Comparing willingness to pay across methods and individual characteristics
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="11-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="11-03.html#part-111-summarizing-the-data"
               class="">
                Part 11.1 Summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="11-03.html#part-112-comparing-willingness-to-pay-across-methods-and-individual-characteristics"
               class="">
                Part 11.2 Comparing willingness to pay across methods and individual characteristics
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="11-05.html"
               class="">
                Part 11.1 Summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="11-05.html#part-112-comparing-willingness-to-pay-across-methods-and-individual-characteristics"
               class="">
                Part 11.2 Comparing willingness to pay across methods and individual characteristics
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="11-04.html"
               class="">
                Part 11.1 Summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="11-04.html#part-112-comparing-willingness-to-pay-across-methods-and-individual-characteristics"
               class="">
                Part 11.2 Comparing willingness to pay across methods and individual characteristics
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                12—Government policies and popularity: Hong Kong cash handout
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="12-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="12-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="12-02.html"
               class="">
                Excel-specific learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="12-02.html#part-121-inequality"
               class="">
                Part 12.1 Inequality
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="12-02.html#part-122-government-popularity"
               class="">
                Part 12.2 Government popularity
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="12-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="12-03.html#part-121-inequality"
               class="">
                Part 12.1 Inequality
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="12-03.html#part-122-government-popularity"
               class="">
                Part 12.2 Government popularity
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="12-05.html"
               class="">
                Google Sheets-specific learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="12-05.html#part-121-inequality"
               class="">
                Part 12.1 Inequality
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="12-05.html#part-122-government-popularity"
               class="">
                Part 12.2 Government popularity
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="12-04.html"
               class="">
                Part 12.1 Inequality
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="12-04.html#part-122-government-popularity"
               class="">
                Part 12.2 Government popularity
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-children
        toc-endmatter">
            <a href="50-00-technical-reference.html"
               class="">
                Technical Reference
            </a>
        </li>
        <li class="
        no-file
        no-children
        toc-endmatter">
            <a href="50-01-glossary.html#glossary"
               class="">
                Glossary
            </a>
        </li>
        <li class="
        no-file
        no-children
        toc-endmatter">
            <a href="50-02-bibliography.html#bibliography"
               class="">
                Bibliography
            </a>
        </li>
        <li class="
        no-file
        no-children
        toc-endmatter">
            <a href="50-03-copyright-acknowledgements.html#copyright-acknowledgements"
               class="">
                Copyright acknowledgements
            </a>
        </li>
    </ol>
            </div><!--.nav-list-->
            <div class="widgets">
            </div><!--.widgets-->
    </div><!--#nav-->
    <div id="footer" dir="ltr">
        <div class="footer-content">
            <div class="footer-logos">
                <a href="http://core-econ.org">
                    <img src="../../assets/coreecon_logo_bw.png">
                </a>
            </div>
            <div class="footer-text">
                <p>This ebook is developed by the CORE project. More information and additional resources for learning and teaching can be found at <a href="https://www.core-econ.org">www.core-econ.org</a>.</p>
            </div>
            <div class="footer-licence">
                <a title="Licensed under Creative Commons BY NC ND" alt="Licensed under Creative Commons BY NC ND" href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><img src="../../assets/cc-byncnd.png"></a>
                <br />
                Version 1.0.0 &bull; Produced by <a href='https://electricbookworks.com'>Electric Book Works</a>
            </div>
        </div><!--.footer-content-->
    </div><!--#footer-->
    <script src="../../assets/js/bundle.js?date=20200224120313"></script>
    <style>
        .js-mcq .mcq-correct .mcq-feedback:before {
            content: "Correct!";
        }
        .js-mcq .mcq-incorrect .mcq-feedback:before {
            content: "Incorrect";
        }
        .js-mcq .mcq-partially-correct .mcq-feedback:before {
            content: "You haven't selected all the correct answers.";
        }
    </style>
</div><!--#wrapper-->
</body>
</html>
