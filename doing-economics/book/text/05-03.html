
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <title>
    Doing Economics: Empirical Project 5: Working in R
    </title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="../../assets/favicon.png">
    <meta property="og:title" content="Empirical Project 5: Working in R" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.core-econ.org/doing-economics/book/text/05-03.html" />
    <meta property="og:description" content="A unique resource for learning data handling, software and statistical skills by working through projects that address real-world policy problems." />
    <meta property="og:image" content="https://www.core-econ.org/doing-economics/book/images/web/cover.jpg" />
    <link rel="stylesheet" type="text/css" media="all" href="../styles/web.css?date=20200224120313" />
    <script>
        function delete_cookie(name) {
            document.cookie = name + '=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT;';
            console.log('Expired and removed MathJax menu cookie.');
        }
        delete_cookie('mjx.menu')
    </script>
            <script id="MathJaxConfig" type="text/x-mathjax-config" >
                MathJax.Hub.Config({
                    "HTML-CSS": {
                        availableFonts: [], // force use of webFont
                        webFont: "Gyre-Pagella",
                        scale: 90,
                        styles: {
                            ".MathJax [style*=border-top-width]": {
                                "border-top-width": "0.5pt ! important"
                            }
                        }
                    },
                    messageStyle: "none"
                });
            </script>
            <script id="MathJax"
                src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML">
            </script>
<script>
WebFontConfig = {
     google: {
         families: ['Amiri:400,400i,700', 'Source Sans Pro:400,700,700:latin-ext', 'Asap:400,400i,600,600i']
     }
};
(function(d) {
    var wf = d.createElement('script'), s = d.scripts[0];
    wf.src = 'https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.js';
    wf.async = true;
    s.parentNode.insertBefore(wf, s);
})(document)
</script>
<!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-71347024-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-106812057-1');
</script>
</head>
<body class="book chapter subchapter"
>
<div id="wrapper">
<div class="masthead">
        <ul>
                <li class="masthead-book-title">
                    <a href="../../index.html">Doing Economics</a>
                </li>
        </ul>
    <div class="controls">
    </div>
</div><!--.masthead-->
<div class="nav-buttons">
	<a class="nav-back-button">←</a>
	<a class="nav-button" href="#nav">Contents</a>
</div>
    <div class="chapter-opener-image chapter-opener-image-none">
    </div>
	<div id="content">
<h1 id="empirical-project-5-working-in-r"><strong>Empirical Project 5</strong> Working in R</h1>
<blockquote class="info web-full-width">
  <h3 id="download-the-code">Download the code</h3>
  <p>To <a href="https://tinyco.re/2489739">download the code chunks used in this project</a>, right-click on the download link and select ‘Save Link As…’. You’ll need to save the code download to your working directory, and open it in RStudio.</p>
  <p>Don’t forget to also download the data into your working directory by following the steps in this project.</p>
</blockquote>
<h2 id="r-specific-learning-objectives">R-specific learning objectives</h2>
<p>In addition to the learning objectives for this project, in Part 5.1 you will learn how to use loops to repeat specified tasks for a list of values (<em>Note:</em> this is an extension task so may not apply to all users).</p>
<h2 id="getting-started-in-r">Getting started in R</h2>
<p>For this project you will need the following packages:</p>
<ul>
  <li><code class="language-r highlighter-rouge"><span class="n">tidyverse</span></code>, to help with data manipulation</li>
  <li><code class="language-r highlighter-rouge"><span class="n">readxl</span></code>, to import an Excel spreadsheet</li>
  <li><code class="language-r highlighter-rouge"><span class="n">ineq</span></code>, to calculate inequality measures</li>
  <li><code class="language-r highlighter-rouge"><span class="n">reshape2</span></code>, to rearrange a dataframe.</li>
</ul>
<p>If you need to install any of these packages, run the following code:</p>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="w">
  </span><span class="s2">"readxl"</span><span class="p">,</span><span class="w"> </span><span class="s2">"tidyverse"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ineq"</span><span class="p">,</span><span class="w"> </span><span class="s2">"reshape2"</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>
<p>You can import these libraries now, or when they are used in the R walk-throughs below.</p>
<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">readxl</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ineq</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">reshape2</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>
<h2 id="part-51-measuring-income-inequality">Part 5.1 Measuring income inequality</h2>
<blockquote class="box fixed">
  <h3 id="learning-objectives-for-this-part">Learning objectives for this part</h3>
  <ul>
    <li>draw Lorenz curves</li>
    <li>calculate and interpret the Gini coefficient</li>
    <li>interpret alternative measures of income inequality.</li>
  </ul>
</blockquote>
<p>One way to visualize the income distribution in a population is to draw a Lorenz curve. This curve shows the entire population lined up along the horizontal axis from the poorest to the richest. The height of the curve at any point on the vertical axis indicates the fraction of total income received by the fraction of the population given by that point on the horizontal axis.</p>
<p class="loosen-10">We will start by using income decile data from the Global Consumption and Income Project to draw Lorenz curves and compare changes in the income distribution of a country over time. Note that income here refers to market income, which does not take into account taxes or government transfers (see <a href="https://tinyco.re/2648522">Section 5.10</a> of <em>Economy, Society, and Public Policy</em> for further details).</p>
<p>To answer the question below:</p>
<ul>
  <li>Go to the <a href="https://tinyco.re/9553483" class="show-url">Globalinc website</a> and download the Excel file containing the data by clicking ‘xlsx’.</li>
  <li>Save it in an easily accessible location, such as a folder on your Desktop or in your personal folder.</li>
  <li>Import the data into R as explained in R walk-through 5.1.</li>
</ul>
<blockquote class="expandable-box">
  <h3 id="r-walk-through-51-importing-an-excel-file-either-xlsx-or-xls-format-into-r"><strong>R walk-through 5.1</strong> Importing an Excel file (either <code class="language-r highlighter-rouge"><span class="n">.xlsx</span></code> or .<code class="language-r highlighter-rouge"><span class="n">xls</span></code> format) into R</h3>
  <p>As we are importing an Excel file, we use the <code class="language-r highlighter-rouge"><span class="n">read_excel</span></code> function from the <code class="language-r highlighter-rouge"><span class="n">readxl</span></code> package. The file is called <code class="language-r highlighter-rouge"><span class="n">GCIPrawdata.xlsx</span></code>. Before you import the file into R, open the datafile in Excel to understand its structure. You will see that the data is all in one worksheet (which is convenient), and that the headings for the variables are in the third row. Hence we will use the <code class="language-r highlighter-rouge"><span class="n">skip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span></code> option in the <code class="language-r highlighter-rouge"><span class="n">read_excel</span></code> function to skip the first two rows.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">  
</span><span class="n">library</span><span class="p">(</span><span class="n">readxl</span><span class="p">)</span><span class="w"> 

</span><span class="c1"># Set your working directory to the correct folder.</span><span class="w">
</span><span class="c1"># Insert your file path for 'YOURFILEPATH'.</span><span class="w">
</span><span class="n">setwd</span><span class="p">(</span><span class="s2">"YOURFILEPATH"</span><span class="p">)</span><span class="w">

</span><span class="n">decile_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_excel</span><span class="p">(</span><span class="s2">"GCIPrawdata.xlsx"</span><span class="p">,</span><span class="w"> </span><span class="n">skip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">  
</span></code></pre></div>  </div>
  <p>The data is now in a ‘tibble’ (like a spreadsheet for R). Let’s use the <code class="language-r highlighter-rouge"><span class="n">head</span></code> function to look at the first few rows:</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">head</span><span class="p">(</span><span class="n">decile_data</span><span class="p">)</span><span class="w">  
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## # A tibble: 6 x 14</span><span class="w">
</span><span class="c1">##   Country      Year `Decile 1 Income` `Decile 2 Income` `Decile 3 Income`</span><span class="w">
</span><span class="c1">##   &lt;chr&gt;       &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;</span><span class="w">
</span><span class="c1">## 1 Afghanistan  1980               206               350               455</span><span class="w">
</span><span class="c1">## 2 Afghanistan  1981               212               361               469</span><span class="w">
</span><span class="c1">## 3 Afghanistan  1982               221               377               490</span><span class="w">
</span><span class="c1">## 4 Afghanistan  1983               238               405               527</span><span class="w">
</span><span class="c1">## 5 Afghanistan  1984               249               424               551</span><span class="w">
</span><span class="c1">## 6 Afghanistan  1985               256               435               566</span><span class="w">
</span><span class="c1">## # ... with 9 more variables: `Decile 4 Income` &lt;dbl&gt;, `Decile 5</span><span class="w">
</span><span class="c1">## #   Income` &lt;dbl&gt;, `Decile 6 Income` &lt;dbl&gt;, `Decile 7 Income` &lt;dbl&gt;,</span><span class="w">
</span><span class="c1">## #   `Decile 8 Income` &lt;dbl&gt;, `Decile 9 Income` &lt;dbl&gt;, `Decile 10</span><span class="w">
</span><span class="c1">## #   Income` &lt;dbl&gt;, `Mean Income` &lt;dbl&gt;, Population &lt;dbl&gt;</span><span class="w">
</span></code></pre></div>  </div>
  <p>As you can see, each row shows data for a different country-year combination. The first row is for Afghanistan in 1980, and the first value (in the third column) is 206, for the variable <code class="language-r highlighter-rouge"><span class="n">Decile</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="n">Income</span></code>. This value indicates that the mean annual income of the poorest 10% in Afghanistan was the equivalent of 206 USD (in 1980, adjusted using purchasing power parity). Looking at the next column, you can see that the mean income of the next richest 10% (those in the 11th to 20th percentiles for income) was 350.</p>
  <p>To see the list of variables, we use the <code class="language-r highlighter-rouge"><span class="n">str</span></code> function.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">str</span><span class="p">(</span><span class="n">decile_data</span><span class="p">)</span><span class="w">  
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## Classes 'tbl_df', 'tbl' and 'data.frame':  4799 obs. of 14 variables:</span><span class="w">
</span><span class="c1">##  $ Country         : chr  "Afghanistan" "Afghanistan" "Afghanistan" "Afghanistan" ...</span><span class="w">
</span><span class="c1">##  $ Year            : num  1980 1981 1982 1983 1984 ...</span><span class="w">
</span><span class="c1">##  $ Decile 1 Income : num  206 212 221 238 249 256 268 243 223 202 ...</span><span class="w">
</span><span class="c1">##  $ Decile 2 Income : num  350 361 377 405 424 435 457 414 380 344 ...</span><span class="w">
</span><span class="c1">##  $ Decile 3 Income : num  455 469 490 527 551 566 594 539 493 447 ...</span><span class="w">
</span><span class="c1">##  $ Decile 4 Income : num  556 574 599 644 674 692 726 659 603 547 ...</span><span class="w">
</span><span class="c1">##  $ Decile 5 Income : num  665 686 716 771 806 828 869 788 722 654 ...</span><span class="w">
</span><span class="c1">##  $ Decile 6 Income : num  793 818 854 919 961 ...</span><span class="w">
</span><span class="c1">##  $ Decile 7 Income : num  955 986 1029 1107 1157 ...</span><span class="w">
</span><span class="c1">##  $ Decile 8 Income : num  1187 1225 1278 1376 1438 ...</span><span class="w">
</span><span class="c1">##  $ Decile 9 Income : num  1594 1645 1717 1848 1932 ...</span><span class="w">
</span><span class="c1">##  $ Decile 10 Income: num  3542 3655 3814 4105 4291 ...</span><span class="w">
</span><span class="c1">##  $ Mean Income     : num  1030 1063 1109 1194 1248 ...</span><span class="w">
</span><span class="c1">##  $ Population      : num  13211412 12996923 12667001 12279095 11912510 ...</span><span class="w">
</span></code></pre></div>  </div>
  <p>In addition to the country, year, and the ten income deciles, we have mean income and the population.</p>
</blockquote>
<p>To draw Lorenz curves, we need to calculate the cumulative share of total income owned by each decile (these will be the vertical axis values). The cumulative income share of a particular decile is the proportion of total income held by that decile and all the deciles below it. For example, if Decile 1 has 1/10 of total income and Decile 2 has 2/10 of total income, the cumulative income share of Decile 2 is 3/10 (or 0.3).</p>
<ol class="text-question">
  <li>Choose two countries. You will be using their data, for 1980 and 2014, as the basis for your Lorenz curves. Use the country data you have selected to calculate the cumulative income share of each decile. (Remember that each decile represents 10% of the population.)</li>
</ol>
<blockquote class="expandable-box">
  <h3 id="r-walk-through-52-calculating-cumulative-shares-using-the-cumsum-function"><strong>R walk-through 5.2</strong> Calculating cumulative shares using the <code class="language-r highlighter-rouge"><span class="n">cumsum</span></code> function</h3>
  <p>Here we have chosen China (a country that recently underwent enormous economic changes) and the US (a developed country). We use the <code class="language-r highlighter-rouge"><span class="n">subset</span></code> function to create a new dataset (called <code class="language-r highlighter-rouge"><span class="n">temp</span></code>) containing only the countries and years we need.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#  Select the data for the chosen country and years</span><span class="w">
</span><span class="n">sel_Year</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1980</span><span class="p">,</span><span class="w"> </span><span class="m">2014</span><span class="p">)</span><span class="w">
</span><span class="n">sel_Country</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"United States"</span><span class="p">,</span><span class="w"> </span><span class="s2">"China"</span><span class="p">)</span><span class="w">

</span><span class="n">temp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="w">
  </span><span class="n">decile_data</span><span class="p">,</span><span class="w"> 
  </span><span class="p">(</span><span class="n">decile_data</span><span class="o">$</span><span class="n">Country</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="n">sel_Country</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> 
  </span><span class="p">(</span><span class="n">decile_data</span><span class="o">$</span><span class="n">Year</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="n">sel_Year</span><span class="p">))</span><span class="w">
</span><span class="n">temp</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## # A tibble: 4 x 14</span><span class="w">
</span><span class="c1">##   Country        Year `Decile 1 Income` `Decile 2 Income` `Decile 3 Incom~</span><span class="w">
</span><span class="c1">##   &lt;chr&gt;         &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;            &lt;dbl&gt;</span><span class="w">
</span><span class="c1">## 1 China          1980                79               113              146</span><span class="w">
</span><span class="c1">## 2 China          2014               448               927             1440</span><span class="w">
</span><span class="c1">## 3 United States  1980              3392              5820             7855</span><span class="w">
</span><span class="c1">## 4 United States  2014              3778              6534             9069</span><span class="w">
</span><span class="c1">## # ... with 9 more variables: `Decile 4 Income` &lt;dbl&gt;, `Decile 5</span><span class="w">
</span><span class="c1">## #   Income` &lt;dbl&gt;, `Decile 6 Income` &lt;dbl&gt;, `Decile 7 Income` &lt;dbl&gt;,</span><span class="w">
</span><span class="c1">## #   `Decile 8 Income` &lt;dbl&gt;, `Decile 9 Income` &lt;dbl&gt;, `Decile 10</span><span class="w">
</span><span class="c1">## #   Income` &lt;dbl&gt;, `Mean Income` &lt;dbl&gt;, Population &lt;dbl&gt;</span><span class="w">
</span></code></pre></div>  </div>
  <p>Before we calculate cumulative income shares, we need to calculate the total income for each country-year combination using the mean income and the population size.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">print</span><span class="p">(</span><span class="s2">"Total incomes are:"</span><span class="p">)</span><span class="w">  
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## [1] "Total incomes are:"  </span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">total_income</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">temp</span><span class="p">[,</span><span class="w"> </span><span class="s2">"Mean Income"</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> 
  </span><span class="n">temp</span><span class="p">[,</span><span class="w"> </span><span class="s2">"Population"</span><span class="p">]</span><span class="w">  
</span><span class="n">total_income</span><span class="w">  
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##   Mean Income  </span><span class="w">
</span><span class="c1">## 1 2.472624e+11  </span><span class="w">
</span><span class="c1">## 2 6.609944e+12  </span><span class="w">
</span><span class="c1">## 3 3.366422e+12  </span><span class="w">
</span><span class="c1">## 4 6.401280e+12  </span><span class="w">
</span></code></pre></div>  </div>
  <p>These numbers are very large, so for our purpose it is easier to assume that there is only one person in each decile, in other words the total income is 10 times the mean income. This simplification works because, by definition, each decile has exactly the same number of people (10% of the population).</p>
  <p>We will be using the very useful <code class="language-r highlighter-rouge"><span class="n">cumsum</span></code> function (short for ‘cumulative sum’) to calculate the cumulative income. To see what this function does, look at this simple example.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">test</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="m">22</span><span class="p">)</span><span class="w">  
</span><span class="nf">cumsum</span><span class="p">(</span><span class="n">test</span><span class="p">)</span><span class="w">  
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## [1] 2 6 16 38  </span><span class="w">
</span></code></pre></div>  </div>
  <p>You can see that each number in the sequence is the sum of all the preceding numbers (including itself), for example, we got the third number, 16, by adding 2, 4, and 10. We now apply this function to calculate the cumulative income shares for China (1980) and save them as <code class="language-r highlighter-rouge"><span class="n">cum_inc_share_c80</span></code>.</p>
  <div class="language-r print-wrap-words highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Pick the deciles (Columns 3 to 12) in Row 1 (China, 1980)</span><span class="w">
</span><span class="n">decs_c80</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">unlist</span><span class="p">(</span><span class="n">temp</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="o">:</span><span class="m">12</span><span class="p">])</span><span class="w">
                               
</span><span class="c1"># The unlist function transforms temp[1, 3:12] from a </span><span class="w">
</span><span class="c1"># tibble to simple vector with data which simplifies the </span><span class="w">
</span><span class="c1"># calculations.</span><span class="w">

</span><span class="c1"># Give the total income, assuming a population of 10</span><span class="w">
</span><span class="n">total_inc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">unlist</span><span class="p">(</span><span class="n">temp</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"Mean Income"</span><span class="p">])</span><span class="w">

</span><span class="n">cum_inc_share_c80</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">cumsum</span><span class="p">(</span><span class="n">decs_c80</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">total_inc</span><span class="w">
</span><span class="n">cum_inc_share_c80</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##  Decile 1 Income  Decile 2 Income  Decile 3 Income  Decile 4 Income </span><span class="w">
</span><span class="c1">##       0.03134921       0.07619048       0.13412698       0.20436508 </span><span class="w">
</span><span class="c1">##  Decile 5 Income  Decile 6 Income  Decile 7 Income  Decile 8 Income </span><span class="w">
</span><span class="c1">##       0.28769841       0.38492063       0.49841270       0.63174603 </span><span class="w">
</span><span class="c1">##  Decile 9 Income Decile 10 Income </span><span class="w">
</span><span class="c1">##       0.79206349       0.99841270</span><span class="w">
</span></code></pre></div>  </div>
  <p>We repeat the same process for China in 2014 (<code class="language-r highlighter-rouge"><span class="n">cum_inc_share_c14</span></code>) and for the US in 1980 and 2014 (<code class="language-r highlighter-rouge"><span class="n">cum_inc_share_us80</span></code> and <code class="language-r highlighter-rouge"><span class="n">cum_inc_share_us14</span></code> respectively).</p>
  <div class="language-r keep-together highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># For China, 2014  </span><span class="w">
</span><span class="c1"># Go to Row 2 (China, 2014)</span><span class="w">
</span><span class="n">decs_c14</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">unlist</span><span class="p">(</span><span class="n">temp</span><span class="p">[</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="o">:</span><span class="m">12</span><span class="p">])</span><span class="w">

</span><span class="c1"># Give the total income, assuming a population of 10</span><span class="w">
</span><span class="n">total_inc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">unlist</span><span class="p">(</span><span class="n">temp</span><span class="p">[</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="s2">"Mean Income"</span><span class="p">])</span><span class="w"> 

</span><span class="n">cum_inc_share_c14</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">cumsum</span><span class="p">(</span><span class="n">decs_c14</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">total_inc</span><span class="w">  
  
</span><span class="c1"># For the US, 1980  </span><span class="w">
</span><span class="c1"># Select Row 3 (USA, 1980)</span><span class="w">
</span><span class="n">decs_us80</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">unlist</span><span class="p">(</span><span class="n">temp</span><span class="p">[</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="o">:</span><span class="m">12</span><span class="p">])</span><span class="w">

</span><span class="c1"># Give the total income, assuming a population of 10</span><span class="w">
</span><span class="n">total_inc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">unlist</span><span class="p">(</span><span class="n">temp</span><span class="p">[</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="s2">"Mean Income"</span><span class="p">])</span><span class="w">

</span><span class="n">cum_inc_share_us80</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">cumsum</span><span class="p">(</span><span class="n">decs_us80</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">total_inc</span><span class="w">  
  
</span><span class="c1"># For the US, 2014  </span><span class="w">
</span><span class="c1"># Select Row 4 (USA, 2014)</span><span class="w">
</span><span class="n">decs_us14</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">unlist</span><span class="p">(</span><span class="n">temp</span><span class="p">[</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="o">:</span><span class="m">12</span><span class="p">])</span><span class="w">   

</span><span class="c1"># Give the total income, assuming a population of 10 </span><span class="w">
</span><span class="n">total_inc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">unlist</span><span class="p">(</span><span class="n">temp</span><span class="p">[</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="s2">"Mean Income"</span><span class="p">])</span><span class="w">

</span><span class="n">cum_inc_share_us14</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">cumsum</span><span class="p">(</span><span class="n">decs_us14</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">total_inc</span><span class="w">  
</span></code></pre></div>  </div>
</blockquote>
<ol class="text-question">
  <li>Use the cumulative income shares to draw Lorenz curves for each country in order to visually compare the income distributions over time.</li>
</ol>
<ul class="text-sub-question">
  <li>Draw a line chart with cumulative share of population on the horizontal axis and cumulative share of income on the vertical axis. Make sure to include a chart legend, and label your axes and chart appropriately.</li>
</ul>
<ul class="text-sub-question">
  <li>Follow the steps in R walk-through 5.3 to add a straight line representing perfect equality to each chart. (<em>Hint</em>: If income was shared equally across the population, the bottom 10% of people would have 10% of the total income, the bottom 20% would have 20% of the total income, and so on.)</li>
</ul>
<blockquote class="expandable-box">
  <h3 id="r-walk-through-53-drawing-lorenz-curves"><strong>R walk-through 5.3</strong> Drawing Lorenz curves</h3>
  <p>Let us plot the cumulative income shares for China (1980), which we previously stored in the variable <code class="language-r highlighter-rouge"><span class="n">cum_inc_share_c80</span></code>. The <code class="language-r highlighter-rouge"><span class="n">plot</span></code> function makes the basic chart, with the cumulative income share in blue. We then use the functions <code class="language-r highlighter-rouge"><span class="n">abline</span></code> to add the perfect equality line (in black), and <code class="language-r highlighter-rouge"><span class="n">title</span></code> to add a chart title.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plot</span><span class="p">(</span><span class="n">cum_inc_share_c80</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"l"</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> 
  </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">ylab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Cumulative income share"</span><span class="p">)</span><span class="w">  

</span><span class="c1"># Add the perfect equality line </span><span class="w">
</span><span class="n">abline</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.1</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w"> </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">

</span><span class="n">title</span><span class="p">(</span><span class="s2">"Lorenz curve, China, 1980"</span><span class="p">)</span><span class="w"> 
</span></code></pre></div>  </div>
  <div class="figure figure-no-source" id="figure-5-1">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/r-figure-05-01.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-01.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-01-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-01-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-01-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-01.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Lorenz curve, China, 1980.
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-01.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-01-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-01-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-01-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-01.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Lorenz curve, China, 1980.
" class="" />
        </a>
</div>
<p class="description">
Lorenz curve, China, 1980.
</p>
<p class="caption">
<span class="figure-reference">Figure 5.1 </span>
Lorenz curve, China, 1980.
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
  <p>The blue line is the Lorenz curve. The Gini coefficient is the ratio of the area between the two lines and the total area under the black line. We will calculate the Gini coefficient in R walk-through 5.4.</p>
  <p>Now we add the other Lorenz curves to the chart using the <code class="language-r highlighter-rouge"><span class="n">lines</span></code> function. We use the <code class="language-r highlighter-rouge"><span class="n">col</span><span class="o">=</span></code> option to specify a different colour for each line, and the <code class="language-r highlighter-rouge"><span class="n">lty</span></code> option to make the line pattern solid for 2014 data and dashed for 1980 data. Finally, we use the <code class="language-r highlighter-rouge"><span class="n">legend</span></code> function to add a chart legend in the top left corner of the chart.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plot</span><span class="p">(</span><span class="n">cum_inc_share_c80</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"l"</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> 
  </span><span class="n">lty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">xlab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Deciles"</span><span class="p">,</span><span class="w"> 
  </span><span class="n">ylab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Cumulative income share"</span><span class="p">)</span><span class="w">  

</span><span class="c1"># Add the perfect equality line </span><span class="w">
</span><span class="n">abline</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.1</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w"> </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">  

</span><span class="c1"># lty = 1 = dashed line  </span><span class="w">
</span><span class="n">lines</span><span class="p">(</span><span class="n">cum_inc_share_c14</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"green"</span><span class="p">,</span><span class="w"> </span><span class="n">lty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">

</span><span class="c1"># lty = 2 = solid line  </span><span class="w">
</span><span class="n">lines</span><span class="p">(</span><span class="n">cum_inc_share_us80</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="n">lty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">

</span><span class="n">lines</span><span class="p">(</span><span class="n">cum_inc_share_us14</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"orange"</span><span class="p">,</span><span class="w"> 
  </span><span class="n">lty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">  

</span><span class="n">title</span><span class="p">(</span><span class="s2">"Lorenz curves, China and the US (1980 and 2014)"</span><span class="p">)</span><span class="w">  

</span><span class="n">legend</span><span class="p">(</span><span class="s2">"topleft"</span><span class="p">,</span><span class="w"> </span><span class="n">lty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="o">:</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">cex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1.2</span><span class="p">,</span><span class="w"> </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> 
  </span><span class="nf">c</span><span class="p">(</span><span class="s2">"China, 1980"</span><span class="p">,</span><span class="w"> </span><span class="s2">"China, 2014"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"US, 1980"</span><span class="p">,</span><span class="w"> </span><span class="s2">"US, 2014"</span><span class="p">),</span><span class="w">  
  </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> </span><span class="s2">"green"</span><span class="p">,</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="s2">"orange"</span><span class="p">))</span><span class="w">  
</span></code></pre></div>  </div>
  <div class="figure figure-no-source" id="figure-5-2">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/r-figure-05-02.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-02.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-02-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-02-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-02-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-02.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Lorenz curves, China and the US (1980 and 2014).
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-02.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-02-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-02-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-02-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-02.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Lorenz curves, China and the US (1980 and 2014).
" class="" />
        </a>
</div>
<p class="description">
Lorenz curves, China and the US (1980 and 2014).
</p>
<p class="caption">
<span class="figure-reference">Figure 5.2 </span>
Lorenz curves, China and the US (1980 and 2014).
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
  <p>As the chart shows, the income distribution has changed more clearly for China (from the blue to the green line) than for the US (from the orange to the red line).</p>
</blockquote>
<ol class="text-question keep-with-next">
  <li>Using your Lorenz curves:</li>
</ol>
<ul class="text-sub-question">
  <li>Compare the distribution of income across time for each country.</li>
</ul>
<ul class="text-sub-question">
  <li>Compare the distribution of income across countries for each year (1980 and 2014).</li>
</ul>
<ul class="text-sub-question">
  <li>Suggest some explanations for any similarities and differences you observe. (You may want to research your chosen countries to see if there were any changes in government policy, political events, or other factors that may affect the income distribution.)</li>
</ul>
<p class="keep-together">A rough way to compare income distributions is to use a summary measure such as the Gini coefficient. The Gini coefficient ranges from 0 (complete equality) to 1 (complete inequality). It is calculated by dividing the area between the Lorenz curve and the perfect equality line, by the total area underneath the perfect equality line. Intuitively, the further away the Lorenz curve is from the perfect equality line, the more unequal the income distribution is, and the higher the Gini coefficient will be.</p>
<p>To calculate the Gini coefficient you can either use a <a href="https://tinyco.re/8392848" class="show-url">Gini coefficient calculator</a>, or calculate it directly in R as shown in R walk-through 5.4.</p>
<ol class="text-question">
  <li>Calculate the Gini coefficient for each of your Lorenz curves. You should have four coefficients in total. Label each Lorenz curve with its corresponding Gini coefficient, and check that the coefficients are consistent with what you see in your charts.</li>
</ol>
<blockquote class="expandable-box">
  <h3 id="r-walk-through-54-calculating-gini-coefficients"><strong>R walk-through 5.4</strong> Calculating Gini coefficients</h3>
  <p>The Gini coefficient is graphically represented by dividing the area between the perfect equality line and the Lorenz curve by the total area under the perfect equality line (see <a href="https://tinyco.re/6569324" class="show-url">Section 5.9</a> of <em>Economy, Society, and Public Policy</em> for further details). You could calculate this area manually, by decomposing the area under the Lorenz curve into rectangles and triangles, but as with so many problems, someone else has already figured out how to do that and has provided R users with a package (called <code class="language-r highlighter-rouge"><span class="n">ineq</span></code>) that does this task for you. The function that calculates Gini coefficients from a vector of numbers is called <code class="language-r highlighter-rouge"><span class="n">Gini</span></code>, and we apply it to the income deciles from R walk-through 5.3 (<code class="language-r highlighter-rouge"><span class="n">decs_c80</span></code>, <code class="language-r highlighter-rouge"><span class="n">decs_c14</span></code>, <code class="language-r highlighter-rouge"><span class="n">decs_us80</span></code>, and <code class="language-r highlighter-rouge"><span class="n">decs_us14</span></code>).</p>
  <div class="language-r keep-together highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Load the ineq library</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ineq</span><span class="p">)</span><span class="w">

</span><span class="c1"># The decile mean incomes from R walk-through 5.3 are used.</span><span class="w">
</span><span class="n">g_c80</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Gini</span><span class="p">(</span><span class="n">decs_c80</span><span class="p">)</span><span class="w">
</span><span class="n">g_c14</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Gini</span><span class="p">(</span><span class="n">decs_c14</span><span class="p">)</span><span class="w">
</span><span class="n">g_us80</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Gini</span><span class="p">(</span><span class="n">decs_us80</span><span class="p">)</span><span class="w">
</span><span class="n">g_us14</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Gini</span><span class="p">(</span><span class="n">decs_us14</span><span class="p">)</span><span class="w">
</span><span class="n">paste</span><span class="p">(</span><span class="s2">"Gini coefficients"</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## [1] "Gini coefficients"</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">paste</span><span class="p">(</span><span class="s2">"China - 1980: "</span><span class="p">,</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">g_c80</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">),</span><span class="w"> 
  </span><span class="s2">", 2014: "</span><span class="p">,</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">g_c14</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">))</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## [1] "China - 1980: 0.29 , 2014: 0.51"</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">paste</span><span class="p">(</span><span class="s2">"United States - 1980: "</span><span class="p">,</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">g_us80</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">),</span><span class="w"> 
  </span><span class="s2">", 2014: "</span><span class="p">,</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">g_us14</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">))</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## [1] "United States - 1980: 0.34 , 2014: 0.4"</span><span class="w">
</span></code></pre></div>  </div>
  <p>Now we make the same line chart (simply copy and paste the code from <a href="#r-walk-through-53-drawing-lorenz-curves" class="show-page-number">R walk-through 5.3</a>, but use the <code class="language-r highlighter-rouge"><span class="n">text</span></code> function to label curves with their respective Gini coefficients. The two numbers in the <code class="language-r highlighter-rouge"><span class="n">text</span></code> function specify the coordinates (horizontal and vertical) where the text should be written (experiment for yourself to find the best place to put the labels), and we used the <code class="language-r highlighter-rouge"><span class="n">round</span></code> function to show the first three digits of the calculated Gini coefficients.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plot</span><span class="p">(</span><span class="n">cum_inc_share_c80</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"l"</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> </span><span class="n">lty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> 
  </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">xlab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Deciles"</span><span class="p">,</span><span class="w"> 
  </span><span class="n">ylab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Cumulative income share"</span><span class="p">)</span><span class="w">   

</span><span class="c1"># Add the perfect equality line</span><span class="w">
</span><span class="n">abline</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.1</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w"> </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">

</span><span class="c1"># lty = 1 = dashed line</span><span class="w">
</span><span class="n">lines</span><span class="p">(</span><span class="n">cum_inc_share_c14</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"green"</span><span class="p">,</span><span class="w"> </span><span class="n">lty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">

</span><span class="c1"># lty = 2 = solid line</span><span class="w">
</span><span class="n">lines</span><span class="p">(</span><span class="n">cum_inc_share_us80</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="n">lty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">

</span><span class="n">lines</span><span class="p">(</span><span class="n">cum_inc_share_us14</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"orange"</span><span class="p">,</span><span class="w"> </span><span class="n">lty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w">

</span><span class="n">title</span><span class="p">(</span><span class="s2">"Lorenz curves, China and the US (1980 and 2014)"</span><span class="p">)</span><span class="w">

</span><span class="n">legend</span><span class="p">(</span><span class="s2">"topleft"</span><span class="p">,</span><span class="w"> </span><span class="n">lty</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="o">:</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">lwd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">cex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1.2</span><span class="p">,</span><span class="w"> </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> 
  </span><span class="nf">c</span><span class="p">(</span><span class="s2">"China, 1980"</span><span class="p">,</span><span class="w"> </span><span class="s2">"China, 2014"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"US, 1980"</span><span class="p">,</span><span class="w"> </span><span class="s2">"US, 2014"</span><span class="p">),</span><span class="w">
  </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"blue"</span><span class="p">,</span><span class="w"> </span><span class="s2">"green"</span><span class="p">,</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="s2">"orange"</span><span class="p">))</span><span class="w">

</span><span class="n">text</span><span class="p">(</span><span class="m">8.5</span><span class="p">,</span><span class="w"> </span><span class="m">0.78</span><span class="p">,</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">g_c80</span><span class="p">,</span><span class="w"> </span><span class="n">digits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">))</span><span class="w">
</span><span class="n">text</span><span class="p">(</span><span class="m">9.4</span><span class="p">,</span><span class="w"> </span><span class="m">0.6</span><span class="p">,</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">g_c14</span><span class="p">,</span><span class="w"> </span><span class="n">digits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">))</span><span class="w">
</span><span class="n">text</span><span class="p">(</span><span class="m">5.7</span><span class="p">,</span><span class="w"> </span><span class="m">0.38</span><span class="p">,</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">g_us80</span><span class="p">,</span><span class="w"> </span><span class="n">digits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">))</span><span class="w">
</span><span class="n">text</span><span class="p">(</span><span class="m">6.4</span><span class="p">,</span><span class="w"> </span><span class="m">0.3</span><span class="p">,</span><span class="w"> </span><span class="nf">round</span><span class="p">(</span><span class="n">g_us14</span><span class="p">,</span><span class="w"> </span><span class="n">digits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">))</span><span class="w">
</span></code></pre></div>  </div>
  <div class="figure figure-no-source" id="figure-5-3">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/r-figure-05-03.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-03.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-03-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-03-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-03-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-03.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Lorenz curves, China and the US (1980 and 2014).
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-03.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-03-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-03-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-03-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-03.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Lorenz curves, China and the US (1980 and 2014).
" class="" />
        </a>
</div>
<p class="description">
Lorenz curves, China and the US (1980 and 2014).
</p>
<p class="caption">
<span class="figure-reference">Figure 5.3 </span>
Lorenz curves, China and the US (1980 and 2014).
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
  <p>The Gini coefficients for both countries have increased, confirming what we already saw from the Lorenz curves that in both countries the income distribution has become more unequal.</p>
</blockquote>
<blockquote class="expandable-box page-break-before">
  <h3 id="extension-r-walk-through-55-calculating-gini-coefficients-for-all-countries-and-all-years-using-a-loop"><strong>Extension R walk-through 5.5</strong> Calculating Gini coefficients for all countries and all years using a loop</h3>
  <p>In this extension walk-through, we show you how to calculate the Gini coefficient for all countries and years in your dataset.</p>
  <p>This sounds like a tedious task, and indeed if we were to use the same method as before it would be mind-numbing. However, we have a powerful programming language at hand, and this is the time to use it.</p>
  <p class="tighten-5">Here we use a very useful programming tool you may not have come across yet: loops. Loops are used to repeat a specified block of code. There are a few types of loop, and here we will use a ‘for’ loop, meaning that we ask R to apply the same code to each number or item in a specific list (i.e. repeat the code ‘for’ a list of numbers/items). Let’s start with a very simple case: printing the first 10 square numbers. In coding terms, we are printing the values for <code class="language-r highlighter-rouge"><span class="n">i</span><span class="o">^</span><span class="m">2</span></code> for the numbers <code class="language-r highlighter-rouge"><span class="n">i</span><span class="o">=</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p">,</span><span class="w"> </span><span class="m">10</span></code>.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">)){</span><span class="w">
  </span><span class="n">print</span><span class="p">(</span><span class="n">i</span><span class="o">^</span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## [1] 1</span><span class="w">
</span><span class="c1">## [1] 4</span><span class="w">
</span><span class="c1">## [1] 9</span><span class="w">
</span><span class="c1">## [1] 16</span><span class="w">
</span><span class="c1">## [1] 25</span><span class="w">
</span><span class="c1">## [1] 36</span><span class="w">
</span><span class="c1">## [1] 49</span><span class="w">
</span><span class="c1">## [1] 64</span><span class="w">
</span><span class="c1">## [1] 81</span><span class="w">
</span><span class="c1">## [1] 100</span><span class="w">
</span></code></pre></div>  </div>
  <p>In the above command, <code class="language-r highlighter-rouge"><span class="n">seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">)</span></code> creates a vector of numbers from 1 to 10 (1, 2, 3, …, 10). The command <code class="language-r highlighter-rouge"><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">))</span></code> defines the variable <code class="language-r highlighter-rouge"><span class="n">i</span></code> initially as 1, then performs all the commands that are between the curly brackets for each value of <code class="language-r highlighter-rouge"><span class="n">i</span></code> (typically these commands will involve the variable <code class="language-r highlighter-rouge"><span class="n">i</span></code>). Here our command prints the value of <code class="language-r highlighter-rouge"><span class="n">i</span><span class="o">^</span><span class="m">2</span></code> for each value of <code class="language-r highlighter-rouge"><span class="n">i</span></code>. Check that you understand the syntax above by modifying it to print only the first 5 square numbers, or adding 2 to the numbers from 1 to 10 (instead of squaring these numbers).</p>
  <p>Now we use loops to complete our task. We begin by creating a new variable in our dataset, <code class="language-r highlighter-rouge"><span class="n">gini</span></code>, which we initially set to 0 for all country-year combinations.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">decile_data</span><span class="o">$</span><span class="n">gini</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">0</span><span class="w">
</span></code></pre></div>  </div>
  <p>Now we use a loop to run through all the rows in our dataset (country-year combinations). For each row we will repeat the Gini coefficient calculation from R walk-through 5.4 and save the resulting value in the <code class="language-r highlighter-rouge"><span class="n">gini</span></code> variable we created.</p>
  <div class="language-r keep-together highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Give us the number of rows in decile_data</span><span class="w">
</span><span class="n">noc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">decile_data</span><span class="p">)</span><span class="w">

</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">noc</span><span class="p">)){</span><span class="w">
  </span><span class="c1"># Go to Row I to get the decile data</span><span class="w">
  </span><span class="n">decs_i</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">unlist</span><span class="p">(</span><span class="n">decile_data</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="o">:</span><span class="m">12</span><span class="p">])</span><span class="w">
  </span><span class="n">decile_data</span><span class="o">$</span><span class="n">gini</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">Gini</span><span class="p">(</span><span class="n">decs_i</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>  </div>
  <p>With this code, we calculated 4,799 Gini coefficients without having to manually run the same command 4,799 times. We now look at some summary measures for the <code class="language-r highlighter-rouge"><span class="n">gini</span></code> variable.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">summary</span><span class="p">(</span><span class="n">decile_data</span><span class="o">$</span><span class="n">gini</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## Min.   1st Qu. Median Mean   3rd Qu. Max.</span><span class="w">
</span><span class="c1">## 0.1791 0.3470  0.4814 0.4617 0.5700  0.7386</span><span class="w">
</span></code></pre></div>  </div>
  <p>The average Gini coefficient is 0.46, the maximum is 0.74, and the minimum 0.18. Let’s look at these extreme cases.</p>
  <p>First we will look at the extremely equal income distributions (those with a Gini coefficient smaller than 0.20):</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">temp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="w">
  </span><span class="n">decile_data</span><span class="p">,</span><span class="w"> </span><span class="n">decile_data</span><span class="o">$</span><span class="n">gini</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0.20</span><span class="p">,</span><span class="w"> 
  </span><span class="n">select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Country"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Year"</span><span class="p">,</span><span class="w"> </span><span class="s2">"gini"</span><span class="p">))</span><span class="w">
</span><span class="n">temp</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## # A tibble: 17 x 3</span><span class="w">
</span><span class="c1">##    Country          Year  gini</span><span class="w">
</span><span class="c1">##    &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;</span><span class="w">
</span><span class="c1">##  1 Bulgaria         1987 0.191</span><span class="w">
</span><span class="c1">##  2 Czech Republic   1985 0.195</span><span class="w">
</span><span class="c1">##  3 Czech Republic   1986 0.194</span><span class="w">
</span><span class="c1">##  4 Czech Republic   1987 0.192</span><span class="w">
</span><span class="c1">##  5 Czech Republic   1988 0.191</span><span class="w">
</span><span class="c1">##  6 Czech Republic   1989 0.194</span><span class="w">
</span><span class="c1">##  7 Czech Republic   1990 0.196</span><span class="w">
</span><span class="c1">##  8 Czech Republic   1991 0.199</span><span class="w">
</span><span class="c1">##  9 Slovak Republic  1985 0.195</span><span class="w">
</span><span class="c1">## 10 Slovak Republic  1986 0.194</span><span class="w">
</span><span class="c1">## 11 Slovak Republic  1987 0.193</span><span class="w">
</span><span class="c1">## 12 Slovak Republic  1988 0.192</span><span class="w">
</span><span class="c1">## 13 Slovak Republic  1989 0.193</span><span class="w">
</span><span class="c1">## 14 Slovak Republic  1990 0.194</span><span class="w">
</span><span class="c1">## 15 Slovak Republic  1991 0.195</span><span class="w">
</span><span class="c1">## 16 Slovak Republic  1992 0.196</span><span class="w">
</span><span class="c1">## 17 Slovak Republic  1993 0.179</span><span class="w">
</span></code></pre></div>  </div>
  <p>These correspond to eastern European countries before the fall of communism.</p>
  <p>Now the most unequal countries (those with a Gini coefficient larger than 0.73):</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">temp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="w">
  </span><span class="n">decile_data</span><span class="p">,</span><span class="w"> </span><span class="n">decile_data</span><span class="o">$</span><span class="n">gini</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0.73</span><span class="p">,</span><span class="w"> 
  </span><span class="n">select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Country"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Year"</span><span class="p">,</span><span class="w"> </span><span class="s2">"gini"</span><span class="p">))</span><span class="w">
</span><span class="n">temp</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## # A tibble: 27 x 3</span><span class="w">
</span><span class="c1">##    Country       Year  gini</span><span class="w">
</span><span class="c1">##    &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;</span><span class="w">
</span><span class="c1">##  1 Burkina Faso  1980 0.738</span><span class="w">
</span><span class="c1">##  2 Burkina Faso  1981 0.738</span><span class="w">
</span><span class="c1">##  3 Burkina Faso  1982 0.738</span><span class="w">
</span><span class="c1">##  4 Burkina Faso  1983 0.738</span><span class="w">
</span><span class="c1">##  5 Burkina Faso  1984 0.738</span><span class="w">
</span><span class="c1">##  6 Burkina Faso  1985 0.738</span><span class="w">
</span><span class="c1">##  7 Burkina Faso  1986 0.738</span><span class="w">
</span><span class="c1">##  8 Burkina Faso  1987 0.738</span><span class="w">
</span><span class="c1">##  9 Burkina Faso  1988 0.738</span><span class="w">
</span><span class="c1">## 10 Burkina Faso  1989 0.739</span><span class="w">
</span><span class="c1">## # ... with 17 more rows</span><span class="w">
</span></code></pre></div>  </div>
</blockquote>
<blockquote class="expandable-box">
  <h3 id="extension-r-walk-through-56-plotting-time-series-of-gini-coefficients-using-ggplot"><strong>Extension R walk-through 5.6</strong> Plotting time series of Gini coefficients, using ggplot</h3>
  <p>In this extension walk-through, we show you how to make time series plots (time on the horizontal axis, the variable of interest on the vertical axis) with Gini coefficients for a list of countries of your choice.</p>
  <p class="tighten-5">There are many ways to plot data in R, one being the standard plotting function (<code class="language-r highlighter-rouge"><span class="n">plot</span></code>) we used in previous walk-throughs. Another (and perhaps more beautiful) way is to use the <code class="language-r highlighter-rouge"><span class="n">ggplot</span></code> function, which is part of the <code class="language-r highlighter-rouge"><span class="n">tidyverse</span></code> package we loaded earlier. Our dataset is already in a format which the <code class="language-r highlighter-rouge"><span class="n">ggplot</span></code> function can easily use (the ‘long’ format, where each row corresponds to a different country-year combination).</p>
  <p>First we use the <code class="language-r highlighter-rouge"><span class="n">subset</span></code> function to select a small list of countries and save their data as <code class="language-r highlighter-rouge"><span class="n">temp_data</span></code>. As an example, we have chosen four anglophone countries: the UK, the US, Ireland, and Australia.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">temp_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="w">
  </span><span class="n">decile_data</span><span class="p">,</span><span class="w"> </span><span class="n">Country</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"United Kingdom"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"United States"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Ireland"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Australia"</span><span class="p">))</span><span class="w">
</span></code></pre></div>  </div>
  <p>Now we plot the data using <code class="language-r highlighter-rouge"><span class="n">ggplot</span></code>.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ggplot</span><span class="p">(</span><span class="n">temp_data</span><span class="p">,</span><span class="w"> 
  </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Year</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gini</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Country</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_line</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme_bw</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ylab</span><span class="p">(</span><span class="s2">"Gini"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="c1"># Add a title</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Gini coefficients for anglophone countries"</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="figure figure-no-source" id="figure-5-4">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/r-figure-05-04.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-04.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-04-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-04-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-04-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-04.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Time series plots of Gini coefficients for anglophone countries.
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-04.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-04-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-04-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-04-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-04.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Time series plots of Gini coefficients for anglophone countries.
" class="" />
        </a>
</div>
<p class="description">
Time series plots of Gini coefficients for anglophone countries.
</p>
<p class="caption">
<span class="figure-reference">Figure 5.4 </span>
Time series plots of Gini coefficients for anglophone countries.
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
  <p class="tighten-10">We asked the <code class="language-r highlighter-rouge"><span class="n">ggplot</span></code> function to use the <code class="language-r highlighter-rouge"><span class="n">temp_data</span></code> dataframe, with <code class="language-r highlighter-rouge"><span class="n">Year</span></code> on the horizontal axis (<code class="language-r highlighter-rouge"><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span></code>) and <code class="language-r highlighter-rouge"><span class="n">gini</span></code> on the vertical axis (<code class="language-r highlighter-rouge"><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span></code>). The <code class="language-r highlighter-rouge"><span class="n">color</span></code> option indicates which variable we use to separate the data (use a different line for each unique item in <code class="language-r highlighter-rouge"><span class="n">Country</span></code>). The first line of code sets up the chart, and the <code class="language-r highlighter-rouge"><span class="o">+</span><span class="w"> </span><span class="n">geom_line</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span></code> then instructs R to draw lines. (See what happens if you replace <code class="language-r highlighter-rouge"><span class="o">+</span><span class="w"> </span><span class="n">geom_line</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span></code> with <code class="language-r highlighter-rouge"><span class="o">+</span><span class="w"> </span><span class="n">geom_point</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span></code>.)</p>
  <p class="keep-together tighten-15"><code class="language-r highlighter-rouge"><span class="n">ggplot</span></code> assumes that the different lines you want to show are identified through the different values in one variable (here, the <code class="language-r highlighter-rouge"><span class="n">Country</span></code> variable). If your data is formatted differently, for example, if you have one variable for the Gini of each country (‘wide’ format), then in order to use <code class="language-r highlighter-rouge"><span class="n">ggplot</span></code> you will first have to transform the dataset into ‘long’ format. Doing so is beyond the scope of this task, however you can find a worked example online, such as <a href="https://tinyco.re/5093147" class="show-url">‘R TSplots’</a>.<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup> Project 4 also explains how to transform data between ‘wide’ and ‘long’ formats.</p>
  <p>The <code class="language-r highlighter-rouge"><span class="n">ggplot</span></code> package is extremely powerful, and if you want to produce a variety of different charts, you may want to read more about that package, for example, see <a href="https://tinyco.re/8185055" class="show-url">a Harvard R tutorial</a> or <a href="https://tinyco.re/9652072" class="show-url">an R statistics tutorial</a> for great examples that include code.</p>
</blockquote>
<p>Now we will look at other measures of income inequality and see how they can be used along with the Gini coefficient to summarize a country’s income distribution. Instead of summarizing the entire income distribution like the Gini coefficient does, we can take the ratio of incomes at two points in the distribution. For example, the 90/10 ratio takes the ratio of the top 10% of incomes (Decile 10) to the lowest 10% of incomes (Decile 1). A 90/10 ratio of 5 means that the richest 10% earns 5 times more than the poorest 10%. The higher the ratio, the higher the inequality between these two points in the distribution.</p>
<ol class="text-question">
  <li>
    <p>Look at the following ratios:</p>
    <ul>
      <li>90/10 ratio = the ratio of Decile 10 income to Decile 1 income</li>
      <li>90/50 ratio = the ratio of Decile 10 income to Decile 5 income (the median)</li>
      <li>50/10 ratio = the ratio of Decile 5 income (the median) to Decile 1 income.</li>
    </ul>
  </li>
</ol>
<ul class="text-sub-question">
  <li>For each of these ratios, explain why policymakers might want to compare these two deciles in the income distribution.</li>
</ul>
<ul class="text-sub-question">
  <li>What kinds of policies or events could affect these ratios?</li>
</ul>
<p>We will now compare these summary measures (ratios and the Gini coefficient) for a larger group of countries, using OECD data. The OECD has annual data for different ratio measures of income inequality for 42 countries around the world, and has an interactive chart function that plots them for you.</p>
<p>Go to the <a href="https://tinyco.re/5057087" class="show-url">OECD website</a> to access the data. You will see a chart similar to Figure 5.5, showing data for 2015. The countries are ranked from smallest to largest Gini coefficient on the horizontal axis, and the vertical axis gives the Gini coefficient.</p>
<ol class="text-question">
  <li>Compare summary measures of inequality for all available countries on the OECD website:</li>
</ol>
<ul class="text-sub-question">
  <li>Plot the data for the ratio measures by changing the variable selected in the drop-down menu ‘Gini coefficient’. The three ratio measures we looked at previously are called ‘Interdecile P90/P10’, ‘Interdecile P90/P50’, and ‘Interdecile P50/P10’, respectively. (If you click the ‘Compare variables’ option, you can plot more than one variable (except the Gini coefficient) on the same chart.)</li>
</ul>
<ul class="text-sub-question">
  <li>For each measure, give an intuitive explanation of how it is measured and what it tells us about income inequality. (For example: What do the larger and smaller values of this measure mean? Which parts of the income distribution does this measure use?)</li>
</ul>
<ul class="text-sub-question">
  <li>Do countries that rank highly on the Gini coefficient also rank highly on the ratio measures, or do the rankings change depending on the measure used? Based on your answers, explain why it is important to look at more than one summary measure of a distribution.</li>
</ul>
<div class="figure figure-no-source" id="figure-5-5">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/figure-05-04.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/figure-05-04.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/figure-05-04-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/figure-05-04-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/figure-05-04-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/figure-05-04.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="OECD countries ranked according to their Gini coefficient (2015).
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/figure-05-04.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/figure-05-04-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/figure-05-04-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/figure-05-04-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/figure-05-04.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="OECD countries ranked according to their Gini coefficient (2015).
" class="" />
        </a>
</div>
<p class="description">
OECD countries ranked according to their Gini coefficient (2015).
</p>
<p class="caption">
<span class="figure-reference">Figure 5.5 </span>
OECD countries ranked according to their Gini coefficient (2015).
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
<p>The Gini coefficient and the ratios we have used are common measures of inequality, but there are other ways to measure income inequality.</p>
<ol class="text-question">
  <li>Go to the <a href="https://tinyco.re/6096146" class="show-url">Chartbook of Economic Inequality</a>, which contains five measures of income inequality, including the Gini coefficient, for 25 countries around the world.</li>
</ol>
<ul class="text-sub-question keep-together">
  <li>Choose two measures of income inequality that you find interesting (excluding the Gini coefficient). For each measure, give an intuitive explanation of how it is measured and what we can learn about income inequality from it. You may find the page on <a href="https://tinyco.re/8320700" class="show-url">‘Inequality measures’</a> helpful. (For example: What do larger or smaller values of this measure mean? Which parts of the income distribution does this measure use?)</li>
</ul>
<ul class="text-sub-question">
  <li>On the Chartbook of Economic Inequality main page, charts of these measures are available for all countries shown in green on the map. For two countries of your choice, look at the charts and explain what these measures tell us about inequality in those countries.</li>
</ul>
<h2 id="part-52-measuring-other-kinds-of-inequality">Part 5.2 Measuring other kinds of inequality</h2>
<blockquote class="box fixed">
  <h3 id="learning-objectives-for-this-part-1">Learning objectives for this part</h3>
  <ul>
    <li>research other dimensions of inequality and how they are measured.</li>
  </ul>
</blockquote>
<p>There are many ways to measure income inequality, but income inequality is only one dimension of inequality within a country. To get a more complete picture of inequality within a country, we need to look at other areas in which there may be inequality in outcomes. We will explore two particular areas:</p>
<ul>
  <li>health inequality</li>
  <li>gender inequality in education.</li>
</ul>
<p>First, we will look at how researchers have measured inequality in health-related outcomes. Besides income, health is an important aspect of wellbeing, partly because it determines how long an individual will be alive to enjoy his or her income. If two people had the same annual income throughout their lives, but one person had a much shorter life than the other, we might say that the distribution of wellbeing is unequal, despite annual incomes being equal.</p>
<p>As with income, inequality in life expectancy can be measured using a Gini coefficient. In the study <a href="https://tinyco.re/8593466" class="show-url">‘Mortality inequality’</a>, researcher Sam Peltzman (2009) estimated Gini coefficients for life expectancy based on the distribution of total years lived (life-years) across people born in a given year (birth cohort). If everybody born in a given year lived the same number of years, then the total years lived would be divided equally among these people (perfect equality). If a few people lived very long lives but everybody else lived very short lives, then there would be a high degree of inequality (Gini coefficient close to 1).</p>
<p>We will now look at mortality inequality Gini coefficients for 10 countries around the world. First, download the data:</p>
<ul>
  <li>Go to the <a href="https://tinyco.re/2668264" class="show-url">‘Health Inequality’ section</a> of the Our World in Data website. In Section 1.1 (Mortality inequality), click the ‘Data’ button at the bottom of the chart shown.</li>
  <li>Click the blue button that appears to download the data in csv format.</li>
</ul>
<p>Import the data into R and investigate the structure of the data as explained in R walk-through 5.7.</p>
<blockquote class="expandable-box page-break-before">
  <h3 id="r-walk-through-57-importing-csv-files-into-r"><strong>R walk-through 5.7</strong> Importing <code class="language-r highlighter-rouge"><span class="n">.csv</span></code> files into R</h3>
  <p>Before importing, make sure the .csv file is saved in your working directory. After importing (using the <code class="language-r highlighter-rouge"><span class="n">read.csv</span></code> function), use the <code class="language-r highlighter-rouge"><span class="n">str</span></code> function to check that the data was imported correctly.</p>
  <div class="language-r print-wrap-words highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Open the csv file from the working directory</span><span class="w">
</span><span class="n">health_in</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"
  inequality-of-life-as-measured-by-mortality-gini-coefficient-1742-2002.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">str</span><span class="p">(</span><span class="n">health_in</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## 'data.frame':  320 obs. of 4 variables:</span><span class="w">
</span><span class="c1">##  $ Entity    : Factor w/ 10 levels "Brazil","England and Wales",..: 1 1 1 1 1 1 1 1 1 1 ...</span><span class="w">
</span><span class="c1">##  $ Code      : Factor w/ 10 levels "","BRA","DEU",..: 2 2 2 2 2 2 2 2 2 2 ...</span><span class="w">
</span><span class="c1">##  $ Year      : int  1892 1897 1902 1907 1912 1917 1922 1927 1932 1937 ...</span><span class="w">
</span><span class="c1">##  $ X.percent.: num  0.566 0.557 0.547 0.482 0.494 ...</span><span class="w">
</span></code></pre></div>  </div>
  <p>The variable <code class="language-r highlighter-rouge"><span class="n">Entity</span></code> is the country and the variable <code class="language-r highlighter-rouge"><span class="n">X.percent</span></code> is the health Gini. Let’s change these variable names (to <code class="language-r highlighter-rouge"><span class="n">Country</span></code> and <code class="language-r highlighter-rouge"><span class="n">Health</span></code>, respectively) to clarify what they actually refer to, which will help when writing code (and if we go back to read this code at a later date).</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Country is the first variable.</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">health_in</span><span class="p">)[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Country"</span><span class="w">
</span><span class="c1"># Health Gini is the fourth variable.</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">health_in</span><span class="p">)[</span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"HGini"</span><span class="w">
</span></code></pre></div>  </div>
  <p>There is another quirk in the data that you may not have noticed in this initial data inspection: All countries have a short code (<code class="language-r highlighter-rouge"><span class="n">Code</span></code>), except for England and Wales (currently blank <code class="language-r highlighter-rouge"><span class="s2">""</span></code> in the dataframe). As <code class="language-r highlighter-rouge"><span class="n">Code</span></code> is a factor variable, we use the <code class="language-r highlighter-rouge"><span class="n">levels</span></code> function to change the blanks to <code class="language-r highlighter-rouge"><span class="s2">"ENW"</span></code>.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">levels</span><span class="p">(</span><span class="n">health_in</span><span class="o">$</span><span class="n">Code</span><span class="p">)[</span><span class="n">levels</span><span class="p">(</span><span class="n">health_in</span><span class="o">$</span><span class="n">Code</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">""</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> 
  </span><span class="s2">"ENW"</span><span class="w">
</span></code></pre></div>  </div>
  <blockquote class="box fixed">
    <h3 id="tip">Tip</h3>
    <p>The way this code works may seem a little mysterious, and you may find it difficult to remember the code for this step. However, an Internet search for ‘R renaming one factor level’ (recall that <code class="language-r highlighter-rouge"><span class="n">Code</span></code> is a factor variable) will show you many ways to achieve this (including the one shown above). Often you will find answers on <a href="https://stackoverflow.com/">stackoverflow.com</a>, where experienced coders provide useful help.</p>
  </blockquote>
</blockquote>
<ol class="text-question">
  <li>Using the mortality inequality data:</li>
</ol>
<ul class="text-sub-question">
  <li>Plot all the countries on the same line chart, with Gini coefficient on the vertical axis and year (1952–2002 only) on the horizontal axis. Make sure to include a legend showing country names, and label the axes appropriately.</li>
</ul>
<ul class="text-sub-question">
  <li>Describe any general patterns in mortality inequality over time, as well as any similarities and differences between countries.</li>
</ul>
<blockquote class="expandable-box">
  <h3 id="r-walk-through-58-creating-line-graphs-with-ggplot"><strong>R walk-through 5.8</strong> Creating line graphs with <code class="language-r highlighter-rouge"><span class="n">ggplot</span></code></h3>
  <p>As shown in R walk-through 5.7, the data is already formatted so that we can use <code class="language-r highlighter-rouge"><span class="n">ggplot</span></code> directly (in ‘long’ format), in other words we have only one variable for the mortality Gini (<code class="language-r highlighter-rouge"><span class="n">HGini</span></code>), and we can separate the data by country using one variable (<code class="language-r highlighter-rouge"><span class="n">Country</span></code>).</p>
  <p>Most of the code below is similar to our use of <code class="language-r highlighter-rouge"><span class="n">ggplot</span></code> in previous walk-throughs, though this time we added the option <code class="language-r highlighter-rouge"><span class="n">labs</span></code> to change the vertical axis label (<code class="language-r highlighter-rouge"><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span></code>) and the option <code class="language-r highlighter-rouge"><span class="n">scale_color_brewer</span></code> to change the colour palette (to clearly differentiate the lines for each country).</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Select all data after 1951</span><span class="w">
</span><span class="n">temp_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">health_in</span><span class="p">,</span><span class="w"> </span><span class="n">Year</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">1951</span><span class="p">)</span><span class="w">

</span><span class="n">ggplot</span><span class="p">(</span><span class="n">temp_data</span><span class="p">,</span><span class="w"> 
  </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Year</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HGini</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Country</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_line</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Mortality inequality Gini coefficient"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="c1"># Change the colour palette</span><span class="w">
  </span><span class="n">scale_color_brewer</span><span class="p">(</span><span class="n">palette</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Paired"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme_bw</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="c1"># Add a title</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Mortality inequalities"</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="figure figure-no-source" id="figure-5-6">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/r-figure-05-06.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-06.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-06-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-06-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-06-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-06.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Mortality inequality Gini coefficients (1952–2002).
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-06.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-06-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-06-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-06-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-06.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Mortality inequality Gini coefficients (1952–2002).
" class="" />
        </a>
</div>
<p class="description">
Mortality inequality Gini coefficients (1952–2002).
</p>
<p class="caption">
<span class="figure-reference">Figure 5.6 </span>
Mortality inequality Gini coefficients (1952–2002).
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
</blockquote>
<ol class="text-question">
  <li>Now compare the Gini coefficients in the first year of your line chart (1952) with the last year (2002).</li>
</ol>
<ul class="text-sub-question">
  <li>For the year 1952, sort the countries according to their mortality inequality Gini coefficient from smallest to largest. Plot a column chart showing these Gini coefficients on the vertical axis, and country on the horizontal axis.</li>
</ul>
<ul class="text-sub-question">
  <li>Repeat Question 2<em>(a)</em> for the year 2002.</li>
</ul>
<ul class="text-sub-question">
  <li>Comparing your charts for 1952 and 2002, have the rankings between countries changed? Suggest some explanations for any observed changes. (You may want to do some additional research, for example, look at the healthcare systems of these countries.)</li>
</ul>
<blockquote class="expandable-box page-break-before">
  <h3 id="r-walk-through-59-drawing-a-column-chart-with-sorted-values"><strong>R walk-through 5.9</strong> Drawing a column chart with sorted values</h3>
  <h4 class="add-1" id="plot-a-column-chart-for-1952">Plot a column chart for 1952</h4>
  <p>First we use <code class="language-r highlighter-rouge"><span class="n">subset</span></code> to extract the data for 1952 only, and store it in a temporary dataset (<code class="language-r highlighter-rouge"><span class="n">tempdata</span></code>).</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Select all data for 1952</span><span class="w">
</span><span class="n">temp_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">health_in</span><span class="p">,</span><span class="w"> </span><span class="n">Year</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1952</span><span class="p">)</span><span class="w">

</span><span class="c1"># Reorder rows in temp_data by the values of HGini</span><span class="w">
</span><span class="n">temp_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">temp_data</span><span class="p">[</span><span class="n">order</span><span class="p">(</span><span class="n">temp_data</span><span class="o">$</span><span class="n">HGini</span><span class="p">),</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="n">temp_data</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##               Country Code Year     HGini</span><span class="w">
</span><span class="c1">## 279            Sweden  SWE 1952 0.1194045</span><span class="w">
</span><span class="c1">## 46  England and Wales  ENW 1952 0.1319542</span><span class="w">
</span><span class="c1">## 310     United States  USA 1952 0.1471329</span><span class="w">
</span><span class="c1">## 138           Germany  DEU 1952 0.1572112</span><span class="w">
</span><span class="c1">## 86             France  FRA 1952 0.1605238</span><span class="w">
</span><span class="c1">## 228             Spain  ESP 1952 0.1985371</span><span class="w">
</span><span class="c1">## 184             Japan  JPN 1952 0.2021728</span><span class="w">
</span><span class="c1">## 206            Russia  RUS 1952 0.2237161</span><span class="w">
</span><span class="c1">## 161             India  IND 1952 0.3978703</span><span class="w">
</span><span class="c1">## 13             Brazil  BRA 1952 0.4103805</span><span class="w">
</span></code></pre></div>  </div>
  <p>The rows are now ordered according to <code class="language-r highlighter-rouge"><span class="n">HGini</span></code>, in ascending order. Let’s use <code class="language-r highlighter-rouge"><span class="n">ggplot</span></code> again.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ggplot</span><span class="p">(</span><span class="n">temp_data</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Code</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HGini</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"identity"</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.5</span><span class="p">,</span><span class="w"> 
    </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"tomato3"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme_bw</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Mortality Gini coefficients (1952)"</span><span class="p">,</span><span class="w">
    </span><span class="n">caption</span><span class="w"> </span><span class="o">=</span><span class="w"> 
      </span><span class="s2">"source: ourworldindata.org/health-inequality"</span><span class="p">,</span><span class="w">
    </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Mortality inequality Gini coefficient"</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="figure figure-no-source" id="figure-5-7">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/r-figure-05-07.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-07.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-07-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-07-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-07-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-07.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Mortality Gini coefficients (1952).
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-07.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-07-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-07-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-07-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-07.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Mortality Gini coefficients (1952).
" class="" />
        </a>
</div>
<p class="description">
Mortality Gini coefficients (1952).
</p>
<p class="caption">
<span class="figure-reference">Figure 5.7 </span>
Mortality Gini coefficients (1952).
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
  <p>Unfortunately, the columns are not ordered correctly, because when the horizontal axis variable (here, <code class="language-r highlighter-rouge"><span class="n">Code</span></code>) is a factor, then <code class="language-r highlighter-rouge"><span class="n">ggplot</span></code> uses the ordering of the factor levels, which we can see by using the <code class="language-r highlighter-rouge"><span class="n">levels</span></code> function:</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">levels</span><span class="p">(</span><span class="n">temp_data</span><span class="o">$</span><span class="n">Code</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## [1] "ENW" "BRA" "DEU" "ESP" "FRA" "IND" "JPN" "RUS" "SWE" "USA"</span><span class="w">
</span></code></pre></div>  </div>
  <p class="tighten-16"><a href="https://tinyco.re/1992106" class="show-url">A blog post</a> from <em>Data Se</em> provides the following code for ‘R geom_bar change order’, and uses the <code class="language-r highlighter-rouge"><span class="n">reorder</span></code> function to reorder the horizontal axis variable (<code class="language-r highlighter-rouge"><span class="n">Code</span></code>) according to the <code class="language-r highlighter-rouge"><span class="n">HGini</span></code> value.</p>
  <div class="language-r keep-together highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ggplot</span><span class="p">(</span><span class="n">temp_data</span><span class="p">,</span><span class="w"> 
  </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reorder</span><span class="p">(</span><span class="n">Code</span><span class="p">,</span><span class="w"> </span><span class="n">HGini</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HGini</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"identity"</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.5</span><span class="p">,</span><span class="w"> 
    </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"tomato3"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">coord_cartesian</span><span class="p">(</span><span class="n">ylim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0.45</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme_bw</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Mortality Gini coefficients (1952)"</span><span class="p">,</span><span class="w"> 
    </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Country"</span><span class="p">,</span><span class="w"> 
    </span><span class="n">caption</span><span class="w"> </span><span class="o">=</span><span class="w"> 
      </span><span class="s2">"source: ourworldindata.org/health-inequality"</span><span class="p">,</span><span class="w">
    </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Mortality inequality Gini coefficient"</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="figure figure-no-source" id="figure-5-8">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/r-figure-05-08.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-08.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-08-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-08-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-08-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-08.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Mortality Gini coefficients (1952).
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-08.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-08-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-08-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-08-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-08.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Mortality Gini coefficients (1952).
" class="" />
        </a>
</div>
<p class="description">
Mortality Gini coefficients (1952).
</p>
<p class="caption">
<span class="figure-reference">Figure 5.8 </span>
Mortality Gini coefficients (1952).
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
  <h4 id="plot-a-column-chart-for-2002">Plot a column chart for 2002</h4>
  <p>We want to compare this ranking with the ranking of 2002. First we extract the relevant data again.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Select all data for 2002 </span><span class="w">
</span><span class="n">temp_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">health_in</span><span class="p">,</span><span class="w"> </span><span class="n">Year</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2002</span><span class="p">)</span><span class="w">

</span><span class="n">ggplot</span><span class="p">(</span><span class="n">temp_data</span><span class="p">,</span><span class="w"> 
  </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reorder</span><span class="p">(</span><span class="n">Code</span><span class="p">,</span><span class="w"> </span><span class="n">HGini</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HGini</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">  
  </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"identity"</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.5</span><span class="p">,</span><span class="w"> 
    </span><span class="n">ylim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0.45</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"tomato3"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">  
  </span><span class="c1"># Adjust vertical axis scale for comparability with 1952</span><span class="w">
  </span><span class="n">coord_cartesian</span><span class="p">(</span><span class="n">ylim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0.45</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme_bw</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">  
  </span><span class="n">labs</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Mortality Gini coefficients (2002)"</span><span class="p">,</span><span class="w"> 
    </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Country"</span><span class="p">,</span><span class="w">  
    </span><span class="n">caption</span><span class="w"> </span><span class="o">=</span><span class="w"> 
      </span><span class="s2">"source: ourworldindata.org/health-inequality"</span><span class="p">,</span><span class="w">
    </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Mortality inequality Gini coefficient"</span><span class="p">)</span><span class="w">   
</span></code></pre></div>  </div>
  <div class="figure figure-no-source" id="figure-5-9">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/r-figure-05-09.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-09.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-09-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-09-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-09-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-09.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Mortality Gini coefficients (2002).
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-09.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-09-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-09-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-09-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-09.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Mortality Gini coefficients (2002).
" class="" />
        </a>
</div>
<p class="description">
Mortality Gini coefficients (2002).
</p>
<p class="caption">
<span class="figure-reference">Figure 5.9 </span>
Mortality Gini coefficients (2002).
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
  <p>It is fairly easy to plot the data for both years in the same chart, by extracting both years into the same temporary dataset.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Select all data for 1952 and 2002</span><span class="w">
</span><span class="n">temp_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">health_in</span><span class="p">,</span><span class="w"> </span><span class="n">Year</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"1952"</span><span class="p">,</span><span class="w"> </span><span class="s2">"2002"</span><span class="p">))</span><span class="w">
</span><span class="n">temp_data</span><span class="o">$</span><span class="n">Year</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">factor</span><span class="p">(</span><span class="n">temp_data</span><span class="o">$</span><span class="n">Year</span><span class="p">)</span><span class="w">

</span><span class="n">ggplot</span><span class="p">(</span><span class="n">temp_data</span><span class="p">,</span><span class="w"> 
  </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reorder</span><span class="p">(</span><span class="n">Code</span><span class="p">,</span><span class="w"> </span><span class="n">HGini</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HGini</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Year</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">"dodge"</span><span class="p">,</span><span class="w"> </span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"identity"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme_bw</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="w">
    </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Mortality Gini coefficients (1952 and 2002)"</span><span class="p">,</span><span class="w"> 
    </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Country"</span><span class="p">,</span><span class="w">
    </span><span class="n">caption</span><span class="w"> </span><span class="o">=</span><span class="w"> 
      </span><span class="s2">"source: ourworldindata.org/health-inequality"</span><span class="p">,</span><span class="w">
    </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Mortality inequality Gini coefficient"</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="figure figure-no-source" id="figure-5-10">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/r-figure-05-10.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-10.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-10-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-10-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-10-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-10.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Mortality Gini coefficients (1952 and 2002).
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-10.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-10-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-10-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-10-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-10.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Mortality Gini coefficients (1952 and 2002).
" class="" />
        </a>
</div>
<p class="description">
Mortality Gini coefficients (1952 and 2002).
</p>
<p class="caption">
<span class="figure-reference">Figure 5.10 </span>
Mortality Gini coefficients (1952 and 2002).
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
  <p>Now the country ordering is in terms of the average HGini, rather than HGini in 1952 (which might have made comparisons easier).</p>
</blockquote>
<p><em>Note:</em> Questions 3 and 4 can be done independently of each other.</p>
<p>Other measures of health inequality, such as those used by the World Health Organization (WHO), are based on access to healthcare, affordability of healthcare, and quality of living conditions. Choose one of the following measures of health inequality to answer Question 3:</p>
<ul>
  <li>access to essential medicines</li>
  <li>basic hospital access</li>
  <li>composite coverage index.</li>
</ul>
<p>The composite coverage index is a weighted score of coverage for eight different types of healthcare.</p>
<p>To download the data for your chosen measure:</p>
<ul>
  <li>If you choose to look at either the access to essential medicines or the basic hospital access measure, go to the WHO’s <a href="https://tinyco.re/9304620" class="show-url">Universal Health Coverage Data Portal</a>, click on the tab ‘Explore UHC Indicators’, and select your chosen measure.
    <ul class="list-nospace-web">
      <li>A drop-down menu with three buttons will appear: ‘Map’ (or ‘Graph’) shows a visual description of the data, ‘Data’ contains the data files, and ‘Metadata’ contains information about your chosen measure.</li>
      <li>Click on the ‘Data’ button, then select ‘CSV table’ from the ‘Download complete data set as’ list.</li>
    </ul>
  </li>
  <li>If you choose to look at the composite coverage index measure, go to WHO’s <a href="https://tinyco.re/3968368" class="show-url">Global Health Observatory data repository</a>. The index is given for subgroups of the population, by economic status, education, and place of residence. Choose one of these categories, and download the data by clicking ‘CSV table’ from the ‘Download complete data set as’ list. You can read further information about this index in the WHO’s <a href="https://tinyco.re/5693881" class="show-url">technical notes</a>.</li>
</ul>
<ol class="text-question">
  <li>For your chosen measure:</li>
</ol>
<ul class="text-sub-question">
  <li>Explain how it is constructed and what outcomes it assesses.</li>
</ul>
<ul class="text-sub-question">
  <li>Create an appropriate chart to summarize the data for all available countries. (You can replicate a chart shown on the website or draw a similar chart.)</li>
</ul>
<ul class="text-sub-question">
  <li>Explain what your chart shows about health inequality within and between countries, and discuss the limitations of using this measure (for example, measurement issues or other aspects of inequality that this measure ignores).</li>
</ul>
<blockquote class="expandable-box">
  <h3 id="r-walk-through-510-drawing-a-column-chart-with-sorted-values"><strong>R walk-through 5.10</strong> Drawing a column chart with sorted values</h3>
  <p>For this walk-through, we downloaded the ‘access to essential medicines’ data, as explained above. Here we saved it as <code class="language-r highlighter-rouge"><span class="n">WHO</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">essential</span><span class="w"> </span><span class="n">medicines.csv</span></code>. Looking at the spreadsheet in Excel, you can see that the actual data starts in row three, meaning there are two header rows. So let’s <code class="language-r highlighter-rouge"><span class="n">skip</span></code> the first row when uploading it.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">med_access</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="w">
  </span><span class="s2">"WHO access to essential medicines.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">skip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">
</span><span class="n">str</span><span class="p">(</span><span class="n">med_access</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## 'data.frame':  38 obs. of 3 variables:</span><span class="w">
</span><span class="c1">##  $ Country     : Factor w/ 38 levels "Afghanistan",..: 1 2 3 4 5 6 7 8 9 10 ...</span><span class="w">
</span><span class="c1">##  $ X2007.2013  : num  94 42.9 86.7 76.7 72.1 58.3 13.3 90.7 31.3 33.3 ...</span><span class="w">
</span><span class="c1">##  $ X2007.2013.1: num  81.1 43.2 31.9 0 87.1 46.7 15.5 86.7 21.2 100 ...</span><span class="w">
</span></code></pre></div>  </div>
  <p>Using the <code class="language-r highlighter-rouge"><span class="n">str</span></code> function to inspect the dataset, you can see that the second and third variables have lost their labels during the import. From the spreadsheet you know that they are:</p>
  <ul>
    <li>median availability of selected generic medicines (%) – Private</li>
    <li>median availability of selected generic medicines (%) – Public.</li>
  </ul>
  <p>Let’s change the names of these variables (to <code class="language-r highlighter-rouge"><span class="n">Private_Access</span></code> and <code class="language-r highlighter-rouge"><span class="n">Public_Access</span></code> respectively) to make working with them easier:</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">names</span><span class="p">(</span><span class="n">med_access</span><span class="p">)[</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Private_Access"</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">med_access</span><span class="p">)[</span><span class="m">3</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"Public_Access"</span><span class="w">
</span></code></pre></div>  </div>
  <p class="keep-with-next">To find details about these variables, click the ‘Metadata’ button on the website to find the following explanation (under ‘Method of measurement’):</p>
  <blockquote>
    <p>A standard methodology has been developed by WHO and Health Action International (HAI). Data on the availability of a specific list of medicines are collected in at least four geographic or administrative areas in a sample of medicine dispensing points. Availability is reported as the percentage of medicine outlets where a medicine was found on the day of the survey.</p>
  </blockquote>
  <p>Before we produce charts of the data, we shall look at some summary measures of the access variable (<code class="language-r highlighter-rouge"><span class="n">med_access</span></code>).</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">summary</span><span class="p">(</span><span class="n">med_access</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##                              Country   Private_Access   Public_Access   </span><span class="w">
</span><span class="c1">##  Afghanistan                     : 1   Min.   :  2.80   Min.   :  0.00  </span><span class="w">
</span><span class="c1">##  Bahamas                         : 1   1st Qu.: 54.62   1st Qu.: 39.67  </span><span class="w">
</span><span class="c1">##  Bolivia (Plurinational State of): 1   Median : 70.15   Median : 55.95  </span><span class="w">
</span><span class="c1">##  Brazil                          : 1   Mean   : 65.97   Mean   : 58.25  </span><span class="w">
</span><span class="c1">##  Burkina Faso                    : 1   3rd Qu.: 86.70   3rd Qu.: 82.50  </span><span class="w">
</span><span class="c1">##  Burundi                         : 1   Max.   :100.00   Max.   :100.00  </span><span class="w">
</span><span class="c1">##  (Other)                         :32                    NA's   :2</span><span class="w">
</span></code></pre></div>  </div>
  <p>On average, private sector patients have better access to essential medication.</p>
  <p class="tighten-15">From the summary statistics for the <code class="language-r highlighter-rouge"><span class="n">Public_Access</span></code> variable, you can see that there are two missing observations (<code class="language-r highlighter-rouge"><span class="kc">NA</span></code>). Here, we will keep these observations because leaving them in doesn’t affect the following analysis.</p>
  <div class="language-r keep-with-next highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">med_access</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">med_access</span><span class="p">[</span><span class="n">complete.cases</span><span class="p">(</span><span class="n">med_access</span><span class="p">),</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></code></pre></div>  </div>
  <p class="keep-together">There are a number of interesting aspects to look at. We shall produce a bar chart comparing the private and public access in countries, ordered according to values of private access (largest to smallest). First, we need to reformat the data into ‘long’ format (so there is a single variable containing all the values we want to plot), then use the <code class="language-r highlighter-rouge"><span class="n">ggplot</span></code> function to make the chart.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Reorder by values of private access (largest to smallest)</span><span class="w">
</span><span class="n">med_access</span><span class="o">$</span><span class="n">Country</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">reorder</span><span class="p">(</span><span class="w">
  </span><span class="n">med_access</span><span class="o">$</span><span class="n">Country</span><span class="p">,</span><span class="w"> </span><span class="n">med_access</span><span class="o">$</span><span class="n">Private_Access</span><span class="p">)</span><span class="w"> 

</span><span class="c1"># This is required for the melt function.</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">reshape2</span><span class="p">)</span><span class="w">
</span><span class="c1"># Rearrange the data for ggplot</span><span class="w">
</span><span class="n">med_access_melt</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">melt</span><span class="p">(</span><span class="n">med_access</span><span class="p">)</span><span class="w">

</span><span class="c1"># This creates a dataframe with three columns</span><span class="w">
</span><span class="c1"># Country = Country name</span><span class="w">
</span><span class="c1"># value = % access (Private_Access or Public_Access).</span><span class="w">
</span><span class="c1"># variable = indicates Public_Access or Private_Access. </span><span class="w">

</span><span class="n">ggplot</span><span class="p">(</span><span class="n">med_access_melt</span><span class="p">,</span><span class="w"> 
  </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Country</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">variable</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"dodge"</span><span class="p">,</span><span class="w"> </span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"identity"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">scale_fill_discrete</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Access"</span><span class="p">,</span><span class="w">
    </span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Private sector"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Public sector"</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">axis.text.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">90</span><span class="p">,</span><span class="w"> 
    </span><span class="n">hjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">vjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme_bw</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Access to essential medication"</span><span class="p">,</span><span class="w"> 
    </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Country"</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Percent of patients with access to 
      essential medication"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="c1"># Flip axis to make country labels readable</span><span class="w">
  </span><span class="n">coord_flip</span><span class="p">()</span><span class="w">
</span></code></pre></div>  </div>
  <div class="figure figure-no-source" id="figure-5-11">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/r-figure-05-11.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-11.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-11-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-11-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-11-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-11.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Access to essential medication.
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-11.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-11-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-11-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-11-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-11.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Access to essential medication.
" class="" />
        </a>
</div>
<p class="description">
Access to essential medication.
</p>
<p class="caption">
<span class="figure-reference">Figure 5.11 </span>
Access to essential medication.
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
  <p>Let’s find the extreme values, starting with the two countries where public sector patients have access to all (100%) essential medications (which you can also see in the chart).</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">med_access</span><span class="p">[</span><span class="n">med_access</span><span class="o">$</span><span class="n">Public_Access</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##               Country Private_Access Public_Access</span><span class="w">
</span><span class="c1">## 10       Cook Islands           33.3           100</span><span class="w">
</span><span class="c1">## 30 Russian Federation          100.0           100</span><span class="w">
</span></code></pre></div>  </div>
  <p>Let’s see which countries provide 0% access to essential medication for people in the public sector.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">med_access</span><span class="p">[</span><span class="n">med_access</span><span class="o">$</span><span class="n">Public_Access</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">##   Country Private_Access Public_Access</span><span class="w">
</span><span class="c1">## 4 Brazil  76.7           0</span><span class="w">
</span></code></pre></div>  </div>
</blockquote>
<p class="keep-with-next">Since an individual’s income and available options in later life partly depend on their level of education, inequality in educational access or attainment can lead to inequality in income and other outcomes. Gender inequality can be measured by the share of women at different levels of attainment. We will focus on the aspect of gender inequality in educational attainment, using data from the Our World in Data website, to make our own comparisons between countries and over time. Choose one of the following measures to answer Question 4:</p>
<ul>
  <li>gender gap in primary education (share of enrolled female primary education students)</li>
  <li>share of women, between 15 and 19 years old, with no education</li>
  <li>share of women, 15 years and older, with no education.</li>
</ul>
<p>To download the data for your chosen measure:</p>
<ul>
  <li>Go to the <a href="https://tinyco.re/8784776" class="show-url">‘Educational Mobility and Inequality’ section</a> of the Our World in Data website, and find the chart for your chosen measure.</li>
  <li>Click the ‘Data’ button at the bottom of the chart, then click the blue button that appears to download the data in csv format.</li>
</ul>
<ol class="text-question">
  <li>For your chosen measure:</li>
</ol>
<ul class="text-sub-question">
  <li>Choose ten countries that have data from 1980 to 2010. Plot your chosen countries on the same line chart, with year on the horizontal axis and share on the vertical axis. Make sure to include a legend showing country names and label the axes appropriately.</li>
</ul>
<ul class="text-sub-question">
  <li>Describe any general patterns in gender inequality in education over time, as well as any similarities and differences between countries.</li>
</ul>
<ul class="text-sub-question">
  <li>Calculate the change in the value of this measure between 1980 and 2010 for each country chosen. Sort these countries according to this value, from the smallest change to largest change. Now plot a column chart showing the change (1980 to 2010) on the vertical axis, and country on the horizontal axis. Add data labels to display the value for each country.</li>
</ul>
<ul class="text-sub-question">
  <li>Which country had the largest change? Which country had the smallest change?</li>
</ul>
<ul class="text-sub-question">
  <li>Suggest some explanations for your observations in Questions 4(<em>b</em>) and (<em>d</em>). (You may want to do some background research on your chosen countries.)</li>
</ul>
<ul class="text-sub-question">
  <li>Discuss the limitations of using this measure to assess the degree of gender inequality in educational attainment and propose some alternative measures.</li>
</ul>
<blockquote class="expandable-box page-break-before">
  <h3 id="r-walk-through-511-using-line-and-bar-charts-to-illustrate-changes-in-time"><strong>R walk-through 5.11</strong> Using line and bar charts to illustrate changes in time</h3>
  <h4 class="add-1" id="import-data-and-plot-a-line-chart">Import data and plot a line chart</h4>
  <p>First we import the data into R and check its structure.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Open the csv file from the working directory</span><span class="w">
</span><span class="n">data_prim</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="w">
  </span><span class="s2">"OWID-gender-gap-in-primary-education.csv"</span><span class="p">)</span><span class="w">
</span><span class="n">str</span><span class="p">(</span><span class="n">data_prim</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## 'data.frame':  8780 obs. of 4 variables:</span><span class="w">
</span><span class="c1">##  $ Entity                                         : Factor w/ 250 levels "Afghanistan",..: 1 1 1 1 1 1 1 1 1 1 ...</span><span class="w">
</span><span class="c1">##  $ Code                                           : Factor w/ 207 levels "","ABW","AFG",..: 3 3 3 3 3 3 3 3 3 3 ...</span><span class="w">
</span><span class="c1">##  $ Year                                           : int  1970 1971 1972 1973 1974 1975 1976 1977 1978 1980 ...</span><span class="w">
</span><span class="c1">##  $ Primary.education..pupils....female.....female.: num  14.1 13.7 14 14.5 14.4 ...</span><span class="w">
</span></code></pre></div>  </div>
  <p>The data is now in the dataframe <code class="language-r highlighter-rouge"><span class="n">data_prim</span></code>. The variable of interest (<code class="language-r highlighter-rouge"><span class="n">percentage</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">female</span><span class="w"> </span><span class="n">enrolment</span></code>) has a very long name so we will shorten it to <code class="language-r highlighter-rouge"><span class="n">PFE</span></code>.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">names</span><span class="p">(</span><span class="n">data_prim</span><span class="p">)[</span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"PFE"</span><span class="w">
</span></code></pre></div>  </div>
  <p>As usual, ensure that you understand the definition of the variables you are using. In the Our World in Data website, look at the ‘Sources’ tab underneath the graph for a definition:</p>
  <blockquote>
    <p>Percentage of female enrollment is calculated by dividing the total number of female students at a given level of education by the total enrolment at the same level, and multiplying by 100.</p>
  </blockquote>
  <p>This definition implies that if the primary-school-age population was 50% male and 50% female and all children were enrolled in school, the percentage of female enrolment would be 50.</p>
  <p>Before choosing ten countries, we check which countries (<code class="language-r highlighter-rouge"><span class="n">Entity</span></code>) are in the dataset using the <code class="language-r highlighter-rouge"><span class="n">unique</span></code> function. Here we also use the <code class="language-r highlighter-rouge"><span class="n">head</span><span class="p">()</span></code> function to only show the first few countries.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">head</span><span class="p">(</span><span class="n">unique</span><span class="p">(</span><span class="n">data_prim</span><span class="o">$</span><span class="n">Entity</span><span class="p">))</span><span class="w">
</span></code></pre></div>  </div>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## [1] Afghanistan         Albania             Algeria            </span><span class="w">
</span><span class="c1">## [4] Andorra             Angola              Antigua and Barbuda</span><span class="w">
</span><span class="c1">## 250 Levels: Afghanistan Albania Algeria Andorra ... Zimbabwe</span><span class="w">
</span></code></pre></div>  </div>
  <p>You can find nearly all the countries in the world in this list (plus some sub- and supra-country entities, like OECD countries, which explains why the variable wasn’t initially called ‘Country’).</p>
  <h4 id="plot-a-line-chart-for-a-selection-of-countries">Plot a line chart for a selection of countries</h4>
  <p>We now make a selection of ten countries. (You can of course make a different selection, but ensure that you get the spelling right as R is unforgiving!).</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">temp_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">data_prim</span><span class="p">,</span><span class="w"> </span><span class="n">Entity</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="w">
  </span><span class="s2">"Albania"</span><span class="p">,</span><span class="w"> </span><span class="s2">"China"</span><span class="p">,</span><span class="w"> </span><span class="s2">"France"</span><span class="p">,</span><span class="w"> </span><span class="s2">"India"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Japan"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"Switzerland"</span><span class="p">,</span><span class="w"> </span><span class="s2">"United Arab Emirates"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"United Kingdom"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Zambia"</span><span class="p">,</span><span class="w"> </span><span class="s2">"United States"</span><span class="p">))</span><span class="w">
</span></code></pre></div>  </div>
  <p>Now we plot the data, similar to what we did earlier.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ggplot</span><span class="p">(</span><span class="n">temp_data</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Year</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PFE</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Entity</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="c1"># size = 1 sets the line thickness.</span><span class="w">
  </span><span class="n">geom_line</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="c1"># Remove grey background</span><span class="w">
  </span><span class="n">theme_bw</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">   
  </span><span class="c1"># Change the set of colours used</span><span class="w">
  </span><span class="n">scale_colour_brewer</span><span class="p">(</span><span class="n">palette</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Paired"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">scale_colour_discrete</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Country"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="c1"># Set the vertical axis label</span><span class="w">
  </span><span class="n">ylab</span><span class="p">(</span><span class="s2">"Percentage (%)"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="c1"># Add a title</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Female pupils as a percentage of 
    total enrolment in primary education"</span><span class="p">)</span><span class="w"> 
</span></code></pre></div>  </div>
  <div class="figure figure-no-source" id="figure-5-12">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/r-figure-05-12.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-12.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-12-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-12-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-12-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-12.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Female pupils as a percentage of total enrolment in primary education.
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-12.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-12-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-12-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-12-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-12.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Female pupils as a percentage of total enrolment in primary education.
" class="" />
        </a>
</div>
<p class="description">
Female pupils as a percentage of total enrolment in primary education.
</p>
<p class="caption">
<span class="figure-reference">Figure 5.12 </span>
Female pupils as a percentage of total enrolment in primary education.
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
  <h4 id="plot-a-column-chart-with-sorted-values">Plot a column chart with sorted values</h4>
  <p class="tighten-10">To calculate the change in the value of this measure between 1980 and 2010 for each country chosen, we have to manipulate the data so that we have one entry (row) for each entity (or country), but two different variables for the percentage of female enrolment <code class="language-r highlighter-rouge"><span class="n">PFE</span></code> (one for each year).</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Select all data for 1980</span><span class="w">
</span><span class="n">temp_data_80</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">temp_data</span><span class="p">,</span><span class="w"> </span><span class="n">Year</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"1980"</span><span class="p">)</span><span class="w">
</span><span class="c1"># Rename variable to include year</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">temp_data_80</span><span class="p">)[</span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"PFE_80"</span><span class="w">
</span><span class="c1"># Select all data for 2010</span><span class="w">
</span><span class="n">temp_data_10</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">temp_data</span><span class="p">,</span><span class="w"> </span><span class="n">Year</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"2010"</span><span class="p">)</span><span class="w"> 
</span><span class="c1"># Rename variable to include year</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">temp_data_10</span><span class="p">)[</span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"PFE_10"</span><span class="w">
</span><span class="n">temp_data2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="w">
  </span><span class="n">temp_data_80</span><span class="p">,</span><span class="w"> </span><span class="n">temp_data_10</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Entity"</span><span class="p">))</span><span class="w">
</span></code></pre></div>  </div>
  <p>Have a look at <code class="language-r highlighter-rouge"><span class="n">temp_data2</span></code>, which now contains two variables for every country, <code class="language-r highlighter-rouge"><span class="n">PFE_80</span></code> and <code class="language-r highlighter-rouge"><span class="n">PFE_10</span></code>. It also has multiple variables for Year (<code class="language-r highlighter-rouge"><span class="n">Year.x</span></code> and <code class="language-r highlighter-rouge"><span class="n">Year.y</span></code>) and Code (<code class="language-r highlighter-rouge"><span class="n">Code.x</span></code> and <code class="language-r highlighter-rouge"><span class="n">Code.y</span></code>), but that is a minor issue and you could delete one of them.</p>
  <p>Now we can calculate the difference.</p>
  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">temp_data2</span><span class="o">$</span><span class="n">dPFE</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">temp_data2</span><span class="o">$</span><span class="n">PFE_10</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">temp_data2</span><span class="o">$</span><span class="n">PFE_80</span><span class="w">
</span></code></pre></div>  </div>
  <p>You could plot a separate chart for each year and check the order, but here we show how to create one chart with the data from both years.</p>
  <div class="language-r print-wrap-words highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ggplot</span><span class="p">(</span><span class="n">temp_data2</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="w">
  </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reorder</span><span class="p">(</span><span class="n">Code.x</span><span class="p">,</span><span class="w"> </span><span class="n">dPFE</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dPFE</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"identity"</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"tomato3"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">labs</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Change (%) in female pupils’ share of 
    total enrolment in primary education"</span><span class="p">,</span><span class="w">
    </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Country"</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Percentage change (%)"</span><span class="p">,</span><span class="w">
    </span><span class="n">caption</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"source: https://ourworldindata.org/educational-mobility-inequality"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme_bw</span><span class="p">()</span><span class="w">
</span></code></pre></div>  </div>
  <div class="figure figure-no-source" id="figure-5-13">
<div class="figure-body">
<div class="figure-images contains-1">
        <a href="https://core-econ.org/doing-economics/book/images/web/r-figure-05-13.jpg" class="figure-image-link">
                <noscript>
                    <img src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-13.jpg" srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-13-320.jpg 320w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-13-640.jpg 640w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-13-1024.jpg 1024w,
                                    https://core-econ.org/doing-economics/book/images/web/r-figure-05-13.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Change in percentage of female enrolment in primary school from 1980 to 2010.
" class="" />
                </noscript>
                <img data-src="https://core-econ.org/doing-economics/book/images/web/r-figure-05-13.jpg" data-srcset="https://core-econ.org/doing-economics/book/images/web/r-figure-05-13-320.jpg 320w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-13-640.jpg 640w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-13-1024.jpg 1024w,
                                     https://core-econ.org/doing-economics/book/images/web/r-figure-05-13.jpg 1280w" sizes="(min-width: 600px) 1300px, 100vw" alt="Change in percentage of female enrolment in primary school from 1980 to 2010.
" class="" />
        </a>
</div>
<p class="description">
Change in percentage of female enrolment in primary school from 1980 to 2010.
</p>
<p class="caption">
<span class="figure-reference">Figure 5.13 </span>
Change in percentage of female enrolment in primary school from 1980 to 2010.
        <span class="figure-download">
        </span>
</p>
</div><!--.figure-body-->
</div>
  <p>It is apparent that some countries saw very little or no change (the countries that already had very high PFE). The countries with initially low female participation have significantly improved.</p>
</blockquote>
<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>University of Manchester’s Econometric Computing Learning Resource (ECLR). 2018. ‘R TSplots’. Updated 26 July 2016. <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
	</div><!--#content-->
    <div id="nav" class="non-printing">
            <h2>Doing Economics</h2>
            <div class="search">
<form class="search" action="../../search.html" method="get">
  <label for="search-box"></label>
  <input type="text" id="search-box" class="search-box" name="query" placeholder="Search">
  <input id="search-language" type="hidden" name="lang" value="en">
</form>
            </div><!--.search-->
            <div class="nav-list">
                    <ol class="nav-series-home">
                        <li><a href="../../index.html">Home</a></li>
                    </ol>
    <ol>
        <li class="
        no-children
        ">
            <a href="0-3-contents.html#contents"
               class="">
                Table of contents
            </a>
        </li>
        <li class="
        no-children
        toc-frontmatter">
            <a href="0-4-preface.html#preface"
               class="">
                Preface
            </a>
        </li>
        <li class="
        no-children
        toc-frontmatter">
            <a href="0-5-note-to-instructors.html#a-note-to-instructors"
               class="">
                A note to instructors
            </a>
        </li>
        <li class="
        no-children
        toc-frontmatter">
            <a href="0-6-contributors.html#producing-doing-economics"
               class="">
                Producing <em>Doing Economics</em>
            </a>
        </li>
        <li class="
        no-children
        toc-frontmatter">
            <a href="0-7-resources.html#resources"
               class="">
                List of resources
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                1—Measuring climate change
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="01-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="01-02.html"
               class="">
                Part 1.1 The behaviour of average surface temperature over time
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-02.html#part-12-variation-in-temperature-over-time"
               class="">
                Part 1.2 Variation in temperature over time
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-02.html#part-13-carbon-emissions-and-the-environment"
               class="">
                Part 1.3 Carbon emissions and the environment
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="01-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-03.html#part-11-the-behaviour-of-average-surface-temperature-over-time"
               class="">
                Part 1.1 The behaviour of average surface temperature over time
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-03.html#part-12-variation-in-temperature-over-time"
               class="">
                Part 1.2 Variation in temperature over time
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-03.html#part-13-carbon-emissions-and-the-environment"
               class="">
                Part 1.3 Carbon emissions and the environment
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="01-05.html"
               class="">
                Part 1.1 The behaviour of average surface temperature over time
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-05.html#part-12-variation-in-temperature-over-time"
               class="">
                Part 1.2 Variation in temperature over time
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-05.html#part-13-carbon-emissions-and-the-environment"
               class="">
                Part 1.3 Carbon emissions and the environment
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="01-04.html"
               class="">
                Part 1.1 The behaviour of average surface temperature over time
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-04.html#part-12-variation-in-temperature-over-time"
               class="">
                Part 1.2 Variation in temperature over time
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="01-04.html#part-13-carbon-emissions-and-the-environment"
               class="">
                Part 1.3 Carbon emissions and the environment
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                2—Collecting and analysing data from experiments
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="02-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="02-02.html"
               class="">
                Part 2.1 Collecting data by playing a public goods game
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-02.html#part-22-describing-the-data"
               class="">
                Part 2.2 Describing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-02.html#part-23-did-changing-the-rules-of-the-game-affect-behaviour"
               class="">
                Part 2.3 Did changing the rules of the game affect behaviour?
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="02-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-03.html#part-21-collecting-data-by-playing-a-public-goods-game"
               class="">
                Part 2.1 Collecting data by playing a public goods game
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-03.html#part-22-describing-the-data"
               class="">
                Part 2.2 Describing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-03.html#part-23-did-changing-the-rules-of-the-game-affect-behaviour"
               class="">
                Part 2.3 Did changing the rules of the game affect behaviour?
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="02-05.html"
               class="">
                Part 2.1 Collecting data by playing a public goods game
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-05.html#part-22-describing-the-data"
               class="">
                Part 2.2 Describing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-05.html#part-23-did-changing-the-rules-of-the-game-affect-behaviour"
               class="">
                Part 2.3 Did changing the rules of the game affect behaviour?
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="02-04.html"
               class="">
                Part 2.1 Collecting data by playing a public goods game
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-04.html#part-22-describing-the-data"
               class="">
                Part 2.2 Describing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="02-04.html#part-23-did-changing-the-rules-of-the-game-affect-behaviour"
               class="">
                Part 2.3 Did changing the rules of the game affect behaviour?
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                3—Measuring the effect of a sugar tax
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="03-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="03-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="03-02.html"
               class="">
                Excel-specific learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="03-02.html#part-31-before-and-after-comparisons-of-retail-prices"
               class="">
                Part 3.1 Before-and-after comparisons of retail prices
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="03-02.html#part-32-before-and-after-comparisons-with-prices-in-other-areas"
               class="">
                Part 3.2 Before-and-after comparisons with prices in other areas
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="03-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="03-03.html#part-31-before-and-after-comparisons-of-retail-prices"
               class="">
                Part 3.1 Before-and-after comparisons of retail prices
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="03-03.html#part-32-before-and-after-comparisons-with-prices-in-other-areas"
               class="">
                Part 3.2 Before-and-after comparisons with prices in other areas
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="03-05.html"
               class="">
                Google Sheets-specific learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="03-05.html#part-31-before-and-after-comparisons-of-retail-prices"
               class="">
                Part 3.1 Before-and-after comparisons of retail prices
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="03-05.html#part-32-before-and-after-comparisons-with-prices-in-other-areas"
               class="">
                Part 3.2 Before-and-after comparisons with prices in other areas
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="03-04.html"
               class="">
                Part 3.1 Before-and-after comparisons of retail prices
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="03-04.html#part-32-before-and-after-comparisons-with-prices-in-other-areas"
               class="">
                Part 3.2 Before-and-after comparisons with prices in other areas
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                4—Measuring wellbeing
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="04-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="04-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="04-02.html"
               class="">
                Excel-specific learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="04-02.html#part-41-gdp-and-its-components-as-a-measure-of-material-wellbeing"
               class="">
                Part 4.1 GDP and its components as a measure of material wellbeing
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="04-02.html#part-42-the-hdi-as-a-measure-of-wellbeing"
               class="">
                Part 4.2 The HDI as a measure of wellbeing
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="04-03.html"
               class="">
                R-specific learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="04-03.html#getting-started-in-r"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="04-03.html#part-41-gdp-and-its-components-as-a-measure-of-material-wellbeing"
               class="">
                Part 4.1 GDP and its components as a measure of material wellbeing
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="04-03.html#part-42-the-hdi-as-a-measure-of-wellbeing"
               class="">
                Part 4.2 The HDI as a measure of wellbeing
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="04-05.html"
               class="">
                Google Sheets-specific learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="04-05.html#part-41-gdp-and-its-components-as-a-measure-of-material-wellbeing"
               class="">
                Part 4.1 GDP and its components as a measure of material wellbeing
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="04-05.html#part-42-the-hdi-as-a-measure-of-wellbeing"
               class="">
                Part 4.2 The HDI as a measure of wellbeing
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="04-04.html"
               class="">
                Part 4.1 GDP and its components as a measure of material wellbeing
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="04-04.html#part-42-the-hdi-as-a-measure-of-wellbeing"
               class="">
                Part 4.2 The HDI as a measure of wellbeing
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                5—Measuring inequality: Lorenz curves and Gini coefficients
            </a>
    <ol class="active">
        <li class="
        no-children
        ">
            <a href="05-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="05-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="05-02.html"
               class="">
                Part 5.1 Measuring income inequality
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="05-02.html#part-52-measuring-other-kinds-of-inequality"
               class="">
                Part 5.2 Measuring other kinds of inequality
            </a>
        </li>
    </ol>
        </li>
        <li class="active
        no-file
        no-link
        has-children
        ">
            <a 
               class="active">
                Working in R
            </a>
    <ol class="active">
        <li class="active
        no-children
        ">
            <a href="05-03.html"
               class="active">
                R-specific learning objectives
            </a>
        </li>
        <li class="active
        no-children
        ">
            <a href="05-03.html#getting-started-in-r"
               class="active">
                Getting started in R
            </a>
        </li>
        <li class="active
        no-children
        ">
            <a href="05-03.html#part-51-measuring-income-inequality"
               class="active">
                Part 5.1 Measuring income inequality
            </a>
        </li>
        <li class="active
        no-children
        ">
            <a href="05-03.html#part-52-measuring-other-kinds-of-inequality"
               class="active">
                Part 5.2 Measuring other kinds of inequality
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        has-children
        ">
            <a href="05-05.html#empirical-project-5-working-in-google-sheets"
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="05-05.html"
               class="">
                Part 5.1 Measuring income inequality
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="05-05.html#part-52-measuring-other-kinds-of-inequality"
               class="">
                Part 5.2 Measuring other kinds of inequality
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="05-04.html"
               class="">
                Part 5.1 Measuring income inequality
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="05-04.html#part-52-measuring-other-kinds-of-inequality"
               class="">
                Part 5.2 Measuring other kinds of inequality
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                6—Measuring management practices
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="06-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="06-02.html"
               class="">
                Part 6.1 Looking for patterns in the survey data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-02.html#part-62-do-management-practices-differ-between-countries"
               class="">
                Part 6.2 Do management practices differ between countries?
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-02.html#part-63-what-factors-affect-the-quality-of-management"
               class="">
                Part 6.3 What factors affect the quality of management?
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="06-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-03.html#part-61-looking-for-patterns-in-the-survey-data"
               class="">
                Part 6.1 Looking for patterns in the survey data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-03.html#part-62-do-management-practices-differ-between-countries"
               class="">
                Part 6.2 Do management practices differ between countries?
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-03.html#part-63-what-factors-affect-the-quality-of-management"
               class="">
                Part 6.3 What factors affect the quality of management?
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="06-05.html"
               class="">
                Part 6.1 Looking for patterns in the survey data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-05.html#part-62-do-management-practices-differ-between-countries"
               class="">
                Part 6.2 Do management practices differ between countries?
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-05.html#part-63-what-factors-affect-the-quality-of-management"
               class="">
                Part 6.3 What factors affect the quality of management?
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="06-04.html"
               class="">
                Part 6.1 Looking for patterns in the survey data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-04.html#part-62-do-management-practices-differ-between-countries"
               class="">
                Part 6.2 Do management practices differ between countries?
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="06-04.html#part-63-what-factors-affect-the-quality-of-management"
               class="">
                Part 6.3 What factors affect the quality of management?
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                7—Supply and demand
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="07-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="07-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="07-02.html"
               class="">
                Part 7.1 Drawing supply and demand diagrams
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="07-02.html#part-72-interpreting-supply-and-demand-curves"
               class="">
                Part 7.2 Interpreting supply and demand curves
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="07-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="07-03.html#part-71-drawing-supply-and-demand-diagrams"
               class="">
                Part 7.1 Drawing supply and demand diagrams
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="07-03.html#part-72-interpreting-supply-and-demand-curves"
               class="">
                Part 7.2 Interpreting supply and demand curves
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="07-05.html"
               class="">
                Part 7.1 Drawing supply and demand diagrams
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="07-05.html#part-72-interpreting-supply-and-demand-curves"
               class="">
                Part 7.2 Interpreting supply and demand curves
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="07-04.html"
               class="">
                Part 7.1 Drawing supply and demand diagrams
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="07-04.html#part-72-interpreting-supply-and-demand-curves"
               class="">
                Part 7.2 Interpreting supply and demand curves
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                8—Measuring the non-monetary cost of unemployment
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="08-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="08-02.html"
               class="">
                Part 8.1 Cleaning and summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-02.html#part-82-visualizing-the-data"
               class="">
                Part 8.2 Visualizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-02.html#part-83-confidence-intervals-for-difference-in-the-mean"
               class="">
                Part 8.3 Confidence intervals for difference in the mean
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="08-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-03.html#part-81-cleaning-and-summarizing-the-data"
               class="">
                Part 8.1 Cleaning and summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-03.html#part-82-visualizing-the-data"
               class="">
                Part 8.2 Visualizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-03.html#part-83-confidence-intervals-for-difference-in-the-mean"
               class="">
                Part 8.3 Confidence intervals for difference in the mean
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="08-05.html"
               class="">
                Part 8.1 Cleaning and summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-05.html#part-82-visualizing-the-data"
               class="">
                Part 8.2 Visualizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-05.html#part-83-confidence-intervals-for-difference-in-the-mean"
               class="">
                Part 8.3 Confidence intervals for difference in the mean
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="08-04.html"
               class="">
                Part 8.1 Cleaning and summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-04.html#part-82-visualizing-the-data"
               class="">
                Part 8.2 Visualizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="08-04.html#part-83-confidence-intervals-for-difference-in-the-mean"
               class="">
                Part 8.3 Confidence intervals for difference in the mean
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                9—Credit-excluded households in a developing country
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="09-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="09-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="09-02.html"
               class="">
                Excel-specific learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="09-02.html#part-91-households-that-did-not-get-a-loan"
               class="">
                Part 9.1 Households that did not get a loan
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="09-02.html#part-92-households-that-got-a-loan"
               class="">
                Part 9.2 Households that got a loan
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="09-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="09-03.html#part-91-households-that-did-not-get-a-loan"
               class="">
                Part 9.1 Households that did not get a loan
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="09-03.html#part-92-households-that-got-a-loan"
               class="">
                Part 9.2 Households that got a loan
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="09-05.html"
               class="">
                Google Sheets-specific learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="09-05.html#part-91-households-that-did-not-get-a-loan"
               class="">
                Part 9.1 Households that did not get a loan
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="09-05.html#part-92-households-that-got-a-loan"
               class="">
                Part 9.2 Households that got a loan
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="09-04.html"
               class="">
                Part 9.1 Households that did not get a loan
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="09-04.html#part-92-households-that-got-a-loan"
               class="">
                Part 9.2 Households that got a loan
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                10—Characteristics of banking systems around the world
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="10-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="10-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="10-02.html"
               class="">
                Part 10.1 Summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="10-02.html#part-102-comparing-financial-stability-before-and-after-the-2008-global-financial-crisis"
               class="">
                Part 10.2 Comparing financial stability before and after the 2008 global financial crisis
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="10-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="10-03.html#part-101-summarizing-the-data"
               class="">
                Part 10.1 Summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="10-03.html#part-102-comparing-financial-stability-before-and-after-the-2008-global-financial-crisis"
               class="">
                Part 10.2 Comparing financial stability before and after the 2008 global financial crisis
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="10-05.html"
               class="">
                Part 10.1 Summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="10-05.html#part-102-comparing-financial-stability-before-and-after-the-2008-global-financial-crisis"
               class="">
                Part 10.2 Comparing financial stability before and after the 2008 global financial crisis
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="10-04.html"
               class="">
                Part 10.1 Summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="10-04.html#part-102-comparing-financial-stability-before-and-after-the-2008-global-financial-crisis"
               class="">
                Part 10.2 Comparing financial stability before and after the 2008 global financial crisis
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                11—Measuring willingness to pay for climate change mitigation
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="11-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="11-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="11-02.html"
               class="">
                Part 11.1 Summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="11-02.html#part-112-comparing-willingness-to-pay-across-methods-and-individual-characteristics"
               class="">
                Part 11.2 Comparing willingness to pay across methods and individual characteristics
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="11-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="11-03.html#part-111-summarizing-the-data"
               class="">
                Part 11.1 Summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="11-03.html#part-112-comparing-willingness-to-pay-across-methods-and-individual-characteristics"
               class="">
                Part 11.2 Comparing willingness to pay across methods and individual characteristics
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="11-05.html"
               class="">
                Part 11.1 Summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="11-05.html#part-112-comparing-willingness-to-pay-across-methods-and-individual-characteristics"
               class="">
                Part 11.2 Comparing willingness to pay across methods and individual characteristics
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="11-04.html"
               class="">
                Part 11.1 Summarizing the data
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="11-04.html#part-112-comparing-willingness-to-pay-across-methods-and-individual-characteristics"
               class="">
                Part 11.2 Comparing willingness to pay across methods and individual characteristics
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                12—Government policies and popularity: Hong Kong cash handout
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="12-01.html"
               class="">
                Learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="12-01.html#introduction"
               class="">
                Introduction
            </a>
        </li>
        <li class="
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Excel
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="12-02.html"
               class="">
                Excel-specific learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="12-02.html#part-121-inequality"
               class="">
                Part 12.1 Inequality
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="12-02.html#part-122-government-popularity"
               class="">
                Part 12.2 Government popularity
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in R
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="12-03.html"
               class="">
                Getting started in R
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="12-03.html#part-121-inequality"
               class="">
                Part 12.1 Inequality
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="12-03.html#part-122-government-popularity"
               class="">
                Part 12.2 Government popularity
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Working in Google Sheets
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="12-05.html"
               class="">
                Google Sheets-specific learning objectives
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="12-05.html#part-121-inequality"
               class="">
                Part 12.1 Inequality
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="12-05.html#part-122-government-popularity"
               class="">
                Part 12.2 Government popularity
            </a>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-link
        has-children
        ">
            <a 
               class="">
                Solutions
            </a>
    <ol>
        <li class="
        no-children
        ">
            <a href="12-04.html"
               class="">
                Part 12.1 Inequality
            </a>
        </li>
        <li class="
        no-children
        ">
            <a href="12-04.html#part-122-government-popularity"
               class="">
                Part 12.2 Government popularity
            </a>
        </li>
    </ol>
        </li>
    </ol>
        </li>
        <li class="
        no-file
        no-children
        toc-endmatter">
            <a href="50-00-technical-reference.html"
               class="">
                Technical Reference
            </a>
        </li>
        <li class="
        no-file
        no-children
        toc-endmatter">
            <a href="50-01-glossary.html#glossary"
               class="">
                Glossary
            </a>
        </li>
        <li class="
        no-file
        no-children
        toc-endmatter">
            <a href="50-02-bibliography.html#bibliography"
               class="">
                Bibliography
            </a>
        </li>
        <li class="
        no-file
        no-children
        toc-endmatter">
            <a href="50-03-copyright-acknowledgements.html#copyright-acknowledgements"
               class="">
                Copyright acknowledgements
            </a>
        </li>
    </ol>
            </div><!--.nav-list-->
            <div class="widgets">
            </div><!--.widgets-->
    </div><!--#nav-->
    <div id="footer" dir="ltr">
        <div class="footer-content">
            <div class="footer-logos">
                <a href="http://core-econ.org">
                    <img src="../../assets/coreecon_logo_bw.png">
                </a>
            </div>
            <div class="footer-text">
                <p>This ebook is developed by the CORE project. More information and additional resources for learning and teaching can be found at <a href="https://www.core-econ.org">www.core-econ.org</a>.</p>
            </div>
            <div class="footer-licence">
                <a title="Licensed under Creative Commons BY NC ND" alt="Licensed under Creative Commons BY NC ND" href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><img src="../../assets/cc-byncnd.png"></a>
                <br />
                Version 1.0.0 &bull; Produced by <a href='https://electricbookworks.com'>Electric Book Works</a>
            </div>
        </div><!--.footer-content-->
    </div><!--#footer-->
    <script src="../../assets/js/bundle.js?date=20200224120313"></script>
    <style>
        .js-mcq .mcq-correct .mcq-feedback:before {
            content: "Correct!";
        }
        .js-mcq .mcq-incorrect .mcq-feedback:before {
            content: "Incorrect";
        }
        .js-mcq .mcq-partially-correct .mcq-feedback:before {
            content: "You haven't selected all the correct answers.";
        }
    </style>
</div><!--#wrapper-->
</body>
</html>
